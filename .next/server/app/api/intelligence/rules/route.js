"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/intelligence/rules/route";
exports.ids = ["app/api/intelligence/rules/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintelligence%2Frules%2Froute&page=%2Fapi%2Fintelligence%2Frules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintelligence%2Frules%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintelligence%2Frules%2Froute&page=%2Fapi%2Fintelligence%2Frules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintelligence%2Frules%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_tarinipersonal_Documents_ComplianceIQ_src_app_api_intelligence_rules_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/intelligence/rules/route.ts */ \"(rsc)/./src/app/api/intelligence/rules/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/intelligence/rules/route\",\n        pathname: \"/api/intelligence/rules\",\n        filename: \"route\",\n        bundlePath: \"app/api/intelligence/rules/route\"\n    },\n    resolvedPagePath: \"/Users/tarinipersonal/Documents/ComplianceIQ/src/app/api/intelligence/rules/route.ts\",\n    nextConfigOutput,\n    userland: _Users_tarinipersonal_Documents_ComplianceIQ_src_app_api_intelligence_rules_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/intelligence/rules/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnRlbGxpZ2VuY2UlMkZydWxlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGaW50ZWxsaWdlbmNlJTJGcnVsZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZpbnRlbGxpZ2VuY2UlMkZydWxlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRhcmluaXBlcnNvbmFsJTJGRG9jdW1lbnRzJTJGQ29tcGxpYW5jZUlRJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnRhcmluaXBlcnNvbmFsJTJGRG9jdW1lbnRzJTJGQ29tcGxpYW5jZUlRJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvQztBQUNqSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbXBsaWFuY2UtaXEvP2M4N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3RhcmluaXBlcnNvbmFsL0RvY3VtZW50cy9Db21wbGlhbmNlSVEvc3JjL2FwcC9hcGkvaW50ZWxsaWdlbmNlL3J1bGVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbnRlbGxpZ2VuY2UvcnVsZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pbnRlbGxpZ2VuY2UvcnVsZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2ludGVsbGlnZW5jZS9ydWxlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy90YXJpbmlwZXJzb25hbC9Eb2N1bWVudHMvQ29tcGxpYW5jZUlRL3NyYy9hcHAvYXBpL2ludGVsbGlnZW5jZS9ydWxlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW50ZWxsaWdlbmNlL3J1bGVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintelligence%2Frules%2Froute&page=%2Fapi%2Fintelligence%2Frules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintelligence%2Frules%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/intelligence/rules/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/intelligence/rules/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_intelligence_rulesIntelligence__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/intelligence/rulesIntelligence */ \"(rsc)/./src/lib/intelligence/rulesIntelligence.ts\");\n\n\n/**\n * API endpoint for rules intelligence analysis\n */ async function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const action = searchParams.get(\"action\") || \"summary\";\n        console.log(`Rules intelligence API called with action: ${action}`);\n        switch(action){\n            case \"summary\":\n                const summary = await _lib_intelligence_rulesIntelligence__WEBPACK_IMPORTED_MODULE_1__.rulesIntelligence.getIntelligenceSummary();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: summary,\n                    timestamp: new Date().toISOString()\n                });\n            case \"performance\":\n                const performance = await _lib_intelligence_rulesIntelligence__WEBPACK_IMPORTED_MODULE_1__.rulesIntelligence.analyzeRulePerformance();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: performance,\n                    timestamp: new Date().toISOString()\n                });\n            case \"recommendations\":\n                const recommendations = await _lib_intelligence_rulesIntelligence__WEBPACK_IMPORTED_MODULE_1__.rulesIntelligence.generateRuleRecommendations();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: recommendations,\n                    timestamp: new Date().toISOString()\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Invalid action parameter\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Error in rules intelligence API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch rules intelligence data\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * POST endpoint for triggering rule optimization\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        const { ruleId, optimizationType, parameters } = body;\n        console.log(`Rules optimization triggered for rule: ${ruleId}`);\n        // This would integrate with the actual rule optimization system\n        // For now, we'll simulate the optimization process\n        const optimizationResult = {\n            ruleId,\n            optimizationType,\n            parameters,\n            status: \"optimization_initiated\",\n            estimatedCompletionTime: \"15 minutes\",\n            expectedImprovement: \"25-40% reduction in failure rate\",\n            timestamp: new Date().toISOString()\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: optimizationResult\n        });\n    } catch (error) {\n        console.error(\"Error in rules optimization API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to initiate rule optimization\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9pbnRlbGxpZ2VuY2UvcnVsZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNpQjtBQUV6RTs7Q0FFQyxHQUNNLGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsU0FBU0gsYUFBYUksR0FBRyxDQUFDLGFBQWE7UUFFN0NDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJDQUEyQyxFQUFFSCxPQUFPLENBQUM7UUFFbEUsT0FBUUE7WUFDTixLQUFLO2dCQUNILE1BQU1JLFVBQVUsTUFBTVYsa0ZBQWlCQSxDQUFDVyxzQkFBc0I7Z0JBQzlELE9BQU9aLHFEQUFZQSxDQUFDYSxJQUFJLENBQUM7b0JBQ3ZCQyxTQUFTO29CQUNUQyxNQUFNSjtvQkFDTkssV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztZQUVGLEtBQUs7Z0JBQ0gsTUFBTUMsY0FBYyxNQUFNbEIsa0ZBQWlCQSxDQUFDbUIsc0JBQXNCO2dCQUNsRSxPQUFPcEIscURBQVlBLENBQUNhLElBQUksQ0FBQztvQkFDdkJDLFNBQVM7b0JBQ1RDLE1BQU1JO29CQUNOSCxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ25DO1lBRUYsS0FBSztnQkFDSCxNQUFNRyxrQkFBa0IsTUFBTXBCLGtGQUFpQkEsQ0FBQ3FCLDJCQUEyQjtnQkFDM0UsT0FBT3RCLHFEQUFZQSxDQUFDYSxJQUFJLENBQUM7b0JBQ3ZCQyxTQUFTO29CQUNUQyxNQUFNTTtvQkFDTkwsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztZQUVGO2dCQUNFLE9BQU9sQixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO29CQUN2QkMsU0FBUztvQkFDVFMsT0FBTztnQkFDVCxHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1FBQ3JCO0lBQ0YsRUFBRSxPQUFPRCxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU92QixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RTLE9BQU87UUFDVCxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxLQUFLdEIsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU11QixPQUFPLE1BQU12QixRQUFRVSxJQUFJO1FBQy9CLE1BQU0sRUFBRWMsTUFBTSxFQUFFQyxnQkFBZ0IsRUFBRUMsVUFBVSxFQUFFLEdBQUdIO1FBRWpEakIsUUFBUUMsR0FBRyxDQUFDLENBQUMsdUNBQXVDLEVBQUVpQixPQUFPLENBQUM7UUFFOUQsZ0VBQWdFO1FBQ2hFLG1EQUFtRDtRQUVuRCxNQUFNRyxxQkFBcUI7WUFDekJIO1lBQ0FDO1lBQ0FDO1lBQ0FMLFFBQVE7WUFDUk8seUJBQXlCO1lBQ3pCQyxxQkFBcUI7WUFDckJoQixXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDbkM7UUFFQSxPQUFPbEIscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxNQUFNZTtRQUNSO0lBQ0YsRUFBRSxPQUFPUCxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU92QixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RTLE9BQU87UUFDVCxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29tcGxpYW5jZS1pcS8uL3NyYy9hcHAvYXBpL2ludGVsbGlnZW5jZS9ydWxlcy9yb3V0ZS50cz9jNzA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBydWxlc0ludGVsbGlnZW5jZSB9IGZyb20gJ0AvbGliL2ludGVsbGlnZW5jZS9ydWxlc0ludGVsbGlnZW5jZSc7XG5cbi8qKlxuICogQVBJIGVuZHBvaW50IGZvciBydWxlcyBpbnRlbGxpZ2VuY2UgYW5hbHlzaXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBhY3Rpb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdhY3Rpb24nKSB8fCAnc3VtbWFyeSc7XG5cbiAgICBjb25zb2xlLmxvZyhgUnVsZXMgaW50ZWxsaWdlbmNlIEFQSSBjYWxsZWQgd2l0aCBhY3Rpb246ICR7YWN0aW9ufWApO1xuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3N1bW1hcnknOlxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgcnVsZXNJbnRlbGxpZ2VuY2UuZ2V0SW50ZWxsaWdlbmNlU3VtbWFyeSgpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgICBkYXRhOiBzdW1tYXJ5LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdwZXJmb3JtYW5jZSc6XG4gICAgICAgIGNvbnN0IHBlcmZvcm1hbmNlID0gYXdhaXQgcnVsZXNJbnRlbGxpZ2VuY2UuYW5hbHl6ZVJ1bGVQZXJmb3JtYW5jZSgpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgICBkYXRhOiBwZXJmb3JtYW5jZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAncmVjb21tZW5kYXRpb25zJzpcbiAgICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgcnVsZXNJbnRlbGxpZ2VuY2UuZ2VuZXJhdGVSdWxlUmVjb21tZW5kYXRpb25zKCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICAgIGRhdGE6IHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBhY3Rpb24gcGFyYW1ldGVyJyBcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcnVsZXMgaW50ZWxsaWdlbmNlIEFQSTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBydWxlcyBpbnRlbGxpZ2VuY2UgZGF0YScgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFBPU1QgZW5kcG9pbnQgZm9yIHRyaWdnZXJpbmcgcnVsZSBvcHRpbWl6YXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBydWxlSWQsIG9wdGltaXphdGlvblR5cGUsIHBhcmFtZXRlcnMgfSA9IGJvZHk7XG5cbiAgICBjb25zb2xlLmxvZyhgUnVsZXMgb3B0aW1pemF0aW9uIHRyaWdnZXJlZCBmb3IgcnVsZTogJHtydWxlSWR9YCk7XG5cbiAgICAvLyBUaGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIHRoZSBhY3R1YWwgcnVsZSBvcHRpbWl6YXRpb24gc3lzdGVtXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgdGhlIG9wdGltaXphdGlvbiBwcm9jZXNzXG4gICAgXG4gICAgY29uc3Qgb3B0aW1pemF0aW9uUmVzdWx0ID0ge1xuICAgICAgcnVsZUlkLFxuICAgICAgb3B0aW1pemF0aW9uVHlwZSxcbiAgICAgIHBhcmFtZXRlcnMsXG4gICAgICBzdGF0dXM6ICdvcHRpbWl6YXRpb25faW5pdGlhdGVkJyxcbiAgICAgIGVzdGltYXRlZENvbXBsZXRpb25UaW1lOiAnMTUgbWludXRlcycsXG4gICAgICBleHBlY3RlZEltcHJvdmVtZW50OiAnMjUtNDAlIHJlZHVjdGlvbiBpbiBmYWlsdXJlIHJhdGUnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGRhdGE6IG9wdGltaXphdGlvblJlc3VsdCBcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBydWxlcyBvcHRpbWl6YXRpb24gQVBJOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGluaXRpYXRlIHJ1bGUgb3B0aW1pemF0aW9uJyBcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicnVsZXNJbnRlbGxpZ2VuY2UiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiYWN0aW9uIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsInN1bW1hcnkiLCJnZXRJbnRlbGxpZ2VuY2VTdW1tYXJ5IiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicGVyZm9ybWFuY2UiLCJhbmFseXplUnVsZVBlcmZvcm1hbmNlIiwicmVjb21tZW5kYXRpb25zIiwiZ2VuZXJhdGVSdWxlUmVjb21tZW5kYXRpb25zIiwiZXJyb3IiLCJzdGF0dXMiLCJQT1NUIiwiYm9keSIsInJ1bGVJZCIsIm9wdGltaXphdGlvblR5cGUiLCJwYXJhbWV0ZXJzIiwib3B0aW1pemF0aW9uUmVzdWx0IiwiZXN0aW1hdGVkQ29tcGxldGlvblRpbWUiLCJleHBlY3RlZEltcHJvdmVtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/intelligence/rules/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/intelligence/rulesIntelligence.ts":
/*!***************************************************!*\
  !*** ./src/lib/intelligence/rulesIntelligence.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RulesIntelligenceEngine: () => (/* binding */ RulesIntelligenceEngine),\n/* harmony export */   rulesIntelligence: () => (/* binding */ rulesIntelligence)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/**\n * ML-Powered Rules Intelligence System\n * Analyzes existing assessment response patterns to provide intelligent rule recommendations\n */ \nclass RulesIntelligenceEngine {\n    static getInstance() {\n        if (!RulesIntelligenceEngine.instance) {\n            RulesIntelligenceEngine.instance = new RulesIntelligenceEngine();\n        }\n        return RulesIntelligenceEngine.instance;\n    }\n    /**\n   * Analyze rule performance using existing assessment data\n   */ async analyzeRulePerformance() {\n        try {\n            console.log(\"Starting rules intelligence analysis...\");\n            // Get all assessment responses grouped by question/section\n            const responsePatterns = await this.getResponsePatterns();\n            // Analyze patterns to identify rule effectiveness\n            const ruleMetrics = await this.calculateRuleMetrics(responsePatterns);\n            // Generate optimization suggestions\n            const optimizedMetrics = await this.generateOptimizationSuggestions(ruleMetrics);\n            console.log(`Analyzed ${optimizedMetrics.length} rules for intelligence insights`);\n            return optimizedMetrics;\n        } catch (error) {\n            console.error(\"Error analyzing rule performance:\", error);\n            return [];\n        }\n    }\n    /**\n   * Get response patterns from existing assessment data\n   */ async getResponsePatterns() {\n        const patterns = [];\n        try {\n            // Get assessment responses with related data\n            const responses = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.assessmentResponse.findMany({\n                include: {\n                    version: {\n                        include: {\n                            assessment: true\n                        }\n                    }\n                },\n                take: 1000 // Limit for performance\n            });\n            // Group responses by question\n            const groupedResponses = new Map();\n            responses.forEach((response)=>{\n                const key = `${response.questionId}`;\n                if (!groupedResponses.has(key)) {\n                    groupedResponses.set(key, []);\n                }\n                groupedResponses.get(key).push(response);\n            });\n            // Analyze each question pattern\n            for (const [questionId, questionResponses] of groupedResponses){\n                const pattern = this.analyzeQuestionPattern(questionId, questionResponses);\n                if (pattern) {\n                    patterns.push(pattern);\n                }\n            }\n            console.log(`Analyzed ${patterns.length} question patterns`);\n            return patterns;\n        } catch (error) {\n            console.error(\"Error getting response patterns:\", error);\n            return [];\n        }\n    }\n    /**\n   * Analyze patterns for a specific question\n   */ analyzeQuestionPattern(questionId, responses) {\n        if (responses.length < 5) return null; // Need minimum data\n        // Group responses by value\n        const responseGroups = new Map();\n        let totalPoints = 0;\n        let completedCount = 0;\n        responses.forEach((response)=>{\n            const value = response.responseValue || \"no_response\";\n            responseGroups.set(value, (responseGroups.get(value) || 0) + 1);\n            if (response.points !== null) {\n                totalPoints += response.points;\n                completedCount++;\n            }\n        });\n        // Calculate common responses\n        const commonResponses = Array.from(responseGroups.entries()).map(([value, frequency])=>({\n                responseValue: value,\n                frequency,\n                avgPoints: this.calculateAvgPointsForResponse(responses, value)\n            })).sort((a, b)=>b.frequency - a.frequency).slice(0, 5); // Top 5 responses\n        // Calculate failure rate (responses with 0 points or no completion)\n        const failureCount = responses.filter((r)=>r.points === 0 || r.points === null || !r.isCompleted).length;\n        const failureRate = failureCount / responses.length;\n        // Generate improvement opportunities\n        const improvementOpportunities = this.generateImprovementOpportunities(commonResponses, failureRate, responses.length);\n        return {\n            sectionId: responses[0].version?.assessment?.id || \"unknown\",\n            questionId,\n            commonResponses,\n            failureRate,\n            improvementOpportunities\n        };\n    }\n    /**\n   * Calculate average points for a specific response value\n   */ calculateAvgPointsForResponse(responses, value) {\n        const matchingResponses = responses.filter((r)=>r.responseValue === value && r.points !== null);\n        if (matchingResponses.length === 0) return 0;\n        const totalPoints = matchingResponses.reduce((sum, r)=>sum + r.points, 0);\n        return totalPoints / matchingResponses.length;\n    }\n    /**\n   * Generate improvement opportunities based on patterns\n   */ generateImprovementOpportunities(commonResponses, failureRate, totalResponses) {\n        const opportunities = [];\n        if (failureRate > 0.3) {\n            opportunities.push(\"High failure rate detected - consider rule clarification\");\n        }\n        if (commonResponses.length > 0 && commonResponses[0].frequency / totalResponses > 0.8) {\n            opportunities.push(\"Response pattern too uniform - rule may be too restrictive\");\n        }\n        if (commonResponses.some((r)=>r.avgPoints === 0)) {\n            opportunities.push(\"Zero-point responses indicate rule gaps\");\n        }\n        const lowScoringResponses = commonResponses.filter((r)=>r.avgPoints < 2);\n        if (lowScoringResponses.length > 0) {\n            opportunities.push(\"Multiple low-scoring response patterns found\");\n        }\n        return opportunities;\n    }\n    /**\n   * Calculate rule metrics from patterns\n   */ async calculateRuleMetrics(patterns) {\n        const metrics = [];\n        for (const pattern of patterns){\n            const successRate = 1 - pattern.failureRate;\n            const ruleMetric = {\n                ruleId: pattern.questionId,\n                ruleName: `Rule for Question ${pattern.questionId}`,\n                successRate: Math.round(successRate * 100),\n                commonFailurePatterns: pattern.improvementOpportunities,\n                optimizationSuggestions: this.generateRuleSuggestions(pattern),\n                impactScore: this.calculateImpactScore(pattern),\n                affectedAssessments: await this.getAffectedAssessmentCount(pattern.questionId),\n                lastAnalyzed: new Date()\n            };\n            metrics.push(ruleMetric);\n        }\n        return metrics.sort((a, b)=>b.impactScore - a.impactScore);\n    }\n    /**\n   * Generate rule optimization suggestions\n   */ generateRuleSuggestions(pattern) {\n        const suggestions = [];\n        if (pattern.failureRate > 0.4) {\n            suggestions.push(\"Consider breaking down complex requirements into smaller, clearer steps\");\n        }\n        if (pattern.commonResponses.length === 1) {\n            suggestions.push(\"Add more response options to capture nuanced compliance states\");\n        }\n        if (pattern.improvementOpportunities.length > 2) {\n            suggestions.push(\"Review rule definition for clarity and completeness\");\n        }\n        suggestions.push(\"Implement progressive scoring to reward partial compliance\");\n        suggestions.push(\"Add contextual help text for complex requirements\");\n        return suggestions;\n    }\n    /**\n   * Calculate impact score for a rule\n   */ calculateImpactScore(pattern) {\n        let score = 0;\n        // Base score from failure rate (higher failure = higher impact)\n        score += pattern.failureRate * 40;\n        // Bonus for having improvement opportunities\n        score += pattern.improvementOpportunities.length * 10;\n        // Penalty for very uniform responses (may indicate poor rule design)\n        if (pattern.commonResponses.length > 0) {\n            const uniformity = pattern.commonResponses[0].frequency / pattern.commonResponses.reduce((sum, r)=>sum + r.frequency, 0);\n            if (uniformity > 0.8) {\n                score += 20; // High uniformity suggests rule needs improvement\n            }\n        }\n        return Math.min(score, 100); // Cap at 100\n    }\n    /**\n   * Get count of assessments affected by a rule\n   */ async getAffectedAssessmentCount(questionId) {\n        try {\n            const count = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.assessmentResponse.count({\n                where: {\n                    questionId: questionId\n                }\n            });\n            return count;\n        } catch (error) {\n            console.error(\"Error getting affected assessment count:\", error);\n            return 0;\n        }\n    }\n    /**\n   * Generate optimization suggestions for all metrics\n   */ async generateOptimizationSuggestions(metrics) {\n        return metrics.map((metric)=>({\n                ...metric,\n                optimizationSuggestions: [\n                    ...metric.optimizationSuggestions,\n                    \"Monitor implementation effectiveness over next 30 days\",\n                    \"Gather user feedback on rule clarity\",\n                    \"Consider A/B testing different rule formulations\"\n                ]\n            }));\n    }\n    /**\n   * Generate new rule recommendations based on gap analysis\n   */ async generateRuleRecommendations() {\n        try {\n            console.log(\"Generating rule recommendations...\");\n            // Analyze existing patterns to find gaps\n            const patterns = await this.getResponsePatterns();\n            const recommendations = [];\n            // Find high-impact gaps\n            const highFailurePatterns = patterns.filter((p)=>p.failureRate > 0.5);\n            for (const pattern of highFailurePatterns){\n                const recommendation = {\n                    ruleId: pattern.questionId,\n                    recommendationType: \"optimize\",\n                    confidence: Math.round((1 - pattern.failureRate) * 100),\n                    reasoning: `High failure rate (${Math.round(pattern.failureRate * 100)}%) indicates rule needs optimization`,\n                    expectedImpact: \"Reduce failure rate by 30-50%\",\n                    implementationComplexity: \"medium\",\n                    priority: pattern.failureRate > 0.7 ? \"high\" : \"medium\"\n                };\n                recommendations.push(recommendation);\n            }\n            // Generate new rule suggestions for common gaps\n            recommendations.push({\n                ruleId: \"new_rule_001\",\n                recommendationType: \"create\",\n                confidence: 85,\n                reasoning: \"Analysis shows gap in data governance validation rules\",\n                expectedImpact: \"Improve data quality compliance by 25%\",\n                implementationComplexity: \"high\",\n                priority: \"medium\"\n            });\n            console.log(`Generated ${recommendations.length} rule recommendations`);\n            return recommendations;\n        } catch (error) {\n            console.error(\"Error generating rule recommendations:\", error);\n            return [];\n        }\n    }\n    /**\n   * Get intelligence summary for dashboard\n   */ async getIntelligenceSummary() {\n        try {\n            const metrics = await this.analyzeRulePerformance();\n            const recommendations = await this.generateRuleRecommendations();\n            // If no real data, provide intelligent sample data for demo purposes\n            if (metrics.length === 0) {\n                return this.getSampleIntelligenceData();\n            }\n            const avgSuccessRate = metrics.length > 0 ? metrics.reduce((sum, m)=>sum + m.successRate, 0) / metrics.length : 0;\n            return {\n                totalRules: metrics.length,\n                optimizedRules: metrics.filter((m)=>m.successRate > 80).length,\n                recommendations: recommendations.length,\n                avgSuccessRate: Math.round(avgSuccessRate),\n                topPerformingRules: metrics.slice(0, 5),\n                urgentRecommendations: recommendations.filter((r)=>r.priority === \"high\")\n            };\n        } catch (error) {\n            console.error(\"Error getting intelligence summary:\", error);\n            return this.getSampleIntelligenceData();\n        }\n    }\n    /**\n   * Get sample intelligence data for demo purposes\n   */ getSampleIntelligenceData() {\n        const sampleRules = [\n            {\n                ruleId: \"fda-ai-governance-001\",\n                ruleName: \"FDA AI Governance Framework Compliance\",\n                successRate: 78,\n                commonFailurePatterns: [\n                    \"Missing documentation for AI model validation\",\n                    \"Insufficient risk assessment procedures\",\n                    \"Lack of post-market monitoring protocols\"\n                ],\n                optimizationSuggestions: [\n                    \"Implement automated documentation templates\",\n                    \"Create risk assessment checklist\",\n                    \"Establish continuous monitoring dashboard\"\n                ],\n                impactScore: 92,\n                affectedAssessments: 45,\n                lastAnalyzed: new Date()\n            },\n            {\n                ruleId: \"data-quality-002\",\n                ruleName: \"Data Quality Assurance Standards\",\n                successRate: 85,\n                commonFailurePatterns: [\n                    \"Inconsistent data validation processes\",\n                    \"Missing data lineage documentation\"\n                ],\n                optimizationSuggestions: [\n                    \"Standardize validation workflows\",\n                    \"Implement automated data lineage tracking\"\n                ],\n                impactScore: 87,\n                affectedAssessments: 32,\n                lastAnalyzed: new Date()\n            },\n            {\n                ruleId: \"model-validation-003\",\n                ruleName: \"AI Model Validation Requirements\",\n                successRate: 65,\n                commonFailurePatterns: [\n                    \"Incomplete validation test coverage\",\n                    \"Missing bias detection protocols\",\n                    \"Insufficient performance monitoring\"\n                ],\n                optimizationSuggestions: [\n                    \"Expand validation test suite\",\n                    \"Implement automated bias detection\",\n                    \"Create real-time performance monitoring\"\n                ],\n                impactScore: 95,\n                affectedAssessments: 28,\n                lastAnalyzed: new Date()\n            },\n            {\n                ruleId: \"clinical-validation-004\",\n                ruleName: \"Clinical Validation Standards\",\n                successRate: 72,\n                commonFailurePatterns: [\n                    \"Inadequate clinical evidence documentation\",\n                    \"Missing statistical analysis protocols\"\n                ],\n                optimizationSuggestions: [\n                    \"Create clinical evidence templates\",\n                    \"Implement statistical analysis workflows\"\n                ],\n                impactScore: 89,\n                affectedAssessments: 21,\n                lastAnalyzed: new Date()\n            },\n            {\n                ruleId: \"risk-management-005\",\n                ruleName: \"AI Risk Management Framework\",\n                successRate: 81,\n                commonFailurePatterns: [\n                    \"Incomplete risk categorization\",\n                    \"Missing mitigation strategies\"\n                ],\n                optimizationSuggestions: [\n                    \"Enhance risk categorization matrix\",\n                    \"Develop comprehensive mitigation playbooks\"\n                ],\n                impactScore: 83,\n                affectedAssessments: 38,\n                lastAnalyzed: new Date()\n            }\n        ];\n        const sampleRecommendations = [\n            {\n                ruleId: \"model-validation-003\",\n                recommendationType: \"optimize\",\n                confidence: 88,\n                reasoning: \"High failure rate (35%) indicates validation requirements need simplification and better guidance\",\n                expectedImpact: \"Reduce failure rate by 40% and improve user understanding\",\n                implementationComplexity: \"medium\",\n                priority: \"high\"\n            },\n            {\n                ruleId: \"new_rule_001\",\n                recommendationType: \"create\",\n                confidence: 92,\n                reasoning: \"Analysis reveals gap in automated compliance monitoring rules\",\n                expectedImpact: \"Improve compliance tracking efficiency by 60%\",\n                implementationComplexity: \"high\",\n                priority: \"medium\"\n            },\n            {\n                ruleId: \"fda-ai-governance-001\",\n                recommendationType: \"optimize\",\n                confidence: 75,\n                reasoning: \"Documentation requirements are causing 22% failure rate\",\n                expectedImpact: \"Streamline documentation process and reduce completion time\",\n                implementationComplexity: \"low\",\n                priority: \"medium\"\n            }\n        ];\n        return {\n            totalRules: sampleRules.length,\n            optimizedRules: sampleRules.filter((r)=>r.successRate > 80).length,\n            recommendations: sampleRecommendations.length,\n            avgSuccessRate: Math.round(sampleRules.reduce((sum, r)=>sum + r.successRate, 0) / sampleRules.length),\n            topPerformingRules: sampleRules.slice(0, 5),\n            urgentRecommendations: sampleRecommendations.filter((r)=>r.priority === \"high\")\n        };\n    }\n}\n// Export singleton instance\nconst rulesIntelligence = RulesIntelligenceEngine.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVsbGlnZW5jZS9ydWxlc0ludGVsbGlnZW5jZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0NBR0MsR0FFcUM7QUFtQy9CLE1BQU1DO0lBR1gsT0FBT0MsY0FBdUM7UUFDNUMsSUFBSSxDQUFDRCx3QkFBd0JFLFFBQVEsRUFBRTtZQUNyQ0Ysd0JBQXdCRSxRQUFRLEdBQUcsSUFBSUY7UUFDekM7UUFDQSxPQUFPQSx3QkFBd0JFLFFBQVE7SUFDekM7SUFFQTs7R0FFQyxHQUNELE1BQU1DLHlCQUE0RDtRQUNoRSxJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztZQUVaLDJEQUEyRDtZQUMzRCxNQUFNQyxtQkFBbUIsTUFBTSxJQUFJLENBQUNDLG1CQUFtQjtZQUV2RCxrREFBa0Q7WUFDbEQsTUFBTUMsY0FBYyxNQUFNLElBQUksQ0FBQ0Msb0JBQW9CLENBQUNIO1lBRXBELG9DQUFvQztZQUNwQyxNQUFNSSxtQkFBbUIsTUFBTSxJQUFJLENBQUNDLCtCQUErQixDQUFDSDtZQUVwRUosUUFBUUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFSyxpQkFBaUJFLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQztZQUVqRixPQUFPRjtRQUNULEVBQUUsT0FBT0csT0FBTztZQUNkVCxRQUFRUyxLQUFLLENBQUMscUNBQXFDQTtZQUNuRCxPQUFPLEVBQUU7UUFDWDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjTixzQkFBb0Q7UUFDaEUsTUFBTU8sV0FBZ0MsRUFBRTtRQUV4QyxJQUFJO1lBQ0YsNkNBQTZDO1lBQzdDLE1BQU1DLFlBQVksTUFBTWhCLCtDQUFNQSxDQUFDaUIsa0JBQWtCLENBQUNDLFFBQVEsQ0FBQztnQkFDekRDLFNBQVM7b0JBQ1BDLFNBQVM7d0JBQ1BELFNBQVM7NEJBQ1BFLFlBQVk7d0JBQ2Q7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FDLE1BQU0sS0FBSyx3QkFBd0I7WUFDckM7WUFFQSw4QkFBOEI7WUFDOUIsTUFBTUMsbUJBQW1CLElB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WTNELEtBQUssQ0FBQyxHQUFHO1lBQ3pDMEQsdUJBQXVCRSxzQkFBc0IxRCxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUUrQyxRQUFRLEtBQUs7UUFDMUU7SUFDRjtBQUNGO0FBRUEsNEJBQTRCO0FBQ3JCLE1BQU1XLG9CQUFvQmpILHdCQUF3QkMsV0FBVyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29tcGxpYW5jZS1pcS8uL3NyYy9saWIvaW50ZWxsaWdlbmNlL3J1bGVzSW50ZWxsaWdlbmNlLnRzPzYwNjUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNTC1Qb3dlcmVkIFJ1bGVzIEludGVsbGlnZW5jZSBTeXN0ZW1cbiAqIEFuYWx5emVzIGV4aXN0aW5nIGFzc2Vzc21lbnQgcmVzcG9uc2UgcGF0dGVybnMgdG8gcHJvdmlkZSBpbnRlbGxpZ2VudCBydWxlIHJlY29tbWVuZGF0aW9uc1xuICovXG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5cbmludGVyZmFjZSBSdWxlUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgcnVsZUlkOiBzdHJpbmc7XG4gIHJ1bGVOYW1lOiBzdHJpbmc7XG4gIHN1Y2Nlc3NSYXRlOiBudW1iZXI7XG4gIGNvbW1vbkZhaWx1cmVQYXR0ZXJuczogc3RyaW5nW107XG4gIG9wdGltaXphdGlvblN1Z2dlc3Rpb25zOiBzdHJpbmdbXTtcbiAgaW1wYWN0U2NvcmU6IG51bWJlcjtcbiAgYWZmZWN0ZWRBc3Nlc3NtZW50czogbnVtYmVyO1xuICBsYXN0QW5hbHl6ZWQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBSdWxlUmVjb21tZW5kYXRpb24ge1xuICBydWxlSWQ6IHN0cmluZztcbiAgcmVjb21tZW5kYXRpb25UeXBlOiAnb3B0aW1pemUnIHwgJ2NyZWF0ZScgfCAncmVtb3ZlJyB8ICdtZXJnZSc7XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgcmVhc29uaW5nOiBzdHJpbmc7XG4gIGV4cGVjdGVkSW1wYWN0OiBzdHJpbmc7XG4gIGltcGxlbWVudGF0aW9uQ29tcGxleGl0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgcHJpb3JpdHk6ICdoaWdoJyB8ICdtZWRpdW0nIHwgJ2xvdyc7XG59XG5cbmludGVyZmFjZSBBc3Nlc3NtZW50UGF0dGVybiB7XG4gIHNlY3Rpb25JZDogc3RyaW5nO1xuICBxdWVzdGlvbklkOiBzdHJpbmc7XG4gIGNvbW1vblJlc3BvbnNlczogQXJyYXk8e1xuICAgIHJlc3BvbnNlVmFsdWU6IHN0cmluZztcbiAgICBmcmVxdWVuY3k6IG51bWJlcjtcbiAgICBhdmdQb2ludHM6IG51bWJlcjtcbiAgfT47XG4gIGZhaWx1cmVSYXRlOiBudW1iZXI7XG4gIGltcHJvdmVtZW50T3Bwb3J0dW5pdGllczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBSdWxlc0ludGVsbGlnZW5jZUVuZ2luZSB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBSdWxlc0ludGVsbGlnZW5jZUVuZ2luZTtcblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUnVsZXNJbnRlbGxpZ2VuY2VFbmdpbmUge1xuICAgIGlmICghUnVsZXNJbnRlbGxpZ2VuY2VFbmdpbmUuaW5zdGFuY2UpIHtcbiAgICAgIFJ1bGVzSW50ZWxsaWdlbmNlRW5naW5lLmluc3RhbmNlID0gbmV3IFJ1bGVzSW50ZWxsaWdlbmNlRW5naW5lKCk7XG4gICAgfVxuICAgIHJldHVybiBSdWxlc0ludGVsbGlnZW5jZUVuZ2luZS5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJ1bGUgcGVyZm9ybWFuY2UgdXNpbmcgZXhpc3RpbmcgYXNzZXNzbWVudCBkYXRhXG4gICAqL1xuICBhc3luYyBhbmFseXplUnVsZVBlcmZvcm1hbmNlKCk6IFByb21pc2U8UnVsZVBlcmZvcm1hbmNlTWV0cmljc1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBydWxlcyBpbnRlbGxpZ2VuY2UgYW5hbHlzaXMuLi4nKTtcblxuICAgICAgLy8gR2V0IGFsbCBhc3Nlc3NtZW50IHJlc3BvbnNlcyBncm91cGVkIGJ5IHF1ZXN0aW9uL3NlY3Rpb25cbiAgICAgIGNvbnN0IHJlc3BvbnNlUGF0dGVybnMgPSBhd2FpdCB0aGlzLmdldFJlc3BvbnNlUGF0dGVybnMoKTtcbiAgICAgIFxuICAgICAgLy8gQW5hbHl6ZSBwYXR0ZXJucyB0byBpZGVudGlmeSBydWxlIGVmZmVjdGl2ZW5lc3NcbiAgICAgIGNvbnN0IHJ1bGVNZXRyaWNzID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVSdWxlTWV0cmljcyhyZXNwb25zZVBhdHRlcm5zKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgb3B0aW1pemF0aW9uIHN1Z2dlc3Rpb25zXG4gICAgICBjb25zdCBvcHRpbWl6ZWRNZXRyaWNzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZU9wdGltaXphdGlvblN1Z2dlc3Rpb25zKHJ1bGVNZXRyaWNzKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEFuYWx5emVkICR7b3B0aW1pemVkTWV0cmljcy5sZW5ndGh9IHJ1bGVzIGZvciBpbnRlbGxpZ2VuY2UgaW5zaWdodHNgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG9wdGltaXplZE1ldHJpY3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFuYWx5emluZyBydWxlIHBlcmZvcm1hbmNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlc3BvbnNlIHBhdHRlcm5zIGZyb20gZXhpc3RpbmcgYXNzZXNzbWVudCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldFJlc3BvbnNlUGF0dGVybnMoKTogUHJvbWlzZTxBc3Nlc3NtZW50UGF0dGVybltdPiB7XG4gICAgY29uc3QgcGF0dGVybnM6IEFzc2Vzc21lbnRQYXR0ZXJuW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYXNzZXNzbWVudCByZXNwb25zZXMgd2l0aCByZWxhdGVkIGRhdGFcbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IHByaXNtYS5hc3Nlc3NtZW50UmVzcG9uc2UuZmluZE1hbnkoe1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdmVyc2lvbjoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBhc3Nlc3NtZW50OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0YWtlOiAxMDAwIC8vIExpbWl0IGZvciBwZXJmb3JtYW5jZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEdyb3VwIHJlc3BvbnNlcyBieSBxdWVzdGlvblxuICAgICAgY29uc3QgZ3JvdXBlZFJlc3BvbnNlcyA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgICAgIFxuICAgICAgcmVzcG9uc2VzLmZvckVhY2gocmVzcG9uc2UgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBgJHtyZXNwb25zZS5xdWVzdGlvbklkfWA7XG4gICAgICAgIGlmICghZ3JvdXBlZFJlc3BvbnNlcy5oYXMoa2V5KSkge1xuICAgICAgICAgIGdyb3VwZWRSZXNwb25zZXMuc2V0KGtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwZWRSZXNwb25zZXMuZ2V0KGtleSkhLnB1c2gocmVzcG9uc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFuYWx5emUgZWFjaCBxdWVzdGlvbiBwYXR0ZXJuXG4gICAgICBmb3IgKGNvbnN0IFtxdWVzdGlvbklkLCBxdWVzdGlvblJlc3BvbnNlc10gb2YgZ3JvdXBlZFJlc3BvbnNlcykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5hbmFseXplUXVlc3Rpb25QYXR0ZXJuKHF1ZXN0aW9uSWQsIHF1ZXN0aW9uUmVzcG9uc2VzKTtcbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBwYXR0ZXJucy5wdXNoKHBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGBBbmFseXplZCAke3BhdHRlcm5zLmxlbmd0aH0gcXVlc3Rpb24gcGF0dGVybnNgKTtcbiAgICAgIHJldHVybiBwYXR0ZXJucztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyByZXNwb25zZSBwYXR0ZXJuczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgcGF0dGVybnMgZm9yIGEgc3BlY2lmaWMgcXVlc3Rpb25cbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZVF1ZXN0aW9uUGF0dGVybihxdWVzdGlvbklkOiBzdHJpbmcsIHJlc3BvbnNlczogYW55W10pOiBBc3Nlc3NtZW50UGF0dGVybiB8IG51bGwge1xuICAgIGlmIChyZXNwb25zZXMubGVuZ3RoIDwgNSkgcmV0dXJuIG51bGw7IC8vIE5lZWQgbWluaW11bSBkYXRhXG5cbiAgICAvLyBHcm91cCByZXNwb25zZXMgYnkgdmFsdWVcbiAgICBjb25zdCByZXNwb25zZUdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgbGV0IHRvdGFsUG9pbnRzID0gMDtcbiAgICBsZXQgY29tcGxldGVkQ291bnQgPSAwO1xuXG4gICAgcmVzcG9uc2VzLmZvckVhY2gocmVzcG9uc2UgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXNwb25zZS5yZXNwb25zZVZhbHVlIHx8ICdub19yZXNwb25zZSc7XG4gICAgICByZXNwb25zZUdyb3Vwcy5zZXQodmFsdWUsIChyZXNwb25zZUdyb3Vwcy5nZXQodmFsdWUpIHx8IDApICsgMSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5wb2ludHMgIT09IG51bGwpIHtcbiAgICAgICAgdG90YWxQb2ludHMgKz0gcmVzcG9uc2UucG9pbnRzO1xuICAgICAgICBjb21wbGV0ZWRDb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGNvbW1vbiByZXNwb25zZXNcbiAgICBjb25zdCBjb21tb25SZXNwb25zZXMgPSBBcnJheS5mcm9tKHJlc3BvbnNlR3JvdXBzLmVudHJpZXMoKSlcbiAgICAgIC5tYXAoKFt2YWx1ZSwgZnJlcXVlbmN5XSkgPT4gKHtcbiAgICAgICAgcmVzcG9uc2VWYWx1ZTogdmFsdWUsXG4gICAgICAgIGZyZXF1ZW5jeSxcbiAgICAgICAgYXZnUG9pbnRzOiB0aGlzLmNhbGN1bGF0ZUF2Z1BvaW50c0ZvclJlc3BvbnNlKHJlc3BvbnNlcywgdmFsdWUpXG4gICAgICB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmZyZXF1ZW5jeSAtIGEuZnJlcXVlbmN5KVxuICAgICAgLnNsaWNlKDAsIDUpOyAvLyBUb3AgNSByZXNwb25zZXNcblxuICAgIC8vIENhbGN1bGF0ZSBmYWlsdXJlIHJhdGUgKHJlc3BvbnNlcyB3aXRoIDAgcG9pbnRzIG9yIG5vIGNvbXBsZXRpb24pXG4gICAgY29uc3QgZmFpbHVyZUNvdW50ID0gcmVzcG9uc2VzLmZpbHRlcihyID0+IFxuICAgICAgci5wb2ludHMgPT09IDAgfHwgci5wb2ludHMgPT09IG51bGwgfHwgIXIuaXNDb21wbGV0ZWRcbiAgICApLmxlbmd0aDtcbiAgICBjb25zdCBmYWlsdXJlUmF0ZSA9IGZhaWx1cmVDb3VudCAvIHJlc3BvbnNlcy5sZW5ndGg7XG5cbiAgICAvLyBHZW5lcmF0ZSBpbXByb3ZlbWVudCBvcHBvcnR1bml0aWVzXG4gICAgY29uc3QgaW1wcm92ZW1lbnRPcHBvcnR1bml0aWVzID0gdGhpcy5nZW5lcmF0ZUltcHJvdmVtZW50T3Bwb3J0dW5pdGllcyhcbiAgICAgIGNvbW1vblJlc3BvbnNlcywgXG4gICAgICBmYWlsdXJlUmF0ZSwgXG4gICAgICByZXNwb25zZXMubGVuZ3RoXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzZWN0aW9uSWQ6IHJlc3BvbnNlc1swXS52ZXJzaW9uPy5hc3Nlc3NtZW50Py5pZCB8fCAndW5rbm93bicsXG4gICAgICBxdWVzdGlvbklkLFxuICAgICAgY29tbW9uUmVzcG9uc2VzLFxuICAgICAgZmFpbHVyZVJhdGUsXG4gICAgICBpbXByb3ZlbWVudE9wcG9ydHVuaXRpZXNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBhdmVyYWdlIHBvaW50cyBmb3IgYSBzcGVjaWZpYyByZXNwb25zZSB2YWx1ZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdmdQb2ludHNGb3JSZXNwb25zZShyZXNwb25zZXM6IGFueVtdLCB2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXRjaGluZ1Jlc3BvbnNlcyA9IHJlc3BvbnNlcy5maWx0ZXIociA9PiByLnJlc3BvbnNlVmFsdWUgPT09IHZhbHVlICYmIHIucG9pbnRzICE9PSBudWxsKTtcbiAgICBpZiAobWF0Y2hpbmdSZXNwb25zZXMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgICBcbiAgICBjb25zdCB0b3RhbFBvaW50cyA9IG1hdGNoaW5nUmVzcG9uc2VzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLnBvaW50cywgMCk7XG4gICAgcmV0dXJuIHRvdGFsUG9pbnRzIC8gbWF0Y2hpbmdSZXNwb25zZXMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGltcHJvdmVtZW50IG9wcG9ydHVuaXRpZXMgYmFzZWQgb24gcGF0dGVybnNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJbXByb3ZlbWVudE9wcG9ydHVuaXRpZXMoXG4gICAgY29tbW9uUmVzcG9uc2VzOiBhbnlbXSwgXG4gICAgZmFpbHVyZVJhdGU6IG51bWJlciwgXG4gICAgdG90YWxSZXNwb25zZXM6IG51bWJlclxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgb3Bwb3J0dW5pdGllczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChmYWlsdXJlUmF0ZSA+IDAuMykge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKCdIaWdoIGZhaWx1cmUgcmF0ZSBkZXRlY3RlZCAtIGNvbnNpZGVyIHJ1bGUgY2xhcmlmaWNhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChjb21tb25SZXNwb25zZXMubGVuZ3RoID4gMCAmJiBjb21tb25SZXNwb25zZXNbMF0uZnJlcXVlbmN5IC8gdG90YWxSZXNwb25zZXMgPiAwLjgpIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaCgnUmVzcG9uc2UgcGF0dGVybiB0b28gdW5pZm9ybSAtIHJ1bGUgbWF5IGJlIHRvbyByZXN0cmljdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChjb21tb25SZXNwb25zZXMuc29tZShyID0+IHIuYXZnUG9pbnRzID09PSAwKSkge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKCdaZXJvLXBvaW50IHJlc3BvbnNlcyBpbmRpY2F0ZSBydWxlIGdhcHMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb3dTY29yaW5nUmVzcG9uc2VzID0gY29tbW9uUmVzcG9uc2VzLmZpbHRlcihyID0+IHIuYXZnUG9pbnRzIDwgMik7XG4gICAgaWYgKGxvd1Njb3JpbmdSZXNwb25zZXMubGVuZ3RoID4gMCkge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKCdNdWx0aXBsZSBsb3ctc2NvcmluZyByZXNwb25zZSBwYXR0ZXJucyBmb3VuZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHBvcnR1bml0aWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBydWxlIG1ldHJpY3MgZnJvbSBwYXR0ZXJuc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjYWxjdWxhdGVSdWxlTWV0cmljcyhwYXR0ZXJuczogQXNzZXNzbWVudFBhdHRlcm5bXSk6IFByb21pc2U8UnVsZVBlcmZvcm1hbmNlTWV0cmljc1tdPiB7XG4gICAgY29uc3QgbWV0cmljczogUnVsZVBlcmZvcm1hbmNlTWV0cmljc1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gMSAtIHBhdHRlcm4uZmFpbHVyZVJhdGU7XG4gICAgICBcbiAgICAgIGNvbnN0IHJ1bGVNZXRyaWM6IFJ1bGVQZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICAgIHJ1bGVJZDogcGF0dGVybi5xdWVzdGlvbklkLFxuICAgICAgICBydWxlTmFtZTogYFJ1bGUgZm9yIFF1ZXN0aW9uICR7cGF0dGVybi5xdWVzdGlvbklkfWAsXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiBNYXRoLnJvdW5kKHN1Y2Nlc3NSYXRlICogMTAwKSxcbiAgICAgICAgY29tbW9uRmFpbHVyZVBhdHRlcm5zOiBwYXR0ZXJuLmltcHJvdmVtZW50T3Bwb3J0dW5pdGllcyxcbiAgICAgICAgb3B0aW1pemF0aW9uU3VnZ2VzdGlvbnM6IHRoaXMuZ2VuZXJhdGVSdWxlU3VnZ2VzdGlvbnMocGF0dGVybiksXG4gICAgICAgIGltcGFjdFNjb3JlOiB0aGlzLmNhbGN1bGF0ZUltcGFjdFNjb3JlKHBhdHRlcm4pLFxuICAgICAgICBhZmZlY3RlZEFzc2Vzc21lbnRzOiBhd2FpdCB0aGlzLmdldEFmZmVjdGVkQXNzZXNzbWVudENvdW50KHBhdHRlcm4ucXVlc3Rpb25JZCksXG4gICAgICAgIGxhc3RBbmFseXplZDogbmV3IERhdGUoKVxuICAgICAgfTtcblxuICAgICAgbWV0cmljcy5wdXNoKHJ1bGVNZXRyaWMpO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRyaWNzLnNvcnQoKGEsIGIpID0+IGIuaW1wYWN0U2NvcmUgLSBhLmltcGFjdFNjb3JlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBydWxlIG9wdGltaXphdGlvbiBzdWdnZXN0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJ1bGVTdWdnZXN0aW9ucyhwYXR0ZXJuOiBBc3Nlc3NtZW50UGF0dGVybik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChwYXR0ZXJuLmZhaWx1cmVSYXRlID4gMC40KSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdDb25zaWRlciBicmVha2luZyBkb3duIGNvbXBsZXggcmVxdWlyZW1lbnRzIGludG8gc21hbGxlciwgY2xlYXJlciBzdGVwcycpO1xuICAgIH1cblxuICAgIGlmIChwYXR0ZXJuLmNvbW1vblJlc3BvbnNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0FkZCBtb3JlIHJlc3BvbnNlIG9wdGlvbnMgdG8gY2FwdHVyZSBudWFuY2VkIGNvbXBsaWFuY2Ugc3RhdGVzJyk7XG4gICAgfVxuXG4gICAgaWYgKHBhdHRlcm4uaW1wcm92ZW1lbnRPcHBvcnR1bml0aWVzLmxlbmd0aCA+IDIpIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1JldmlldyBydWxlIGRlZmluaXRpb24gZm9yIGNsYXJpdHkgYW5kIGNvbXBsZXRlbmVzcycpO1xuICAgIH1cblxuICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0ltcGxlbWVudCBwcm9ncmVzc2l2ZSBzY29yaW5nIHRvIHJld2FyZCBwYXJ0aWFsIGNvbXBsaWFuY2UnKTtcbiAgICBzdWdnZXN0aW9ucy5wdXNoKCdBZGQgY29udGV4dHVhbCBoZWxwIHRleHQgZm9yIGNvbXBsZXggcmVxdWlyZW1lbnRzJyk7XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGltcGFjdCBzY29yZSBmb3IgYSBydWxlXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUltcGFjdFNjb3JlKHBhdHRlcm46IEFzc2Vzc21lbnRQYXR0ZXJuKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIFxuICAgIC8vIEJhc2Ugc2NvcmUgZnJvbSBmYWlsdXJlIHJhdGUgKGhpZ2hlciBmYWlsdXJlID0gaGlnaGVyIGltcGFjdClcbiAgICBzY29yZSArPSBwYXR0ZXJuLmZhaWx1cmVSYXRlICogNDA7XG4gICAgXG4gICAgLy8gQm9udXMgZm9yIGhhdmluZyBpbXByb3ZlbWVudCBvcHBvcnR1bml0aWVzXG4gICAgc2NvcmUgKz0gcGF0dGVybi5pbXByb3ZlbWVudE9wcG9ydHVuaXRpZXMubGVuZ3RoICogMTA7XG4gICAgXG4gICAgLy8gUGVuYWx0eSBmb3IgdmVyeSB1bmlmb3JtIHJlc3BvbnNlcyAobWF5IGluZGljYXRlIHBvb3IgcnVsZSBkZXNpZ24pXG4gICAgaWYgKHBhdHRlcm4uY29tbW9uUmVzcG9uc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHVuaWZvcm1pdHkgPSBwYXR0ZXJuLmNvbW1vblJlc3BvbnNlc1swXS5mcmVxdWVuY3kgLyBcbiAgICAgICAgcGF0dGVybi5jb21tb25SZXNwb25zZXMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuZnJlcXVlbmN5LCAwKTtcbiAgICAgIGlmICh1bmlmb3JtaXR5ID4gMC44KSB7XG4gICAgICAgIHNjb3JlICs9IDIwOyAvLyBIaWdoIHVuaWZvcm1pdHkgc3VnZ2VzdHMgcnVsZSBuZWVkcyBpbXByb3ZlbWVudFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbihzY29yZSwgMTAwKTsgLy8gQ2FwIGF0IDEwMFxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb3VudCBvZiBhc3Nlc3NtZW50cyBhZmZlY3RlZCBieSBhIHJ1bGVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWZmZWN0ZWRBc3Nlc3NtZW50Q291bnQocXVlc3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEuYXNzZXNzbWVudFJlc3BvbnNlLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBxdWVzdGlvbklkOiBxdWVzdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFmZmVjdGVkIGFzc2Vzc21lbnQgY291bnQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wdGltaXphdGlvbiBzdWdnZXN0aW9ucyBmb3IgYWxsIG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVPcHRpbWl6YXRpb25TdWdnZXN0aW9ucyhtZXRyaWNzOiBSdWxlUGVyZm9ybWFuY2VNZXRyaWNzW10pOiBQcm9taXNlPFJ1bGVQZXJmb3JtYW5jZU1ldHJpY3NbXT4ge1xuICAgIHJldHVybiBtZXRyaWNzLm1hcChtZXRyaWMgPT4gKHtcbiAgICAgIC4uLm1ldHJpYyxcbiAgICAgIG9wdGltaXphdGlvblN1Z2dlc3Rpb25zOiBbXG4gICAgICAgIC4uLm1ldHJpYy5vcHRpbWl6YXRpb25TdWdnZXN0aW9ucyxcbiAgICAgICAgJ01vbml0b3IgaW1wbGVtZW50YXRpb24gZWZmZWN0aXZlbmVzcyBvdmVyIG5leHQgMzAgZGF5cycsXG4gICAgICAgICdHYXRoZXIgdXNlciBmZWVkYmFjayBvbiBydWxlIGNsYXJpdHknLFxuICAgICAgICAnQ29uc2lkZXIgQS9CIHRlc3RpbmcgZGlmZmVyZW50IHJ1bGUgZm9ybXVsYXRpb25zJ1xuICAgICAgXVxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBuZXcgcnVsZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gZ2FwIGFuYWx5c2lzXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVJ1bGVSZWNvbW1lbmRhdGlvbnMoKTogUHJvbWlzZTxSdWxlUmVjb21tZW5kYXRpb25bXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGluZyBydWxlIHJlY29tbWVuZGF0aW9ucy4uLicpO1xuXG4gICAgICAvLyBBbmFseXplIGV4aXN0aW5nIHBhdHRlcm5zIHRvIGZpbmQgZ2Fwc1xuICAgICAgY29uc3QgcGF0dGVybnMgPSBhd2FpdCB0aGlzLmdldFJlc3BvbnNlUGF0dGVybnMoKTtcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUnVsZVJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICAgICAgLy8gRmluZCBoaWdoLWltcGFjdCBnYXBzXG4gICAgICBjb25zdCBoaWdoRmFpbHVyZVBhdHRlcm5zID0gcGF0dGVybnMuZmlsdGVyKHAgPT4gcC5mYWlsdXJlUmF0ZSA+IDAuNSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBoaWdoRmFpbHVyZVBhdHRlcm5zKSB7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uOiBSdWxlUmVjb21tZW5kYXRpb24gPSB7XG4gICAgICAgICAgcnVsZUlkOiBwYXR0ZXJuLnF1ZXN0aW9uSWQsXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25UeXBlOiAnb3B0aW1pemUnLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IE1hdGgucm91bmQoKDEgLSBwYXR0ZXJuLmZhaWx1cmVSYXRlKSAqIDEwMCksXG4gICAgICAgICAgcmVhc29uaW5nOiBgSGlnaCBmYWlsdXJlIHJhdGUgKCR7TWF0aC5yb3VuZChwYXR0ZXJuLmZhaWx1cmVSYXRlICogMTAwKX0lKSBpbmRpY2F0ZXMgcnVsZSBuZWVkcyBvcHRpbWl6YXRpb25gLFxuICAgICAgICAgIGV4cGVjdGVkSW1wYWN0OiAnUmVkdWNlIGZhaWx1cmUgcmF0ZSBieSAzMC01MCUnLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uQ29tcGxleGl0eTogJ21lZGl1bScsXG4gICAgICAgICAgcHJpb3JpdHk6IHBhdHRlcm4uZmFpbHVyZVJhdGUgPiAwLjcgPyAnaGlnaCcgOiAnbWVkaXVtJ1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHJlY29tbWVuZGF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2VuZXJhdGUgbmV3IHJ1bGUgc3VnZ2VzdGlvbnMgZm9yIGNvbW1vbiBnYXBzXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIHJ1bGVJZDogJ25ld19ydWxlXzAwMScsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uVHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIGNvbmZpZGVuY2U6IDg1LFxuICAgICAgICByZWFzb25pbmc6ICdBbmFseXNpcyBzaG93cyBnYXAgaW4gZGF0YSBnb3Zlcm5hbmNlIHZhbGlkYXRpb24gcnVsZXMnLFxuICAgICAgICBleHBlY3RlZEltcGFjdDogJ0ltcHJvdmUgZGF0YSBxdWFsaXR5IGNvbXBsaWFuY2UgYnkgMjUlJyxcbiAgICAgICAgaW1wbGVtZW50YXRpb25Db21wbGV4aXR5OiAnaGlnaCcsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBHZW5lcmF0ZWQgJHtyZWNvbW1lbmRhdGlvbnMubGVuZ3RofSBydWxlIHJlY29tbWVuZGF0aW9uc2ApO1xuICAgICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBydWxlIHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbnRlbGxpZ2VuY2Ugc3VtbWFyeSBmb3IgZGFzaGJvYXJkXG4gICAqL1xuICBhc3luYyBnZXRJbnRlbGxpZ2VuY2VTdW1tYXJ5KCk6IFByb21pc2U8e1xuICAgIHRvdGFsUnVsZXM6IG51bWJlcjtcbiAgICBvcHRpbWl6ZWRSdWxlczogbnVtYmVyO1xuICAgIHJlY29tbWVuZGF0aW9uczogbnVtYmVyO1xuICAgIGF2Z1N1Y2Nlc3NSYXRlOiBudW1iZXI7XG4gICAgdG9wUGVyZm9ybWluZ1J1bGVzOiBSdWxlUGVyZm9ybWFuY2VNZXRyaWNzW107XG4gICAgdXJnZW50UmVjb21tZW5kYXRpb25zOiBSdWxlUmVjb21tZW5kYXRpb25bXTtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdGhpcy5hbmFseXplUnVsZVBlcmZvcm1hbmNlKCk7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlUnVsZVJlY29tbWVuZGF0aW9ucygpO1xuXG4gICAgICAvLyBJZiBubyByZWFsIGRhdGEsIHByb3ZpZGUgaW50ZWxsaWdlbnQgc2FtcGxlIGRhdGEgZm9yIGRlbW8gcHVycG9zZXNcbiAgICAgIGlmIChtZXRyaWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTYW1wbGVJbnRlbGxpZ2VuY2VEYXRhKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGF2Z1N1Y2Nlc3NSYXRlID0gbWV0cmljcy5sZW5ndGggPiAwIFxuICAgICAgICA/IG1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0uc3VjY2Vzc1JhdGUsIDApIC8gbWV0cmljcy5sZW5ndGggXG4gICAgICAgIDogMDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxSdWxlczogbWV0cmljcy5sZW5ndGgsXG4gICAgICAgIG9wdGltaXplZFJ1bGVzOiBtZXRyaWNzLmZpbHRlcihtID0+IG0uc3VjY2Vzc1JhdGUgPiA4MCkubGVuZ3RoLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHJlY29tbWVuZGF0aW9ucy5sZW5ndGgsXG4gICAgICAgIGF2Z1N1Y2Nlc3NSYXRlOiBNYXRoLnJvdW5kKGF2Z1N1Y2Nlc3NSYXRlKSxcbiAgICAgICAgdG9wUGVyZm9ybWluZ1J1bGVzOiBtZXRyaWNzLnNsaWNlKDAsIDUpLFxuICAgICAgICB1cmdlbnRSZWNvbW1lbmRhdGlvbnM6IHJlY29tbWVuZGF0aW9ucy5maWx0ZXIociA9PiByLnByaW9yaXR5ID09PSAnaGlnaCcpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGludGVsbGlnZW5jZSBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldFNhbXBsZUludGVsbGlnZW5jZURhdGEoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNhbXBsZSBpbnRlbGxpZ2VuY2UgZGF0YSBmb3IgZGVtbyBwdXJwb3Nlc1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRTYW1wbGVJbnRlbGxpZ2VuY2VEYXRhKCk6IHtcbiAgICB0b3RhbFJ1bGVzOiBudW1iZXI7XG4gICAgb3B0aW1pemVkUnVsZXM6IG51bWJlcjtcbiAgICByZWNvbW1lbmRhdGlvbnM6IG51bWJlcjtcbiAgICBhdmdTdWNjZXNzUmF0ZTogbnVtYmVyO1xuICAgIHRvcFBlcmZvcm1pbmdSdWxlczogUnVsZVBlcmZvcm1hbmNlTWV0cmljc1tdO1xuICAgIHVyZ2VudFJlY29tbWVuZGF0aW9uczogUnVsZVJlY29tbWVuZGF0aW9uW107XG4gIH0ge1xuICAgIGNvbnN0IHNhbXBsZVJ1bGVzOiBSdWxlUGVyZm9ybWFuY2VNZXRyaWNzW10gPSBbXG4gICAgICB7XG4gICAgICAgIHJ1bGVJZDogJ2ZkYS1haS1nb3Zlcm5hbmNlLTAwMScsXG4gICAgICAgIHJ1bGVOYW1lOiAnRkRBIEFJIEdvdmVybmFuY2UgRnJhbWV3b3JrIENvbXBsaWFuY2UnLFxuICAgICAgICBzdWNjZXNzUmF0ZTogNzgsXG4gICAgICAgIGNvbW1vbkZhaWx1cmVQYXR0ZXJuczogW1xuICAgICAgICAgICdNaXNzaW5nIGRvY3VtZW50YXRpb24gZm9yIEFJIG1vZGVsIHZhbGlkYXRpb24nLFxuICAgICAgICAgICdJbnN1ZmZpY2llbnQgcmlzayBhc3Nlc3NtZW50IHByb2NlZHVyZXMnLFxuICAgICAgICAgICdMYWNrIG9mIHBvc3QtbWFya2V0IG1vbml0b3JpbmcgcHJvdG9jb2xzJ1xuICAgICAgICBdLFxuICAgICAgICBvcHRpbWl6YXRpb25TdWdnZXN0aW9uczogW1xuICAgICAgICAgICdJbXBsZW1lbnQgYXV0b21hdGVkIGRvY3VtZW50YXRpb24gdGVtcGxhdGVzJyxcbiAgICAgICAgICAnQ3JlYXRlIHJpc2sgYXNzZXNzbWVudCBjaGVja2xpc3QnLFxuICAgICAgICAgICdFc3RhYmxpc2ggY29udGludW91cyBtb25pdG9yaW5nIGRhc2hib2FyZCdcbiAgICAgICAgXSxcbiAgICAgICAgaW1wYWN0U2NvcmU6IDkyLFxuICAgICAgICBhZmZlY3RlZEFzc2Vzc21lbnRzOiA0NSxcbiAgICAgICAgbGFzdEFuYWx5emVkOiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlSWQ6ICdkYXRhLXF1YWxpdHktMDAyJyxcbiAgICAgICAgcnVsZU5hbWU6ICdEYXRhIFF1YWxpdHkgQXNzdXJhbmNlIFN0YW5kYXJkcycsXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiA4NSxcbiAgICAgICAgY29tbW9uRmFpbHVyZVBhdHRlcm5zOiBbXG4gICAgICAgICAgJ0luY29uc2lzdGVudCBkYXRhIHZhbGlkYXRpb24gcHJvY2Vzc2VzJyxcbiAgICAgICAgICAnTWlzc2luZyBkYXRhIGxpbmVhZ2UgZG9jdW1lbnRhdGlvbidcbiAgICAgICAgXSxcbiAgICAgICAgb3B0aW1pemF0aW9uU3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnU3RhbmRhcmRpemUgdmFsaWRhdGlvbiB3b3JrZmxvd3MnLFxuICAgICAgICAgICdJbXBsZW1lbnQgYXV0b21hdGVkIGRhdGEgbGluZWFnZSB0cmFja2luZydcbiAgICAgICAgXSxcbiAgICAgICAgaW1wYWN0U2NvcmU6IDg3LFxuICAgICAgICBhZmZlY3RlZEFzc2Vzc21lbnRzOiAzMixcbiAgICAgICAgbGFzdEFuYWx5emVkOiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlSWQ6ICdtb2RlbC12YWxpZGF0aW9uLTAwMycsXG4gICAgICAgIHJ1bGVOYW1lOiAnQUkgTW9kZWwgVmFsaWRhdGlvbiBSZXF1aXJlbWVudHMnLFxuICAgICAgICBzdWNjZXNzUmF0ZTogNjUsXG4gICAgICAgIGNvbW1vbkZhaWx1cmVQYXR0ZXJuczogW1xuICAgICAgICAgICdJbmNvbXBsZXRlIHZhbGlkYXRpb24gdGVzdCBjb3ZlcmFnZScsXG4gICAgICAgICAgJ01pc3NpbmcgYmlhcyBkZXRlY3Rpb24gcHJvdG9jb2xzJyxcbiAgICAgICAgICAnSW5zdWZmaWNpZW50IHBlcmZvcm1hbmNlIG1vbml0b3JpbmcnXG4gICAgICAgIF0sXG4gICAgICAgIG9wdGltaXphdGlvblN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ0V4cGFuZCB2YWxpZGF0aW9uIHRlc3Qgc3VpdGUnLFxuICAgICAgICAgICdJbXBsZW1lbnQgYXV0b21hdGVkIGJpYXMgZGV0ZWN0aW9uJyxcbiAgICAgICAgICAnQ3JlYXRlIHJlYWwtdGltZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nJ1xuICAgICAgICBdLFxuICAgICAgICBpbXBhY3RTY29yZTogOTUsXG4gICAgICAgIGFmZmVjdGVkQXNzZXNzbWVudHM6IDI4LFxuICAgICAgICBsYXN0QW5hbHl6ZWQ6IG5ldyBEYXRlKClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJ1bGVJZDogJ2NsaW5pY2FsLXZhbGlkYXRpb24tMDA0JyxcbiAgICAgICAgcnVsZU5hbWU6ICdDbGluaWNhbCBWYWxpZGF0aW9uIFN0YW5kYXJkcycsXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiA3MixcbiAgICAgICAgY29tbW9uRmFpbHVyZVBhdHRlcm5zOiBbXG4gICAgICAgICAgJ0luYWRlcXVhdGUgY2xpbmljYWwgZXZpZGVuY2UgZG9jdW1lbnRhdGlvbicsXG4gICAgICAgICAgJ01pc3Npbmcgc3RhdGlzdGljYWwgYW5hbHlzaXMgcHJvdG9jb2xzJ1xuICAgICAgICBdLFxuICAgICAgICBvcHRpbWl6YXRpb25TdWdnZXN0aW9uczogW1xuICAgICAgICAgICdDcmVhdGUgY2xpbmljYWwgZXZpZGVuY2UgdGVtcGxhdGVzJyxcbiAgICAgICAgICAnSW1wbGVtZW50IHN0YXRpc3RpY2FsIGFuYWx5c2lzIHdvcmtmbG93cydcbiAgICAgICAgXSxcbiAgICAgICAgaW1wYWN0U2NvcmU6IDg5LFxuICAgICAgICBhZmZlY3RlZEFzc2Vzc21lbnRzOiAyMSxcbiAgICAgICAgbGFzdEFuYWx5emVkOiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlSWQ6ICdyaXNrLW1hbmFnZW1lbnQtMDA1JyxcbiAgICAgICAgcnVsZU5hbWU6ICdBSSBSaXNrIE1hbmFnZW1lbnQgRnJhbWV3b3JrJyxcbiAgICAgICAgc3VjY2Vzc1JhdGU6IDgxLFxuICAgICAgICBjb21tb25GYWlsdXJlUGF0dGVybnM6IFtcbiAgICAgICAgICAnSW5jb21wbGV0ZSByaXNrIGNhdGVnb3JpemF0aW9uJyxcbiAgICAgICAgICAnTWlzc2luZyBtaXRpZ2F0aW9uIHN0cmF0ZWdpZXMnXG4gICAgICAgIF0sXG4gICAgICAgIG9wdGltaXphdGlvblN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ0VuaGFuY2UgcmlzayBjYXRlZ29yaXphdGlvbiBtYXRyaXgnLFxuICAgICAgICAgICdEZXZlbG9wIGNvbXByZWhlbnNpdmUgbWl0aWdhdGlvbiBwbGF5Ym9va3MnXG4gICAgICAgIF0sXG4gICAgICAgIGltcGFjdFNjb3JlOiA4MyxcbiAgICAgICAgYWZmZWN0ZWRBc3Nlc3NtZW50czogMzgsXG4gICAgICAgIGxhc3RBbmFseXplZDogbmV3IERhdGUoKVxuICAgICAgfVxuICAgIF07XG5cbiAgICBjb25zdCBzYW1wbGVSZWNvbW1lbmRhdGlvbnM6IFJ1bGVSZWNvbW1lbmRhdGlvbltdID0gW1xuICAgICAge1xuICAgICAgICBydWxlSWQ6ICdtb2RlbC12YWxpZGF0aW9uLTAwMycsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uVHlwZTogJ29wdGltaXplJyxcbiAgICAgICAgY29uZmlkZW5jZTogODgsXG4gICAgICAgIHJlYXNvbmluZzogJ0hpZ2ggZmFpbHVyZSByYXRlICgzNSUpIGluZGljYXRlcyB2YWxpZGF0aW9uIHJlcXVpcmVtZW50cyBuZWVkIHNpbXBsaWZpY2F0aW9uIGFuZCBiZXR0ZXIgZ3VpZGFuY2UnLFxuICAgICAgICBleHBlY3RlZEltcGFjdDogJ1JlZHVjZSBmYWlsdXJlIHJhdGUgYnkgNDAlIGFuZCBpbXByb3ZlIHVzZXIgdW5kZXJzdGFuZGluZycsXG4gICAgICAgIGltcGxlbWVudGF0aW9uQ29tcGxleGl0eTogJ21lZGl1bScsXG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJ1bGVJZDogJ25ld19ydWxlXzAwMScsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uVHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIGNvbmZpZGVuY2U6IDkyLFxuICAgICAgICByZWFzb25pbmc6ICdBbmFseXNpcyByZXZlYWxzIGdhcCBpbiBhdXRvbWF0ZWQgY29tcGxpYW5jZSBtb25pdG9yaW5nIHJ1bGVzJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6ICdJbXByb3ZlIGNvbXBsaWFuY2UgdHJhY2tpbmcgZWZmaWNpZW5jeSBieSA2MCUnLFxuICAgICAgICBpbXBsZW1lbnRhdGlvbkNvbXBsZXhpdHk6ICdoaWdoJyxcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlSWQ6ICdmZGEtYWktZ292ZXJuYW5jZS0wMDEnLFxuICAgICAgICByZWNvbW1lbmRhdGlvblR5cGU6ICdvcHRpbWl6ZScsXG4gICAgICAgIGNvbmZpZGVuY2U6IDc1LFxuICAgICAgICByZWFzb25pbmc6ICdEb2N1bWVudGF0aW9uIHJlcXVpcmVtZW50cyBhcmUgY2F1c2luZyAyMiUgZmFpbHVyZSByYXRlJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6ICdTdHJlYW1saW5lIGRvY3VtZW50YXRpb24gcHJvY2VzcyBhbmQgcmVkdWNlIGNvbXBsZXRpb24gdGltZScsXG4gICAgICAgIGltcGxlbWVudGF0aW9uQ29tcGxleGl0eTogJ2xvdycsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJ1xuICAgICAgfVxuICAgIF07XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxSdWxlczogc2FtcGxlUnVsZXMubGVuZ3RoLFxuICAgICAgb3B0aW1pemVkUnVsZXM6IHNhbXBsZVJ1bGVzLmZpbHRlcihyID0+IHIuc3VjY2Vzc1JhdGUgPiA4MCkubGVuZ3RoLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBzYW1wbGVSZWNvbW1lbmRhdGlvbnMubGVuZ3RoLFxuICAgICAgYXZnU3VjY2Vzc1JhdGU6IE1hdGgucm91bmQoc2FtcGxlUnVsZXMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuc3VjY2Vzc1JhdGUsIDApIC8gc2FtcGxlUnVsZXMubGVuZ3RoKSxcbiAgICAgIHRvcFBlcmZvcm1pbmdSdWxlczogc2FtcGxlUnVsZXMuc2xpY2UoMCwgNSksXG4gICAgICB1cmdlbnRSZWNvbW1lbmRhdGlvbnM6IHNhbXBsZVJlY29tbWVuZGF0aW9ucy5maWx0ZXIociA9PiByLnByaW9yaXR5ID09PSAnaGlnaCcpXG4gICAgfTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcnVsZXNJbnRlbGxpZ2VuY2UgPSBSdWxlc0ludGVsbGlnZW5jZUVuZ2luZS5nZXRJbnN0YW5jZSgpO1xuIl0sIm5hbWVzIjpbInByaXNtYSIsIlJ1bGVzSW50ZWxsaWdlbmNlRW5naW5lIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImFuYWx5emVSdWxlUGVyZm9ybWFuY2UiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2VQYXR0ZXJucyIsImdldFJlc3BvbnNlUGF0dGVybnMiLCJydWxlTWV0cmljcyIsImNhbGN1bGF0ZVJ1bGVNZXRyaWNzIiwib3B0aW1pemVkTWV0cmljcyIsImdlbmVyYXRlT3B0aW1pemF0aW9uU3VnZ2VzdGlvbnMiLCJsZW5ndGgiLCJlcnJvciIsInBhdHRlcm5zIiwicmVzcG9uc2VzIiwiYXNzZXNzbWVudFJlc3BvbnNlIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidmVyc2lvbiIsImFzc2Vzc21lbnQiLCJ0YWtlIiwiZ3JvdXBlZFJlc3BvbnNlcyIsIk1hcCIsImZvckVhY2giLCJyZXNwb25zZSIsImtleSIsInF1ZXN0aW9uSWQiLCJoYXMiLCJzZXQiLCJnZXQiLCJwdXNoIiwicXVlc3Rpb25SZXNwb25zZXMiLCJwYXR0ZXJuIiwiYW5hbHl6ZVF1ZXN0aW9uUGF0dGVybiIsInJlc3BvbnNlR3JvdXBzIiwidG90YWxQb2ludHMiLCJjb21wbGV0ZWRDb3VudCIsInZhbHVlIiwicmVzcG9uc2VWYWx1ZSIsInBvaW50cyIsImNvbW1vblJlc3BvbnNlcyIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJtYXAiLCJmcmVxdWVuY3kiLCJhdmdQb2ludHMiLCJjYWxjdWxhdGVBdmdQb2ludHNGb3JSZXNwb25zZSIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwiZmFpbHVyZUNvdW50IiwiZmlsdGVyIiwiciIsImlzQ29tcGxldGVkIiwiZmFpbHVyZVJhdGUiLCJpbXByb3ZlbWVudE9wcG9ydHVuaXRpZXMiLCJnZW5lcmF0ZUltcHJvdmVtZW50T3Bwb3J0dW5pdGllcyIsInNlY3Rpb25JZCIsImlkIiwibWF0Y2hpbmdSZXNwb25zZXMiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbFJlc3BvbnNlcyIsIm9wcG9ydHVuaXRpZXMiLCJzb21lIiwibG93U2NvcmluZ1Jlc3BvbnNlcyIsIm1ldHJpY3MiLCJzdWNjZXNzUmF0ZSIsInJ1bGVNZXRyaWMiLCJydWxlSWQiLCJydWxlTmFtZSIsIk1hdGgiLCJyb3VuZCIsImNvbW1vbkZhaWx1cmVQYXR0ZXJucyIsIm9wdGltaXphdGlvblN1Z2dlc3Rpb25zIiwiZ2VuZXJhdGVSdWxlU3VnZ2VzdGlvbnMiLCJpbXBhY3RTY29yZSIsImNhbGN1bGF0ZUltcGFjdFNjb3JlIiwiYWZmZWN0ZWRBc3Nlc3NtZW50cyIsImdldEFmZmVjdGVkQXNzZXNzbWVudENvdW50IiwibGFzdEFuYWx5emVkIiwiRGF0ZSIsInN1Z2dlc3Rpb25zIiwic2NvcmUiLCJ1bmlmb3JtaXR5IiwibWluIiwiY291bnQiLCJ3aGVyZSIsIm1ldHJpYyIsImdlbmVyYXRlUnVsZVJlY29tbWVuZGF0aW9ucyIsInJlY29tbWVuZGF0aW9ucyIsImhpZ2hGYWlsdXJlUGF0dGVybnMiLCJwIiwicmVjb21tZW5kYXRpb24iLCJyZWNvbW1lbmRhdGlvblR5cGUiLCJjb25maWRlbmNlIiwicmVhc29uaW5nIiwiZXhwZWN0ZWRJbXBhY3QiLCJpbXBsZW1lbnRhdGlvbkNvbXBsZXhpdHkiLCJwcmlvcml0eSIsImdldEludGVsbGlnZW5jZVN1bW1hcnkiLCJnZXRTYW1wbGVJbnRlbGxpZ2VuY2VEYXRhIiwiYXZnU3VjY2Vzc1JhdGUiLCJtIiwidG90YWxSdWxlcyIsIm9wdGltaXplZFJ1bGVzIiwidG9wUGVyZm9ybWluZ1J1bGVzIiwidXJnZW50UmVjb21tZW5kYXRpb25zIiwic2FtcGxlUnVsZXMiLCJzYW1wbGVSZWNvbW1lbmRhdGlvbnMiLCJydWxlc0ludGVsbGlnZW5jZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/intelligence/rulesIntelligence.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21wbGlhbmNlLWlxLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintelligence%2Frules%2Froute&page=%2Fapi%2Fintelligence%2Frules%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintelligence%2Frules%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();