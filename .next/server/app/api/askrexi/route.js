"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/askrexi/route";
exports.ids = ["app/api/askrexi/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faskrexi%2Froute&page=%2Fapi%2Faskrexi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faskrexi%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faskrexi%2Froute&page=%2Fapi%2Faskrexi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faskrexi%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_tarinipersonal_Documents_ComplianceIQ_src_app_api_askrexi_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/askrexi/route.ts */ \"(rsc)/./src/app/api/askrexi/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/askrexi/route\",\n        pathname: \"/api/askrexi\",\n        filename: \"route\",\n        bundlePath: \"app/api/askrexi/route\"\n    },\n    resolvedPagePath: \"/Users/tarinipersonal/Documents/ComplianceIQ/src/app/api/askrexi/route.ts\",\n    nextConfigOutput,\n    userland: _Users_tarinipersonal_Documents_ComplianceIQ_src_app_api_askrexi_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/askrexi/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhc2tyZXhpJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhc2tyZXhpJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXNrcmV4aSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRhcmluaXBlcnNvbmFsJTJGRG9jdW1lbnRzJTJGQ29tcGxpYW5jZUlRJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnRhcmluaXBlcnNvbmFsJTJGRG9jdW1lbnRzJTJGQ29tcGxpYW5jZUlRJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN5QjtBQUN0RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbXBsaWFuY2UtaXEvPzM2MTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3RhcmluaXBlcnNvbmFsL0RvY3VtZW50cy9Db21wbGlhbmNlSVEvc3JjL2FwcC9hcGkvYXNrcmV4aS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXNrcmV4aS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Fza3JleGlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2Fza3JleGkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdGFyaW5pcGVyc29uYWwvRG9jdW1lbnRzL0NvbXBsaWFuY2VJUS9zcmMvYXBwL2FwaS9hc2tyZXhpL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hc2tyZXhpL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faskrexi%2Froute&page=%2Fapi%2Faskrexi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faskrexi%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/askrexi/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/askrexi/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/**\n * AskRexi Chatbot API - ComplianceIQ System\n * Intelligent regulatory compliance assistant with training data and caching\n */ \n\n\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        const body = await request.json();\n        const { question, context } = body;\n        if (!question || question.trim().length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Question is required\"\n            }, {\n                status: 400\n            });\n        }\n        const normalizedQuestion = question.trim().toLowerCase();\n        // Check if question is non-contextual (weather, sports, etc.)\n        const isNonContextual = await checkNonContextualQuestion(normalizedQuestion);\n        if (isNonContextual) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    answer: `I'm AskRexi, your regulatory compliance assistant. I specialize in helping with regulatory intelligence, assessment support, and analytics for pharmaceutical AI compliance. I can't help with ${isNonContextual.category} questions, but I'd be happy to assist you with compliance-related questions!`,\n                    category: \"general\",\n                    sources: [],\n                    actionItems: [\n                        \"Ask about FDA, EMA, or ICH regulations\",\n                        \"Get guidance on assessment questions\",\n                        \"Request analytics and performance insights\",\n                        \"Learn about compliance requirements\"\n                    ],\n                    impactLevel: \"low\",\n                    relatedQuestions: [\n                        \"What are the latest FDA guidelines for AI in healthcare?\",\n                        \"How do I complete the data governance assessment section?\",\n                        \"What is our current compliance score?\",\n                        \"What regulations apply to our therapeutic area?\"\n                    ]\n                }\n            });\n        }\n        // Generate question hash for caching\n        const questionHash = generateQuestionHash(normalizedQuestion, context);\n        // Check response cache first\n        const cachedResponse = await getCachedResponse(questionHash);\n        if (cachedResponse) {\n            // Update cache hit count and last accessed\n            await updateCacheHit(questionHash);\n            // Log usage analytics\n            await logUsageAnalytics(question, cachedResponse.category, Date.now() - startTime, context);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: cachedResponse,\n                cached: true\n            });\n        }\n        // Process the question and generate response\n        const response = await processAskRexiQuery(question, context);\n        // Cache the response\n        await cacheResponse(questionHash, question, response);\n        // Log usage analytics\n        await logUsageAnalytics(question, response.category, Date.now() - startTime, context);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: response,\n            cached: false\n        });\n    } catch (error) {\n        console.error(\"Error processing AskRexi query:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to process question\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function processAskRexiQuery(question, context) {\n    const normalizedQuestion = question.toLowerCase().trim();\n    // Analyze conversation context and user intent\n    const conversationContext = analyzeConversationContext(question, context);\n    const userIntent = analyzeUserIntent(question, conversationContext);\n    // First, try to find exact or similar matches in training data\n    const trainingMatch = await findTrainingDataMatch(normalizedQuestion, context);\n    if (trainingMatch) {\n        return enhanceResponseWithIntelligence(trainingMatch, userIntent, conversationContext);\n    }\n    // Determine question category with enhanced intelligence\n    const category = categorizeQuestionIntelligently(normalizedQuestion, userIntent);\n    let response;\n    switch(category){\n        case \"regulatory\":\n            response = await handleRegulatoryQueryIntelligently(question, context, userIntent);\n            break;\n        case \"assessment\":\n            response = await handleAssessmentQueryIntelligently(question, context, userIntent);\n            break;\n        case \"analytics\":\n            response = await handleAnalyticsQueryIntelligently(question, context, userIntent);\n            break;\n        default:\n            response = await handleGeneralQueryIntelligently(question, context, userIntent);\n    }\n    return enhanceResponseWithIntelligence(response, userIntent, conversationContext);\n}\n// New helper functions for training data and caching\nasync function checkNonContextualQuestion(question) {\n    // Mock patterns for non-contextual questions\n    const patterns = [\n        {\n            pattern: \"hello|hi|hey\",\n            category: \"greeting\"\n        },\n        {\n            pattern: \"what is|what are|define\",\n            category: \"definition\"\n        },\n        {\n            pattern: \"how to|how do i\",\n            category: \"instruction\"\n        },\n        {\n            pattern: \"when|where|who\",\n            category: \"information\"\n        }\n    ];\n    for (const pattern of patterns){\n        const regex = new RegExp(pattern.pattern, \"i\");\n        if (regex.test(question)) {\n            return {\n                category: pattern.category\n            };\n        }\n    }\n    return null;\n}\nfunction generateQuestionHash(question, context) {\n    const contextString = context ? JSON.stringify(context) : \"\";\n    const hashInput = `${question}:${contextString}`;\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().createHash(\"sha256\").update(hashInput).digest(\"hex\");\n}\nasync function getCachedResponse(questionHash) {\n    // Mock cache - in a real implementation, this would use Redis or database\n    return null;\n}\nasync function cacheResponse(questionHash, originalQuestion, response) {\n    // Mock cache - in a real implementation, this would store in Redis or database\n    console.log(`Caching response for question: ${originalQuestion.substring(0, 50)}...`);\n}\nasync function updateCacheHit(questionHash) {\n    // Mock cache hit update - in a real implementation, this would update cache statistics\n    console.log(`Cache hit for question hash: ${questionHash.substring(0, 8)}...`);\n}\nasync function logUsageAnalytics(question, category, responseTime, context) {\n    // Mock analytics logging - in a real implementation, this would store analytics data\n    console.log(`Analytics: ${category} question (${responseTime}ms): ${question.substring(0, 50)}...`);\n}\nasync function findTrainingDataMatch(question, context) {\n    // Mock training data - in a real implementation, this would query the training database\n    const mockTrainingData = [\n        {\n            question: \"what is ai compliance\",\n            answer: \"AI compliance refers to ensuring that artificial intelligence systems meet regulatory requirements, ethical standards, and industry best practices.\",\n            category: \"definition\",\n            keywords: [\n                \"ai\",\n                \"compliance\",\n                \"regulatory\"\n            ]\n        },\n        {\n            question: \"how to validate ai models\",\n            answer: \"AI model validation involves testing model performance, bias detection, explainability assessment, and regulatory compliance verification.\",\n            category: \"process\",\n            keywords: [\n                \"validation\",\n                \"models\",\n                \"testing\"\n            ]\n        }\n    ];\n    const lowerQuestion = question.toLowerCase();\n    // Try exact match\n    for (const data of mockTrainingData){\n        if (data.question === lowerQuestion) {\n            return {\n                answer: data.answer,\n                category: data.category,\n                sources: [\n                    {\n                        type: \"guidance\",\n                        title: \"Training Data\",\n                        content: data.answer,\n                        url: undefined\n                    }\n                ],\n                actionItems: [],\n                impactLevel: \"medium\",\n                relatedQuestions: []\n            };\n        }\n    }\n    // Try keyword matching\n    const keywords = extractKeywords(question);\n    for (const data of mockTrainingData){\n        const hasKeywordMatch = keywords.some((keyword)=>data.keywords.some((dataKeyword)=>dataKeyword.includes(keyword)));\n        if (hasKeywordMatch) {\n            return {\n                answer: data.answer,\n                category: data.category,\n                sources: [\n                    {\n                        type: \"guidance\",\n                        title: \"Training Data\",\n                        content: data.answer,\n                        url: undefined\n                    }\n                ],\n                actionItems: [],\n                impactLevel: \"medium\",\n                relatedQuestions: []\n            };\n        }\n    }\n    return null;\n}\nfunction convertTrainingDataToResponse(trainingData) {\n    return {\n        answer: trainingData.answer,\n        category: trainingData.category,\n        sources: trainingData.sources.map((source)=>({\n                type: \"regulation\",\n                title: source,\n                content: `Information from ${source}`,\n                url: `/regulatory/${source.toLowerCase().replace(/\\s+/g, \"-\")}`\n            })),\n        actionItems: trainingData.actionItems,\n        impactLevel: trainingData.impactLevel,\n        relatedQuestions: generateRelatedQuestions(trainingData.category, trainingData.question)\n    };\n}\nfunction extractKeywords(question) {\n    const contextualKeywords = [\n        \"fda\",\n        \"ema\",\n        \"ich\",\n        \"regulation\",\n        \"guideline\",\n        \"compliance\",\n        \"regulatory\",\n        \"assessment\",\n        \"question\",\n        \"section\",\n        \"requirement\",\n        \"evidence\",\n        \"documentation\",\n        \"analytics\",\n        \"report\",\n        \"performance\",\n        \"score\",\n        \"trend\",\n        \"metric\",\n        \"dashboard\",\n        \"ai\",\n        \"artificial intelligence\",\n        \"machine learning\",\n        \"model\",\n        \"algorithm\",\n        \"pharmaceutical\",\n        \"pharma\",\n        \"drug\",\n        \"medicine\",\n        \"therapeutic\",\n        \"clinical\",\n        \"quality\",\n        \"governance\",\n        \"risk\",\n        \"safety\",\n        \"efficacy\",\n        \"validation\"\n    ];\n    const questionLower = question.toLowerCase();\n    return contextualKeywords.filter((keyword)=>questionLower.includes(keyword));\n}\n// Intelligent conversation analysis functions\nfunction analyzeConversationContext(question, context) {\n    const conversationHistory = context?.conversationHistory || [];\n    const userPreferences = context?.userPreferences || {};\n    // Analyze recent conversation topics\n    const recentTopics = conversationHistory.slice(-5) // Last 5 messages\n    .map((msg)=>extractKeywords(msg.content)).flat();\n    // Determine conversation flow\n    const isFollowUp = isFollowUpQuestion(question, conversationHistory);\n    const isClarification = isClarificationQuestion(question);\n    const isUrgent = isUrgentQuestion(question);\n    return {\n        recentTopics,\n        isFollowUp,\n        isClarification,\n        isUrgent,\n        userPreferences,\n        conversationLength: conversationHistory.length\n    };\n}\nfunction analyzeUserIntent(question, conversationContext) {\n    const questionLower = question.toLowerCase();\n    // Intent patterns\n    const intents = {\n        seekingInformation: /what|how|when|where|why|which|tell me|explain|describe/i,\n        requestingGuidance: /help|guide|assist|support|advice|recommend|suggest/i,\n        askingForClarification: /clarify|explain more|what do you mean|can you elaborate/i,\n        requestingExamples: /example|sample|show me|demonstrate|illustrate/i,\n        comparingOptions: /compare|difference|versus|vs|better|best|which is/i,\n        seekingValidation: /correct|right|accurate|valid|proper|appropriate/i,\n        requestingAction: /do|create|make|build|implement|start|begin/i,\n        expressingConcern: /concern|worry|issue|problem|challenge|difficulty/i\n    };\n    const detectedIntents = Object.entries(intents).filter(([_, pattern])=>pattern.test(question)).map(([intent, _])=>intent);\n    // Determine expertise level from question complexity\n    const expertiseLevel = determineExpertiseLevel(question);\n    // Determine urgency\n    const urgency = conversationContext.isUrgent ? \"high\" : /urgent|asap|immediately|quickly|soon/i.test(question) ? \"medium\" : \"low\";\n    return {\n        intents: detectedIntents,\n        expertiseLevel,\n        urgency,\n        isFollowUp: conversationContext.isFollowUp,\n        isClarification: conversationContext.isClarification\n    };\n}\nfunction isFollowUpQuestion(question, history) {\n    if (history.length === 0) return false;\n    const followUpIndicators = [\n        \"also\",\n        \"additionally\",\n        \"furthermore\",\n        \"moreover\",\n        \"what about\",\n        \"how about\",\n        \"can you also\",\n        \"in addition\",\n        \"besides\",\n        \"on top of that\",\n        \"and\",\n        \"but\",\n        \"however\",\n        \"on the other hand\",\n        \"alternatively\",\n        \"instead\"\n    ];\n    const questionLower = question.toLowerCase();\n    return followUpIndicators.some((indicator)=>questionLower.includes(indicator));\n}\nfunction isClarificationQuestion(question) {\n    const clarificationPatterns = [\n        /what do you mean/i,\n        /can you clarify/i,\n        /can you explain/i,\n        /i don't understand/i,\n        /could you elaborate/i,\n        /what does that mean/i,\n        /can you be more specific/i\n    ];\n    return clarificationPatterns.some((pattern)=>pattern.test(question));\n}\nfunction isUrgentQuestion(question) {\n    const urgentPatterns = [\n        /urgent|asap|immediately|quickly|emergency|critical|important|deadline/i\n    ];\n    return urgentPatterns.some((pattern)=>pattern.test(question));\n}\nfunction determineExpertiseLevel(question) {\n    const expertTerms = [\n        \"algorithm\",\n        \"architecture\",\n        \"implementation\",\n        \"optimization\",\n        \"scalability\",\n        \"microservices\",\n        \"kubernetes\",\n        \"docker\",\n        \"api\",\n        \"endpoint\",\n        \"middleware\",\n        \"database\",\n        \"schema\",\n        \"migration\",\n        \"indexing\",\n        \"query optimization\"\n    ];\n    const beginnerTerms = [\n        \"what is\",\n        \"how do i\",\n        \"beginner\",\n        \"new to\",\n        \"learning\",\n        \"tutorial\",\n        \"introduction\",\n        \"basics\",\n        \"simple\",\n        \"easy\",\n        \"step by step\"\n    ];\n    const questionLower = question.toLowerCase();\n    const expertCount = expertTerms.filter((term)=>questionLower.includes(term)).length;\n    const beginnerCount = beginnerTerms.filter((term)=>questionLower.includes(term)).length;\n    if (expertCount > beginnerCount && expertCount > 0) return \"expert\";\n    if (beginnerCount > expertCount && beginnerCount > 0) return \"beginner\";\n    return \"intermediate\";\n}\nfunction categorizeQuestionIntelligently(question, userIntent) {\n    // Enhanced categorization based on intent and context\n    const questionLower = question.toLowerCase();\n    // Regulatory indicators\n    if (userIntent.intents.includes(\"seekingInformation\") && /fda|ema|ich|regulation|guideline|compliance|regulatory|approval|submission/i.test(questionLower)) {\n        return \"regulatory\";\n    }\n    // Assessment indicators\n    if (userIntent.intents.includes(\"requestingGuidance\") && /assessment|question|section|requirement|evidence|documentation|validation/i.test(questionLower)) {\n        return \"assessment\";\n    }\n    // Analytics indicators\n    if (userIntent.intents.includes(\"seekingInformation\") && /analytics|report|performance|score|trend|metric|dashboard|data|statistics/i.test(questionLower)) {\n        return \"analytics\";\n    }\n    // Fallback to original categorization\n    return categorizeQuestion(question);\n}\nfunction enhanceResponseWithIntelligence(response, userIntent, conversationContext) {\n    // Personalize response based on user intent and context\n    let enhancedAnswer = response.answer;\n    // Add conversational elements\n    if (userIntent.isFollowUp) {\n        enhancedAnswer = `Great follow-up question! ${enhancedAnswer}`;\n    }\n    if (userIntent.isClarification) {\n        enhancedAnswer = `Let me clarify that for you. ${enhancedAnswer}`;\n    }\n    if (userIntent.urgency === \"high\") {\n        enhancedAnswer = `I understand this is urgent. ${enhancedAnswer}`;\n    }\n    // Adjust complexity based on expertise level\n    if (userIntent.expertiseLevel === \"beginner\") {\n        enhancedAnswer = simplifyLanguage(enhancedAnswer);\n    } else if (userIntent.expertiseLevel === \"expert\") {\n        enhancedAnswer = addTechnicalDetails(enhancedAnswer);\n    }\n    // Add contextual follow-up questions\n    const contextualFollowUps = generateContextualFollowUps(userIntent, conversationContext);\n    return {\n        ...response,\n        answer: enhancedAnswer,\n        relatedQuestions: [\n            ...response.relatedQuestions,\n            ...contextualFollowUps\n        ]\n    };\n}\nfunction simplifyLanguage(text) {\n    // Replace complex terms with simpler explanations\n    const simplifications = {\n        \"regulatory compliance\": \"following rules and regulations\",\n        \"pharmaceutical\": \"drug and medicine\",\n        \"clinical validation\": \"testing in real medical settings\",\n        \"algorithmic transparency\": \"being able to explain how the AI works\",\n        \"data governance\": \"managing and protecting data properly\"\n    };\n    let simplified = text;\n    Object.entries(simplifications).forEach(([complex, simple])=>{\n        simplified = simplified.replace(new RegExp(complex, \"gi\"), simple);\n    });\n    return simplified;\n}\nfunction addTechnicalDetails(text) {\n    // Add technical depth for expert users\n    const technicalAdditions = {\n        \"FDA guidelines\": \"FDA guidelines (21 CFR Part 11, ICH E6(R3))\",\n        \"data quality\": \"data quality (completeness, accuracy, consistency, validity)\",\n        \"model validation\": \"model validation (cross-validation, hold-out testing, bias assessment)\"\n    };\n    let enhanced = text;\n    Object.entries(technicalAdditions).forEach(([term, addition])=>{\n        enhanced = enhanced.replace(new RegExp(term, \"gi\"), addition);\n    });\n    return enhanced;\n}\nfunction generateContextualFollowUps(userIntent, conversationContext) {\n    const followUps = [];\n    if (userIntent.intents.includes(\"seekingInformation\")) {\n        followUps.push(\"Would you like me to explain any specific aspect in more detail?\");\n    }\n    if (userIntent.intents.includes(\"requestingGuidance\")) {\n        followUps.push(\"Do you need help implementing this in your organization?\");\n    }\n    if (userIntent.intents.includes(\"requestingExamples\")) {\n        followUps.push(\"Would you like to see a real-world example of this?\");\n    }\n    if (conversationContext.recentTopics.length > 0) {\n        followUps.push(\"How does this relate to your previous questions about compliance?\");\n    }\n    return followUps;\n}\nfunction categorizeQuestion(question) {\n    const regulatoryKeywords = [\n        \"regulation\",\n        \"fda\",\n        \"ema\",\n        \"ich\",\n        \"guideline\",\n        \"compliance\",\n        \"regulatory\",\n        \"approval\",\n        \"submission\",\n        \"clinical trial\",\n        \"safety\",\n        \"efficacy\",\n        \"gcp\",\n        \"gmp\",\n        \"glp\",\n        \"qms\",\n        \"risk management\",\n        \"pharmacovigilance\"\n    ];\n    const assessmentKeywords = [\n        \"assessment\",\n        \"question\",\n        \"section\",\n        \"requirement\",\n        \"evidence\",\n        \"documentation\",\n        \"validation\",\n        \"verification\",\n        \"testing\",\n        \"protocol\",\n        \"standard operating procedure\",\n        \"sop\",\n        \"checklist\",\n        \"audit\",\n        \"inspection\"\n    ];\n    const analyticsKeywords = [\n        \"analytics\",\n        \"report\",\n        \"performance\",\n        \"score\",\n        \"trend\",\n        \"metric\",\n        \"dashboard\",\n        \"insight\",\n        \"recommendation\",\n        \"benchmark\",\n        \"comparison\",\n        \"statistics\",\n        \"data\"\n    ];\n    const questionLower = question.toLowerCase();\n    if (regulatoryKeywords.some((keyword)=>questionLower.includes(keyword))) {\n        return \"regulatory\";\n    } else if (assessmentKeywords.some((keyword)=>questionLower.includes(keyword))) {\n        return \"assessment\";\n    } else if (analyticsKeywords.some((keyword)=>questionLower.includes(keyword))) {\n        return \"analytics\";\n    }\n    return \"general\";\n}\nasync function handleRegulatoryQueryIntelligently(question, context, userIntent) {\n    // Enhanced regulatory query handling with intelligence\n    const response = await handleRegulatoryQuery(question, context);\n    // Add intelligent context based on user intent\n    if (userIntent?.intents.includes(\"requestingExamples\")) {\n        response.answer += `\\n\\n**Real-world Example:** Many pharmaceutical companies have successfully implemented these guidelines by establishing cross-functional AI governance teams that include regulatory affairs, data science, and clinical experts working together to ensure compliance.`;\n    }\n    if (userIntent?.intents.includes(\"expressingConcern\")) {\n        response.answer += `\\n\\n**Don't worry** - these guidelines are designed to help you succeed. I can provide step-by-step guidance to address any specific concerns you have.`;\n    }\n    return response;\n}\nasync function handleAssessmentQueryIntelligently(question, context, userIntent) {\n    // Enhanced assessment query handling with intelligence\n    const response = await handleAssessmentQuery(question, context);\n    // Add intelligent context based on user intent\n    if (userIntent?.intents.includes(\"requestingGuidance\")) {\n        response.answer += `\\n\\n**Pro Tip:** I recommend tackling the most critical sections first, as they often have dependencies that affect other areas. Would you like me to help you prioritize based on your specific situation?`;\n    }\n    if (userIntent?.expertiseLevel === \"beginner\") {\n        response.answer += `\\n\\n**Getting Started:** Don't feel overwhelmed! Start with one section at a time, and I'm here to guide you through each step.`;\n    }\n    return response;\n}\nasync function handleAnalyticsQueryIntelligently(question, context, userIntent) {\n    // Enhanced analytics query handling with intelligence\n    const response = await handleAnalyticsQuery(question, context);\n    // Add intelligent context based on user intent\n    if (userIntent?.intents.includes(\"comparingOptions\")) {\n        response.answer += `\\n\\n**Comparison Insight:** I can help you compare your performance against industry benchmarks and identify specific areas where you're excelling or need improvement.`;\n    }\n    if (userIntent?.intents.includes(\"seekingValidation\")) {\n        response.answer += `\\n\\n**Validation Check:** Your current performance shows you're on the right track. The key is maintaining consistency and addressing any gaps systematically.`;\n    }\n    return response;\n}\nasync function handleGeneralQueryIntelligently(question, context, userIntent) {\n    // Enhanced general query handling with intelligence\n    const response = await handleGeneralQuery(question, context);\n    // Add intelligent context based on user intent\n    if (userIntent?.intents.includes(\"requestingGuidance\")) {\n        response.answer += `\\n\\n**Personalized Guidance:** Based on your questions, I can see you're interested in compliance. Let me know your specific area of focus, and I'll provide tailored guidance.`;\n    }\n    if (userIntent?.isFollowUp) {\n        response.answer += `\\n\\n**Building on our conversation:** I'm here to help you dive deeper into any topic. What specific aspect would you like to explore further?`;\n    }\n    return response;\n}\nasync function handleRegulatoryQuery(question, context) {\n    // Search regulatory intelligence database\n    const regulatoryData = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.regulatoryIntelligence.findMany({\n        where: {\n            status: \"active\",\n            OR: [\n                {\n                    title: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    content: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    source: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                }\n            ]\n        },\n        orderBy: {\n            lastUpdated: \"desc\"\n        },\n        take: 5\n    });\n    // Search guidance content for regulatory citations\n    const guidanceData = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.guidanceContent.findMany({\n        where: {\n            OR: [\n                {\n                    title: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    description: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    regulatoryCitations: {\n                        has: question\n                    }\n                }\n            ]\n        },\n        include: {\n            question: {\n                include: {\n                    section: true\n                }\n            }\n        },\n        take: 3\n    });\n    const sources = [\n        ...regulatoryData.map((reg)=>({\n                type: \"regulation\",\n                title: reg.title,\n                content: reg.content.substring(0, 300) + \"...\",\n                url: `/regulatory/${reg.id}`\n            })),\n        ...guidanceData.map((guidance)=>({\n                type: \"guidance\",\n                title: guidance.title,\n                content: guidance.description,\n                url: `/assessment/guidance/${guidance.id}`\n            }))\n    ];\n    // Generate intelligent response\n    const answer = generateRegulatoryResponse(question, regulatoryData, guidanceData);\n    const actionItems = extractActionItems(regulatoryData, guidanceData);\n    const impactLevel = determineImpactLevel(regulatoryData);\n    return {\n        answer,\n        category: \"regulatory\",\n        sources,\n        actionItems,\n        impactLevel,\n        relatedQuestions: generateRelatedQuestions(\"regulatory\", question)\n    };\n}\nasync function handleAssessmentQuery(question, context) {\n    // Search assessment questions and guidance\n    const questions = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.dynamicQuestion.findMany({\n        where: {\n            OR: [\n                {\n                    questionText: {\n                        contains: question,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    responsibleRoles: {\n                        has: question\n                    }\n                },\n                {\n                    evidenceRequired: {\n                        has: question\n                    }\n                }\n            ]\n        },\n        include: {\n            section: true,\n            guidanceContent: true\n        },\n        take: 5\n    });\n    const sources = questions.map((q)=>({\n            type: \"assessment\",\n            title: q.questionText.substring(0, 100) + \"...\",\n            content: q.guidanceContent[0]?.description || \"Assessment question guidance\",\n            url: `/assessment/question/${q.id}`\n        }));\n    const answer = generateAssessmentResponse(question, questions);\n    const actionItems = extractAssessmentActionItems(questions);\n    const impactLevel = questions.some((q)=>q.isProductionBlocker) ? \"critical\" : \"medium\";\n    return {\n        answer,\n        category: \"assessment\",\n        sources,\n        actionItems,\n        impactLevel,\n        relatedQuestions: generateRelatedQuestions(\"assessment\", question)\n    };\n}\nasync function handleAnalyticsQuery(question, context) {\n    // Get analytics data based on context\n    const assessments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.assessment.findMany({\n        where: context?.companyId ? {\n            tenantId: context.companyId\n        } : {},\n        include: {\n            tenant: true,\n            responses: {\n                include: {\n                    question: {\n                        include: {\n                            section: true\n                        }\n                    }\n                }\n            }\n        },\n        orderBy: {\n            updatedAt: \"desc\"\n        },\n        take: 10\n    });\n    const analyticsData = calculateAnalyticsMetrics(assessments);\n    const sources = [\n        {\n            type: \"analytics\",\n            title: \"Assessment Analytics Dashboard\",\n            content: `Performance metrics for ${assessments.length} assessments`,\n            url: \"/analytics\"\n        }\n    ];\n    const answer = generateAnalyticsResponse(question, analyticsData);\n    const actionItems = generateAnalyticsRecommendations(analyticsData);\n    const impactLevel = \"medium\";\n    return {\n        answer,\n        category: \"analytics\",\n        sources,\n        actionItems,\n        impactLevel,\n        relatedQuestions: generateRelatedQuestions(\"analytics\", question)\n    };\n}\nasync function handleGeneralQuery(question, context) {\n    return {\n        answer: `I'm AskRexi, your regulatory compliance assistant. I can help you with regulatory intelligence, assessment guidance, and analytics insights. Could you please be more specific about what you'd like to know?`,\n        category: \"general\",\n        sources: [],\n        actionItems: [\n            \"Ask about specific FDA or EMA regulations\",\n            \"Get guidance on assessment questions\",\n            \"Request analytics and performance insights\",\n            \"Learn about compliance requirements\"\n        ],\n        impactLevel: \"low\",\n        relatedQuestions: [\n            \"What are the latest FDA guidelines for AI in healthcare?\",\n            \"How do I complete the data governance assessment section?\",\n            \"What is our current compliance score?\",\n            \"What regulations apply to our therapeutic area?\"\n        ]\n    };\n}\n// Helper functions\nfunction generateRegulatoryResponse(question, regulatoryData, guidanceData) {\n    if (regulatoryData.length === 0 && guidanceData.length === 0) {\n        return `I couldn't find specific regulatory information for \"${question}\". However, I can help you with general regulatory guidance. Please try asking about specific regulations like FDA guidelines, EMA requirements, or ICH standards.`;\n    }\n    let response = `Based on your question about \"${question}\", here's what I found:\\n\\n`;\n    if (regulatoryData.length > 0) {\n        response += `**Regulatory Information:**\\n`;\n        regulatoryData.forEach((reg, index)=>{\n            response += `• **${reg.title}** (${reg.source})\\n`;\n            response += `  - Impact Level: ${reg.impactLevel}\\n`;\n            response += `  - Effective Date: ${reg.effectiveDate ? new Date(reg.effectiveDate).toLocaleDateString() : \"TBD\"}\\n`;\n            response += `  - Therapeutic Areas: ${reg.therapeuticAreas.join(\", \")}\\n\\n`;\n        });\n    }\n    if (guidanceData.length > 0) {\n        response += `**Assessment Guidance:**\\n`;\n        guidanceData.forEach((guidance, index)=>{\n            response += `• ${guidance.title}\\n`;\n            response += `  - Section: ${guidance.question.section.title}\\n`;\n            response += `  - Description: ${guidance.description}\\n\\n`;\n        });\n    }\n    return response;\n}\nfunction generateAssessmentResponse(question, questions) {\n    if (questions.length === 0) {\n        return `I couldn't find specific assessment guidance for \"${question}\". Please try asking about specific assessment sections, questions, or requirements.`;\n    }\n    let response = `Here's guidance for your assessment question:\\n\\n`;\n    questions.forEach((q, index)=>{\n        response += `**${q.questionText.substring(0, 100)}...**\\n`;\n        response += `• Section: ${q.section.title}\\n`;\n        response += `• Responsible Roles: ${q.responsibleRoles.join(\", \")}\\n`;\n        response += `• Evidence Required: ${q.evidenceRequired.join(\", \")}\\n`;\n        if (q.isProductionBlocker) {\n            response += `• ⚠️ **Production Blocker** - Must be completed for production readiness\\n`;\n        }\n        if (q.guidanceContent.length > 0) {\n            response += `• Guidance: ${q.guidanceContent[0].description}\\n`;\n        }\n        response += `\\n`;\n    });\n    return response;\n}\nfunction generateAnalyticsResponse(question, analyticsData) {\n    return `Here are your analytics insights:\\n\\n` + `• **Total Assessments**: ${analyticsData.totalAssessments}\\n` + `• **Average Score**: ${analyticsData.averageScore}%\\n` + `• **Completion Rate**: ${analyticsData.completionRate}%\\n` + `• **Production Ready**: ${analyticsData.productionReady}%\\n\\n` + `**Key Trends:**\\n` + `• Most challenging sections: ${analyticsData.challengingSections.join(\", \")}\\n` + `• Top performing areas: ${analyticsData.topAreas.join(\", \")}\\n`;\n}\nfunction extractActionItems(regulatoryData, guidanceData) {\n    const actionItems = [];\n    regulatoryData.forEach((reg)=>{\n        if (reg.impactLevel === \"high\" || reg.impactLevel === \"critical\") {\n            actionItems.push(`Review and implement ${reg.title} requirements`);\n        }\n    });\n    guidanceData.forEach((guidance)=>{\n        if (guidance.actionSteps && guidance.actionSteps.length > 0) {\n            actionItems.push(...guidance.actionSteps);\n        }\n    });\n    return [\n        ...new Set(actionItems)\n    ]; // Remove duplicates\n}\nfunction extractAssessmentActionItems(questions) {\n    const actionItems = [];\n    questions.forEach((q)=>{\n        if (q.evidenceRequired.length > 0) {\n            actionItems.push(`Gather evidence: ${q.evidenceRequired.join(\", \")}`);\n        }\n        if (q.isProductionBlocker) {\n            actionItems.push(`Complete this production blocker question immediately`);\n        }\n        if (q.guidanceContent.length > 0 && q.guidanceContent[0].actionSteps) {\n            actionItems.push(...q.guidanceContent[0].actionSteps);\n        }\n    });\n    return [\n        ...new Set(actionItems)\n    ];\n}\nfunction generateAnalyticsRecommendations(analyticsData) {\n    const recommendations = [];\n    if (analyticsData.averageScore < 70) {\n        recommendations.push(\"Focus on improving overall compliance score\");\n    }\n    if (analyticsData.completionRate < 80) {\n        recommendations.push(\"Increase assessment completion rates\");\n    }\n    if (analyticsData.productionReady < 60) {\n        recommendations.push(\"Address production blockers to improve readiness\");\n    }\n    return recommendations;\n}\nfunction determineImpactLevel(regulatoryData) {\n    if (regulatoryData.some((reg)=>reg.impactLevel === \"critical\")) return \"critical\";\n    if (regulatoryData.some((reg)=>reg.impactLevel === \"high\")) return \"high\";\n    if (regulatoryData.some((reg)=>reg.impactLevel === \"medium\")) return \"medium\";\n    return \"low\";\n}\nfunction calculateAnalyticsMetrics(assessments) {\n    const totalAssessments = assessments.length;\n    const completedAssessments = assessments.filter((a)=>a.status === \"completed\").length;\n    const averageScore = totalAssessments > 0 ? Math.round(assessments.reduce((sum, a)=>sum + a.currentScore, 0) / totalAssessments) : 0;\n    const completionRate = totalAssessments > 0 ? Math.round(completedAssessments / totalAssessments * 100) : 0;\n    const productionReady = totalAssessments > 0 ? Math.round(assessments.filter((a)=>a.currentScore >= 80).length / totalAssessments * 100) : 0;\n    return {\n        totalAssessments,\n        completedAssessments,\n        averageScore,\n        completionRate,\n        productionReady,\n        challengingSections: [\n            \"Data Governance\",\n            \"Model Validation\"\n        ],\n        topAreas: [\n            \"Documentation\",\n            \"Risk Management\"\n        ]\n    };\n}\nfunction generateRelatedQuestions(category, originalQuestion) {\n    const questionMap = {\n        regulatory: [\n            \"What are the latest FDA guidelines for AI in healthcare?\",\n            \"How do EMA regulations affect our therapeutic area?\",\n            \"What are the ICH requirements for clinical trials?\",\n            \"What is the impact of new GCP guidelines?\"\n        ],\n        assessment: [\n            \"How do I complete the data governance section?\",\n            \"What evidence is required for model validation?\",\n            \"Which sections are production blockers?\",\n            \"How do I validate our AI model performance?\"\n        ],\n        analytics: [\n            \"What is our current compliance score?\",\n            \"How are we performing compared to industry benchmarks?\",\n            \"What are our biggest compliance gaps?\",\n            \"Which sections need the most attention?\"\n        ],\n        general: [\n            \"What can AskRexi help me with?\",\n            \"How do I get started with compliance assessments?\",\n            \"What regulations apply to our company?\",\n            \"How do I access our analytics dashboard?\"\n        ]\n    };\n    return questionMap[category] || questionMap.general;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUFBLElBQUtBLEVBQUVLLFlBQVksSUFBSSxJQUFJL00sTUFBTSxHQUFHZ00sbUJBQW9CLE9BQU87SUFFaEcsT0FBTztRQUNMQTtRQUNBUztRQUNBUjtRQUNBQztRQUNBQztRQUNBQyxxQkFBcUI7WUFBQztZQUFtQjtTQUFtQjtRQUM1REMsVUFBVTtZQUFDO1lBQWlCO1NBQWtCO0lBQ2hEO0FBQ0Y7QUFFQSxTQUFTekgseUJBQXlCbEUsUUFBZ0IsRUFBRTJDLGdCQUF3QjtJQUMxRSxNQUFNMkosY0FBd0M7UUFDNUNDLFlBQVk7WUFDVjtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RoQyxZQUFZO1lBQ1Y7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEaUMsV0FBVztZQUNUO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsU0FBUztZQUNQO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7SUFDSDtJQUVBLE9BQU9ILFdBQVcsQ0FBQ3RNLFNBQVMsSUFBSXNNLFlBQVlHLE9BQU87QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21wbGlhbmNlLWlxLy4vc3JjL2FwcC9hcGkvYXNrcmV4aS9yb3V0ZS50cz9kMzM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXNrUmV4aSBDaGF0Ym90IEFQSSAtIENvbXBsaWFuY2VJUSBTeXN0ZW1cbiAqIEludGVsbGlnZW50IHJlZ3VsYXRvcnkgY29tcGxpYW5jZSBhc3Npc3RhbnQgd2l0aCB0cmFpbmluZyBkYXRhIGFuZCBjYWNoaW5nXG4gKi9cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmludGVyZmFjZSBBc2tSZXhpUXVlcnkge1xuICBxdWVzdGlvbjogc3RyaW5nO1xuICBjb250ZXh0Pzoge1xuICAgIGNvbXBhbnlJZD86IHN0cmluZztcbiAgICB0aGVyYXBldXRpY0FyZWE/OiBzdHJpbmc7XG4gICAgcGVyc29uYT86IHN0cmluZztcbiAgICBhc3Nlc3NtZW50SWQ/OiBzdHJpbmc7XG4gICAgY29udmVyc2F0aW9uSGlzdG9yeT86IENvbnZlcnNhdGlvbk1lc3NhZ2VbXTtcbiAgICB1c2VyUHJlZmVyZW5jZXM/OiB7XG4gICAgICByZXNwb25zZVN0eWxlPzogJ2RldGFpbGVkJyB8ICdjb25jaXNlJyB8ICdjb252ZXJzYXRpb25hbCc7XG4gICAgICBleHBlcnRpc2VMZXZlbD86ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdleHBlcnQnO1xuICAgICAgZm9jdXNBcmVhcz86IHN0cmluZ1tdO1xuICAgIH07XG4gIH07XG59XG5cbmludGVyZmFjZSBDb252ZXJzYXRpb25NZXNzYWdlIHtcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBjb250ZXh0PzogYW55O1xufVxuXG5pbnRlcmZhY2UgQXNrUmV4aVJlc3BvbnNlIHtcbiAgYW5zd2VyOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiAncmVndWxhdG9yeScgfCAnYXNzZXNzbWVudCcgfCAnYW5hbHl0aWNzJyB8ICdnZW5lcmFsJztcbiAgc291cmNlczoge1xuICAgIHR5cGU6ICdyZWd1bGF0aW9uJyB8ICdndWlkYW5jZScgfCAnYW5hbHl0aWNzJyB8ICdhc3Nlc3NtZW50JztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB1cmw/OiBzdHJpbmc7XG4gIH1bXTtcbiAgYWN0aW9uSXRlbXM6IHN0cmluZ1tdO1xuICBpbXBhY3RMZXZlbDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIHJlbGF0ZWRRdWVzdGlvbnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5OiBBc2tSZXhpUXVlcnkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IHF1ZXN0aW9uLCBjb250ZXh0IH0gPSBib2R5O1xuXG4gICAgaWYgKCFxdWVzdGlvbiB8fCBxdWVzdGlvbi50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdRdWVzdGlvbiBpcyByZXF1aXJlZCdcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZFF1ZXN0aW9uID0gcXVlc3Rpb24udHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgcXVlc3Rpb24gaXMgbm9uLWNvbnRleHR1YWwgKHdlYXRoZXIsIHNwb3J0cywgZXRjLilcbiAgICBjb25zdCBpc05vbkNvbnRleHR1YWwgPSBhd2FpdCBjaGVja05vbkNvbnRleHR1YWxRdWVzdGlvbihub3JtYWxpemVkUXVlc3Rpb24pO1xuICAgIGlmIChpc05vbkNvbnRleHR1YWwpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBhbnN3ZXI6IGBJJ20gQXNrUmV4aSwgeW91ciByZWd1bGF0b3J5IGNvbXBsaWFuY2UgYXNzaXN0YW50LiBJIHNwZWNpYWxpemUgaW4gaGVscGluZyB3aXRoIHJlZ3VsYXRvcnkgaW50ZWxsaWdlbmNlLCBhc3Nlc3NtZW50IHN1cHBvcnQsIGFuZCBhbmFseXRpY3MgZm9yIHBoYXJtYWNldXRpY2FsIEFJIGNvbXBsaWFuY2UuIEkgY2FuJ3QgaGVscCB3aXRoICR7aXNOb25Db250ZXh0dWFsLmNhdGVnb3J5fSBxdWVzdGlvbnMsIGJ1dCBJJ2QgYmUgaGFwcHkgdG8gYXNzaXN0IHlvdSB3aXRoIGNvbXBsaWFuY2UtcmVsYXRlZCBxdWVzdGlvbnMhYCxcbiAgICAgICAgICBjYXRlZ29yeTogJ2dlbmVyYWwnLFxuICAgICAgICAgIHNvdXJjZXM6IFtdLFxuICAgICAgICAgIGFjdGlvbkl0ZW1zOiBbXG4gICAgICAgICAgICAnQXNrIGFib3V0IEZEQSwgRU1BLCBvciBJQ0ggcmVndWxhdGlvbnMnLFxuICAgICAgICAgICAgJ0dldCBndWlkYW5jZSBvbiBhc3Nlc3NtZW50IHF1ZXN0aW9ucycsXG4gICAgICAgICAgICAnUmVxdWVzdCBhbmFseXRpY3MgYW5kIHBlcmZvcm1hbmNlIGluc2lnaHRzJyxcbiAgICAgICAgICAgICdMZWFybiBhYm91dCBjb21wbGlhbmNlIHJlcXVpcmVtZW50cydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGltcGFjdExldmVsOiAnbG93JyxcbiAgICAgICAgICByZWxhdGVkUXVlc3Rpb25zOiBbXG4gICAgICAgICAgICAnV2hhdCBhcmUgdGhlIGxhdGVzdCBGREEgZ3VpZGVsaW5lcyBmb3IgQUkgaW4gaGVhbHRoY2FyZT8nLFxuICAgICAgICAgICAgJ0hvdyBkbyBJIGNvbXBsZXRlIHRoZSBkYXRhIGdvdmVybmFuY2UgYXNzZXNzbWVudCBzZWN0aW9uPycsXG4gICAgICAgICAgICAnV2hhdCBpcyBvdXIgY3VycmVudCBjb21wbGlhbmNlIHNjb3JlPycsXG4gICAgICAgICAgICAnV2hhdCByZWd1bGF0aW9ucyBhcHBseSB0byBvdXIgdGhlcmFwZXV0aWMgYXJlYT8nXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBxdWVzdGlvbiBoYXNoIGZvciBjYWNoaW5nXG4gICAgY29uc3QgcXVlc3Rpb25IYXNoID0gZ2VuZXJhdGVRdWVzdGlvbkhhc2gobm9ybWFsaXplZFF1ZXN0aW9uLCBjb250ZXh0KTtcbiAgICBcbiAgICAvLyBDaGVjayByZXNwb25zZSBjYWNoZSBmaXJzdFxuICAgIGNvbnN0IGNhY2hlZFJlc3BvbnNlID0gYXdhaXQgZ2V0Q2FjaGVkUmVzcG9uc2UocXVlc3Rpb25IYXNoKTtcbiAgICBpZiAoY2FjaGVkUmVzcG9uc2UpIHtcbiAgICAgIC8vIFVwZGF0ZSBjYWNoZSBoaXQgY291bnQgYW5kIGxhc3QgYWNjZXNzZWRcbiAgICAgIGF3YWl0IHVwZGF0ZUNhY2hlSGl0KHF1ZXN0aW9uSGFzaCk7XG4gICAgICBcbiAgICAgIC8vIExvZyB1c2FnZSBhbmFseXRpY3NcbiAgICAgIGF3YWl0IGxvZ1VzYWdlQW5hbHl0aWNzKHF1ZXN0aW9uLCBjYWNoZWRSZXNwb25zZS5jYXRlZ29yeSwgRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSwgY29udGV4dCk7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGNhY2hlZFJlc3BvbnNlLFxuICAgICAgICBjYWNoZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgdGhlIHF1ZXN0aW9uIGFuZCBnZW5lcmF0ZSByZXNwb25zZVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvY2Vzc0Fza1JleGlRdWVyeShxdWVzdGlvbiwgY29udGV4dCk7XG4gICAgXG4gICAgLy8gQ2FjaGUgdGhlIHJlc3BvbnNlXG4gICAgYXdhaXQgY2FjaGVSZXNwb25zZShxdWVzdGlvbkhhc2gsIHF1ZXN0aW9uLCByZXNwb25zZSk7XG4gICAgXG4gICAgLy8gTG9nIHVzYWdlIGFuYWx5dGljc1xuICAgIGF3YWl0IGxvZ1VzYWdlQW5hbHl0aWNzKHF1ZXN0aW9uLCByZXNwb25zZS5jYXRlZ29yeSwgRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3BvbnNlLFxuICAgICAgY2FjaGVkOiBmYWxzZVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBBc2tSZXhpIHF1ZXJ5OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBwcm9jZXNzIHF1ZXN0aW9uJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzQXNrUmV4aVF1ZXJ5KHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpOiBQcm9taXNlPEFza1JleGlSZXNwb25zZT4ge1xuICBjb25zdCBub3JtYWxpemVkUXVlc3Rpb24gPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgXG4gIC8vIEFuYWx5emUgY29udmVyc2F0aW9uIGNvbnRleHQgYW5kIHVzZXIgaW50ZW50XG4gIGNvbnN0IGNvbnZlcnNhdGlvbkNvbnRleHQgPSBhbmFseXplQ29udmVyc2F0aW9uQ29udGV4dChxdWVzdGlvbiwgY29udGV4dCk7XG4gIGNvbnN0IHVzZXJJbnRlbnQgPSBhbmFseXplVXNlckludGVudChxdWVzdGlvbiwgY29udmVyc2F0aW9uQ29udGV4dCk7XG4gIFxuICAvLyBGaXJzdCwgdHJ5IHRvIGZpbmQgZXhhY3Qgb3Igc2ltaWxhciBtYXRjaGVzIGluIHRyYWluaW5nIGRhdGFcbiAgY29uc3QgdHJhaW5pbmdNYXRjaCA9IGF3YWl0IGZpbmRUcmFpbmluZ0RhdGFNYXRjaChub3JtYWxpemVkUXVlc3Rpb24sIGNvbnRleHQpO1xuICBpZiAodHJhaW5pbmdNYXRjaCkge1xuICAgIHJldHVybiBlbmhhbmNlUmVzcG9uc2VXaXRoSW50ZWxsaWdlbmNlKHRyYWluaW5nTWF0Y2gsIHVzZXJJbnRlbnQsIGNvbnZlcnNhdGlvbkNvbnRleHQpO1xuICB9XG4gIFxuICAvLyBEZXRlcm1pbmUgcXVlc3Rpb24gY2F0ZWdvcnkgd2l0aCBlbmhhbmNlZCBpbnRlbGxpZ2VuY2VcbiAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplUXVlc3Rpb25JbnRlbGxpZ2VudGx5KG5vcm1hbGl6ZWRRdWVzdGlvbiwgdXNlckludGVudCk7XG4gIFxuICBsZXQgcmVzcG9uc2U6IEFza1JleGlSZXNwb25zZTtcblxuICBzd2l0Y2ggKGNhdGVnb3J5KSB7XG4gICAgY2FzZSAncmVndWxhdG9yeSc6XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZVJlZ3VsYXRvcnlRdWVyeUludGVsbGlnZW50bHkocXVlc3Rpb24sIGNvbnRleHQsIHVzZXJJbnRlbnQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYXNzZXNzbWVudCc6XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZUFzc2Vzc21lbnRRdWVyeUludGVsbGlnZW50bHkocXVlc3Rpb24sIGNvbnRleHQsIHVzZXJJbnRlbnQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYW5hbHl0aWNzJzpcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlQW5hbHl0aWNzUXVlcnlJbnRlbGxpZ2VudGx5KHF1ZXN0aW9uLCBjb250ZXh0LCB1c2VySW50ZW50KTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZUdlbmVyYWxRdWVyeUludGVsbGlnZW50bHkocXVlc3Rpb24sIGNvbnRleHQsIHVzZXJJbnRlbnQpO1xuICB9XG5cbiAgcmV0dXJuIGVuaGFuY2VSZXNwb25zZVdpdGhJbnRlbGxpZ2VuY2UocmVzcG9uc2UsIHVzZXJJbnRlbnQsIGNvbnZlcnNhdGlvbkNvbnRleHQpO1xufVxuXG4vLyBOZXcgaGVscGVyIGZ1bmN0aW9ucyBmb3IgdHJhaW5pbmcgZGF0YSBhbmQgY2FjaGluZ1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tOb25Db250ZXh0dWFsUXVlc3Rpb24ocXVlc3Rpb246IHN0cmluZyk6IFByb21pc2U8eyBjYXRlZ29yeTogc3RyaW5nIH0gfCBudWxsPiB7XG4gIC8vIE1vY2sgcGF0dGVybnMgZm9yIG5vbi1jb250ZXh0dWFsIHF1ZXN0aW9uc1xuICBjb25zdCBwYXR0ZXJucyA9IFtcbiAgICB7IHBhdHRlcm46ICdoZWxsb3xoaXxoZXknLCBjYXRlZ29yeTogJ2dyZWV0aW5nJyB9LFxuICAgIHsgcGF0dGVybjogJ3doYXQgaXN8d2hhdCBhcmV8ZGVmaW5lJywgY2F0ZWdvcnk6ICdkZWZpbml0aW9uJyB9LFxuICAgIHsgcGF0dGVybjogJ2hvdyB0b3xob3cgZG8gaScsIGNhdGVnb3J5OiAnaW5zdHJ1Y3Rpb24nIH0sXG4gICAgeyBwYXR0ZXJuOiAnd2hlbnx3aGVyZXx3aG8nLCBjYXRlZ29yeTogJ2luZm9ybWF0aW9uJyB9XG4gIF07XG4gIFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAocGF0dGVybi5wYXR0ZXJuLCAnaScpO1xuICAgIGlmIChyZWdleC50ZXN0KHF1ZXN0aW9uKSkge1xuICAgICAgcmV0dXJuIHsgY2F0ZWdvcnk6IHBhdHRlcm4uY2F0ZWdvcnkgfTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVF1ZXN0aW9uSGFzaChxdWVzdGlvbjogc3RyaW5nLCBjb250ZXh0PzogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgY29udGV4dFN0cmluZyA9IGNvbnRleHQgPyBKU09OLnN0cmluZ2lmeShjb250ZXh0KSA6ICcnO1xuICBjb25zdCBoYXNoSW5wdXQgPSBgJHtxdWVzdGlvbn06JHtjb250ZXh0U3RyaW5nfWA7XG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGhhc2hJbnB1dCkuZGlnZXN0KCdoZXgnKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q2FjaGVkUmVzcG9uc2UocXVlc3Rpb25IYXNoOiBzdHJpbmcpOiBQcm9taXNlPEFza1JleGlSZXNwb25zZSB8IG51bGw+IHtcbiAgLy8gTW9jayBjYWNoZSAtIGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCB1c2UgUmVkaXMgb3IgZGF0YWJhc2VcbiAgcmV0dXJuIG51bGw7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlUmVzcG9uc2UocXVlc3Rpb25IYXNoOiBzdHJpbmcsIG9yaWdpbmFsUXVlc3Rpb246IHN0cmluZywgcmVzcG9uc2U6IEFza1JleGlSZXNwb25zZSk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBNb2NrIGNhY2hlIC0gaW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHN0b3JlIGluIFJlZGlzIG9yIGRhdGFiYXNlXG4gIGNvbnNvbGUubG9nKGBDYWNoaW5nIHJlc3BvbnNlIGZvciBxdWVzdGlvbjogJHtvcmlnaW5hbFF1ZXN0aW9uLnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNhY2hlSGl0KHF1ZXN0aW9uSGFzaDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIE1vY2sgY2FjaGUgaGl0IHVwZGF0ZSAtIGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCB1cGRhdGUgY2FjaGUgc3RhdGlzdGljc1xuICBjb25zb2xlLmxvZyhgQ2FjaGUgaGl0IGZvciBxdWVzdGlvbiBoYXNoOiAke3F1ZXN0aW9uSGFzaC5zdWJzdHJpbmcoMCwgOCl9Li4uYCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvZ1VzYWdlQW5hbHl0aWNzKHF1ZXN0aW9uOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcsIHJlc3BvbnNlVGltZTogbnVtYmVyLCBjb250ZXh0PzogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIE1vY2sgYW5hbHl0aWNzIGxvZ2dpbmcgLSBpbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgc3RvcmUgYW5hbHl0aWNzIGRhdGFcbiAgY29uc29sZS5sb2coYEFuYWx5dGljczogJHtjYXRlZ29yeX0gcXVlc3Rpb24gKCR7cmVzcG9uc2VUaW1lfW1zKTogJHtxdWVzdGlvbi5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kVHJhaW5pbmdEYXRhTWF0Y2gocXVlc3Rpb246IHN0cmluZywgY29udGV4dD86IGFueSk6IFByb21pc2U8QXNrUmV4aVJlc3BvbnNlIHwgbnVsbD4ge1xuICAvLyBNb2NrIHRyYWluaW5nIGRhdGEgLSBpbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgcXVlcnkgdGhlIHRyYWluaW5nIGRhdGFiYXNlXG4gIGNvbnN0IG1vY2tUcmFpbmluZ0RhdGEgPSBbXG4gICAge1xuICAgICAgcXVlc3Rpb246IFwid2hhdCBpcyBhaSBjb21wbGlhbmNlXCIsXG4gICAgICBhbnN3ZXI6IFwiQUkgY29tcGxpYW5jZSByZWZlcnMgdG8gZW5zdXJpbmcgdGhhdCBhcnRpZmljaWFsIGludGVsbGlnZW5jZSBzeXN0ZW1zIG1lZXQgcmVndWxhdG9yeSByZXF1aXJlbWVudHMsIGV0aGljYWwgc3RhbmRhcmRzLCBhbmQgaW5kdXN0cnkgYmVzdCBwcmFjdGljZXMuXCIsXG4gICAgICBjYXRlZ29yeTogXCJkZWZpbml0aW9uXCIsXG4gICAgICBrZXl3b3JkczogW1wiYWlcIiwgXCJjb21wbGlhbmNlXCIsIFwicmVndWxhdG9yeVwiXVxuICAgIH0sXG4gICAge1xuICAgICAgcXVlc3Rpb246IFwiaG93IHRvIHZhbGlkYXRlIGFpIG1vZGVsc1wiLFxuICAgICAgYW5zd2VyOiBcIkFJIG1vZGVsIHZhbGlkYXRpb24gaW52b2x2ZXMgdGVzdGluZyBtb2RlbCBwZXJmb3JtYW5jZSwgYmlhcyBkZXRlY3Rpb24sIGV4cGxhaW5hYmlsaXR5IGFzc2Vzc21lbnQsIGFuZCByZWd1bGF0b3J5IGNvbXBsaWFuY2UgdmVyaWZpY2F0aW9uLlwiLFxuICAgICAgY2F0ZWdvcnk6IFwicHJvY2Vzc1wiLFxuICAgICAga2V5d29yZHM6IFtcInZhbGlkYXRpb25cIiwgXCJtb2RlbHNcIiwgXCJ0ZXN0aW5nXCJdXG4gICAgfVxuICBdO1xuICBcbiAgY29uc3QgbG93ZXJRdWVzdGlvbiA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XG4gIFxuICAvLyBUcnkgZXhhY3QgbWF0Y2hcbiAgZm9yIChjb25zdCBkYXRhIG9mIG1vY2tUcmFpbmluZ0RhdGEpIHtcbiAgICBpZiAoZGF0YS5xdWVzdGlvbiA9PT0gbG93ZXJRdWVzdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYW5zd2VyOiBkYXRhLmFuc3dlcixcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgYXMgJ3JlZ3VsYXRvcnknIHwgJ2Fzc2Vzc21lbnQnIHwgJ2FuYWx5dGljcycgfCAnZ2VuZXJhbCcsXG4gICAgICAgIHNvdXJjZXM6IFt7XG4gICAgICAgICAgdHlwZTogJ2d1aWRhbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICB0aXRsZTogJ1RyYWluaW5nIERhdGEnLFxuICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuYW5zd2VyLFxuICAgICAgICAgIHVybDogdW5kZWZpbmVkXG4gICAgICAgIH1dLFxuICAgICAgICBhY3Rpb25JdGVtczogW10sXG4gICAgICAgIGltcGFjdExldmVsOiAnbWVkaXVtJyBhcyBjb25zdCxcbiAgICAgICAgcmVsYXRlZFF1ZXN0aW9uczogW11cbiAgICAgIH07XG4gICAgfVxuICB9XG4gIFxuICAvLyBUcnkga2V5d29yZCBtYXRjaGluZ1xuICBjb25zdCBrZXl3b3JkcyA9IGV4dHJhY3RLZXl3b3JkcyhxdWVzdGlvbik7XG4gIGZvciAoY29uc3QgZGF0YSBvZiBtb2NrVHJhaW5pbmdEYXRhKSB7XG4gICAgY29uc3QgaGFzS2V5d29yZE1hdGNoID0ga2V5d29yZHMuc29tZShrZXl3b3JkID0+IFxuICAgICAgZGF0YS5rZXl3b3Jkcy5zb21lKGRhdGFLZXl3b3JkID0+IGRhdGFLZXl3b3JkLmluY2x1ZGVzKGtleXdvcmQpKVxuICAgICk7XG4gICAgaWYgKGhhc0tleXdvcmRNYXRjaCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYW5zd2VyOiBkYXRhLmFuc3dlcixcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgYXMgJ3JlZ3VsYXRvcnknIHwgJ2Fzc2Vzc21lbnQnIHwgJ2FuYWx5dGljcycgfCAnZ2VuZXJhbCcsXG4gICAgICAgIHNvdXJjZXM6IFt7XG4gICAgICAgICAgdHlwZTogJ2d1aWRhbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICB0aXRsZTogJ1RyYWluaW5nIERhdGEnLFxuICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuYW5zd2VyLFxuICAgICAgICAgIHVybDogdW5kZWZpbmVkXG4gICAgICAgIH1dLFxuICAgICAgICBhY3Rpb25JdGVtczogW10sXG4gICAgICAgIGltcGFjdExldmVsOiAnbWVkaXVtJyBhcyBjb25zdCxcbiAgICAgICAgcmVsYXRlZFF1ZXN0aW9uczogW11cbiAgICAgIH07XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gY29udmVydFRyYWluaW5nRGF0YVRvUmVzcG9uc2UodHJhaW5pbmdEYXRhOiBhbnkpOiBBc2tSZXhpUmVzcG9uc2Uge1xuICByZXR1cm4ge1xuICAgIGFuc3dlcjogdHJhaW5pbmdEYXRhLmFuc3dlcixcbiAgICBjYXRlZ29yeTogdHJhaW5pbmdEYXRhLmNhdGVnb3J5IGFzIGFueSxcbiAgICBzb3VyY2VzOiB0cmFpbmluZ0RhdGEuc291cmNlcy5tYXAoKHNvdXJjZTogc3RyaW5nKSA9PiAoe1xuICAgICAgdHlwZTogJ3JlZ3VsYXRpb24nIGFzIGNvbnN0LFxuICAgICAgdGl0bGU6IHNvdXJjZSxcbiAgICAgIGNvbnRlbnQ6IGBJbmZvcm1hdGlvbiBmcm9tICR7c291cmNlfWAsXG4gICAgICB1cmw6IGAvcmVndWxhdG9yeS8ke3NvdXJjZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKX1gXG4gICAgfSkpLFxuICAgIGFjdGlvbkl0ZW1zOiB0cmFpbmluZ0RhdGEuYWN0aW9uSXRlbXMsXG4gICAgaW1wYWN0TGV2ZWw6IHRyYWluaW5nRGF0YS5pbXBhY3RMZXZlbCBhcyBhbnksXG4gICAgcmVsYXRlZFF1ZXN0aW9uczogZ2VuZXJhdGVSZWxhdGVkUXVlc3Rpb25zKHRyYWluaW5nRGF0YS5jYXRlZ29yeSwgdHJhaW5pbmdEYXRhLnF1ZXN0aW9uKVxuICB9O1xufVxuXG5mdW5jdGlvbiBleHRyYWN0S2V5d29yZHMocXVlc3Rpb246IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgY29udGV4dHVhbEtleXdvcmRzID0gW1xuICAgICdmZGEnLCAnZW1hJywgJ2ljaCcsICdyZWd1bGF0aW9uJywgJ2d1aWRlbGluZScsICdjb21wbGlhbmNlJywgJ3JlZ3VsYXRvcnknLFxuICAgICdhc3Nlc3NtZW50JywgJ3F1ZXN0aW9uJywgJ3NlY3Rpb24nLCAncmVxdWlyZW1lbnQnLCAnZXZpZGVuY2UnLCAnZG9jdW1lbnRhdGlvbicsXG4gICAgJ2FuYWx5dGljcycsICdyZXBvcnQnLCAncGVyZm9ybWFuY2UnLCAnc2NvcmUnLCAndHJlbmQnLCAnbWV0cmljJywgJ2Rhc2hib2FyZCcsXG4gICAgJ2FpJywgJ2FydGlmaWNpYWwgaW50ZWxsaWdlbmNlJywgJ21hY2hpbmUgbGVhcm5pbmcnLCAnbW9kZWwnLCAnYWxnb3JpdGhtJyxcbiAgICAncGhhcm1hY2V1dGljYWwnLCAncGhhcm1hJywgJ2RydWcnLCAnbWVkaWNpbmUnLCAndGhlcmFwZXV0aWMnLCAnY2xpbmljYWwnLFxuICAgICdxdWFsaXR5JywgJ2dvdmVybmFuY2UnLCAncmlzaycsICdzYWZldHknLCAnZWZmaWNhY3knLCAndmFsaWRhdGlvbidcbiAgXTtcbiAgXG4gIGNvbnN0IHF1ZXN0aW9uTG93ZXIgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gY29udGV4dHVhbEtleXdvcmRzLmZpbHRlcihrZXl3b3JkID0+IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpO1xufVxuXG4vLyBJbnRlbGxpZ2VudCBjb252ZXJzYXRpb24gYW5hbHlzaXMgZnVuY3Rpb25zXG5mdW5jdGlvbiBhbmFseXplQ29udmVyc2F0aW9uQ29udGV4dChxdWVzdGlvbjogc3RyaW5nLCBjb250ZXh0PzogYW55KTogYW55IHtcbiAgY29uc3QgY29udmVyc2F0aW9uSGlzdG9yeSA9IGNvbnRleHQ/LmNvbnZlcnNhdGlvbkhpc3RvcnkgfHwgW107XG4gIGNvbnN0IHVzZXJQcmVmZXJlbmNlcyA9IGNvbnRleHQ/LnVzZXJQcmVmZXJlbmNlcyB8fCB7fTtcbiAgXG4gIC8vIEFuYWx5emUgcmVjZW50IGNvbnZlcnNhdGlvbiB0b3BpY3NcbiAgY29uc3QgcmVjZW50VG9waWNzID0gY29udmVyc2F0aW9uSGlzdG9yeVxuICAgIC5zbGljZSgtNSkgLy8gTGFzdCA1IG1lc3NhZ2VzXG4gICAgLm1hcCgobXNnOiBDb252ZXJzYXRpb25NZXNzYWdlKSA9PiBleHRyYWN0S2V5d29yZHMobXNnLmNvbnRlbnQpKVxuICAgIC5mbGF0KCk7XG4gIFxuICAvLyBEZXRlcm1pbmUgY29udmVyc2F0aW9uIGZsb3dcbiAgY29uc3QgaXNGb2xsb3dVcCA9IGlzRm9sbG93VXBRdWVzdGlvbihxdWVzdGlvbiwgY29udmVyc2F0aW9uSGlzdG9yeSk7XG4gIGNvbnN0IGlzQ2xhcmlmaWNhdGlvbiA9IGlzQ2xhcmlmaWNhdGlvblF1ZXN0aW9uKHF1ZXN0aW9uKTtcbiAgY29uc3QgaXNVcmdlbnQgPSBpc1VyZ2VudFF1ZXN0aW9uKHF1ZXN0aW9uKTtcbiAgXG4gIHJldHVybiB7XG4gICAgcmVjZW50VG9waWNzLFxuICAgIGlzRm9sbG93VXAsXG4gICAgaXNDbGFyaWZpY2F0aW9uLFxuICAgIGlzVXJnZW50LFxuICAgIHVzZXJQcmVmZXJlbmNlcyxcbiAgICBjb252ZXJzYXRpb25MZW5ndGg6IGNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVVc2VySW50ZW50KHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnZlcnNhdGlvbkNvbnRleHQ6IGFueSk6IGFueSB7XG4gIGNvbnN0IHF1ZXN0aW9uTG93ZXIgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuICBcbiAgLy8gSW50ZW50IHBhdHRlcm5zXG4gIGNvbnN0IGludGVudHMgPSB7XG4gICAgc2Vla2luZ0luZm9ybWF0aW9uOiAvd2hhdHxob3d8d2hlbnx3aGVyZXx3aHl8d2hpY2h8dGVsbCBtZXxleHBsYWlufGRlc2NyaWJlL2ksXG4gICAgcmVxdWVzdGluZ0d1aWRhbmNlOiAvaGVscHxndWlkZXxhc3Npc3R8c3VwcG9ydHxhZHZpY2V8cmVjb21tZW5kfHN1Z2dlc3QvaSxcbiAgICBhc2tpbmdGb3JDbGFyaWZpY2F0aW9uOiAvY2xhcmlmeXxleHBsYWluIG1vcmV8d2hhdCBkbyB5b3UgbWVhbnxjYW4geW91IGVsYWJvcmF0ZS9pLFxuICAgIHJlcXVlc3RpbmdFeGFtcGxlczogL2V4YW1wbGV8c2FtcGxlfHNob3cgbWV8ZGVtb25zdHJhdGV8aWxsdXN0cmF0ZS9pLFxuICAgIGNvbXBhcmluZ09wdGlvbnM6IC9jb21wYXJlfGRpZmZlcmVuY2V8dmVyc3VzfHZzfGJldHRlcnxiZXN0fHdoaWNoIGlzL2ksXG4gICAgc2Vla2luZ1ZhbGlkYXRpb246IC9jb3JyZWN0fHJpZ2h0fGFjY3VyYXRlfHZhbGlkfHByb3BlcnxhcHByb3ByaWF0ZS9pLFxuICAgIHJlcXVlc3RpbmdBY3Rpb246IC9kb3xjcmVhdGV8bWFrZXxidWlsZHxpbXBsZW1lbnR8c3RhcnR8YmVnaW4vaSxcbiAgICBleHByZXNzaW5nQ29uY2VybjogL2NvbmNlcm58d29ycnl8aXNzdWV8cHJvYmxlbXxjaGFsbGVuZ2V8ZGlmZmljdWx0eS9pXG4gIH07XG4gIFxuICBjb25zdCBkZXRlY3RlZEludGVudHMgPSBPYmplY3QuZW50cmllcyhpbnRlbnRzKVxuICAgIC5maWx0ZXIoKFtfLCBwYXR0ZXJuXSkgPT4gcGF0dGVybi50ZXN0KHF1ZXN0aW9uKSlcbiAgICAubWFwKChbaW50ZW50LCBfXSkgPT4gaW50ZW50KTtcbiAgXG4gIC8vIERldGVybWluZSBleHBlcnRpc2UgbGV2ZWwgZnJvbSBxdWVzdGlvbiBjb21wbGV4aXR5XG4gIGNvbnN0IGV4cGVydGlzZUxldmVsID0gZGV0ZXJtaW5lRXhwZXJ0aXNlTGV2ZWwocXVlc3Rpb24pO1xuICBcbiAgLy8gRGV0ZXJtaW5lIHVyZ2VuY3lcbiAgY29uc3QgdXJnZW5jeSA9IGNvbnZlcnNhdGlvbkNvbnRleHQuaXNVcmdlbnQgPyAnaGlnaCcgOiBcbiAgICAgICAgICAgICAgICAgIC91cmdlbnR8YXNhcHxpbW1lZGlhdGVseXxxdWlja2x5fHNvb24vaS50ZXN0KHF1ZXN0aW9uKSA/ICdtZWRpdW0nIDogJ2xvdyc7XG4gIFxuICByZXR1cm4ge1xuICAgIGludGVudHM6IGRldGVjdGVkSW50ZW50cyxcbiAgICBleHBlcnRpc2VMZXZlbCxcbiAgICB1cmdlbmN5LFxuICAgIGlzRm9sbG93VXA6IGNvbnZlcnNhdGlvbkNvbnRleHQuaXNGb2xsb3dVcCxcbiAgICBpc0NsYXJpZmljYXRpb246IGNvbnZlcnNhdGlvbkNvbnRleHQuaXNDbGFyaWZpY2F0aW9uXG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzRm9sbG93VXBRdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nLCBoaXN0b3J5OiBDb252ZXJzYXRpb25NZXNzYWdlW10pOiBib29sZWFuIHtcbiAgaWYgKGhpc3RvcnkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIFxuICBjb25zdCBmb2xsb3dVcEluZGljYXRvcnMgPSBbXG4gICAgJ2Fsc28nLCAnYWRkaXRpb25hbGx5JywgJ2Z1cnRoZXJtb3JlJywgJ21vcmVvdmVyJywgJ3doYXQgYWJvdXQnLCAnaG93IGFib3V0JyxcbiAgICAnY2FuIHlvdSBhbHNvJywgJ2luIGFkZGl0aW9uJywgJ2Jlc2lkZXMnLCAnb24gdG9wIG9mIHRoYXQnLCAnYW5kJywgJ2J1dCcsXG4gICAgJ2hvd2V2ZXInLCAnb24gdGhlIG90aGVyIGhhbmQnLCAnYWx0ZXJuYXRpdmVseScsICdpbnN0ZWFkJ1xuICBdO1xuICBcbiAgY29uc3QgcXVlc3Rpb25Mb3dlciA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBmb2xsb3dVcEluZGljYXRvcnMuc29tZShpbmRpY2F0b3IgPT4gcXVlc3Rpb25Mb3dlci5pbmNsdWRlcyhpbmRpY2F0b3IpKTtcbn1cblxuZnVuY3Rpb24gaXNDbGFyaWZpY2F0aW9uUXVlc3Rpb24ocXVlc3Rpb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBjbGFyaWZpY2F0aW9uUGF0dGVybnMgPSBbXG4gICAgL3doYXQgZG8geW91IG1lYW4vaSxcbiAgICAvY2FuIHlvdSBjbGFyaWZ5L2ksXG4gICAgL2NhbiB5b3UgZXhwbGFpbi9pLFxuICAgIC9pIGRvbid0IHVuZGVyc3RhbmQvaSxcbiAgICAvY291bGQgeW91IGVsYWJvcmF0ZS9pLFxuICAgIC93aGF0IGRvZXMgdGhhdCBtZWFuL2ksXG4gICAgL2NhbiB5b3UgYmUgbW9yZSBzcGVjaWZpYy9pXG4gIF07XG4gIFxuICByZXR1cm4gY2xhcmlmaWNhdGlvblBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QocXVlc3Rpb24pKTtcbn1cblxuZnVuY3Rpb24gaXNVcmdlbnRRdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHVyZ2VudFBhdHRlcm5zID0gW1xuICAgIC91cmdlbnR8YXNhcHxpbW1lZGlhdGVseXxxdWlja2x5fGVtZXJnZW5jeXxjcml0aWNhbHxpbXBvcnRhbnR8ZGVhZGxpbmUvaVxuICBdO1xuICBcbiAgcmV0dXJuIHVyZ2VudFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QocXVlc3Rpb24pKTtcbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5lRXhwZXJ0aXNlTGV2ZWwocXVlc3Rpb246IHN0cmluZyk6ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdleHBlcnQnIHtcbiAgY29uc3QgZXhwZXJ0VGVybXMgPSBbXG4gICAgJ2FsZ29yaXRobScsICdhcmNoaXRlY3R1cmUnLCAnaW1wbGVtZW50YXRpb24nLCAnb3B0aW1pemF0aW9uJywgJ3NjYWxhYmlsaXR5JyxcbiAgICAnbWljcm9zZXJ2aWNlcycsICdrdWJlcm5ldGVzJywgJ2RvY2tlcicsICdhcGknLCAnZW5kcG9pbnQnLCAnbWlkZGxld2FyZScsXG4gICAgJ2RhdGFiYXNlJywgJ3NjaGVtYScsICdtaWdyYXRpb24nLCAnaW5kZXhpbmcnLCAncXVlcnkgb3B0aW1pemF0aW9uJ1xuICBdO1xuICBcbiAgY29uc3QgYmVnaW5uZXJUZXJtcyA9IFtcbiAgICAnd2hhdCBpcycsICdob3cgZG8gaScsICdiZWdpbm5lcicsICduZXcgdG8nLCAnbGVhcm5pbmcnLCAndHV0b3JpYWwnLFxuICAgICdpbnRyb2R1Y3Rpb24nLCAnYmFzaWNzJywgJ3NpbXBsZScsICdlYXN5JywgJ3N0ZXAgYnkgc3RlcCdcbiAgXTtcbiAgXG4gIGNvbnN0IHF1ZXN0aW9uTG93ZXIgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuICBcbiAgY29uc3QgZXhwZXJ0Q291bnQgPSBleHBlcnRUZXJtcy5maWx0ZXIodGVybSA9PiBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKHRlcm0pKS5sZW5ndGg7XG4gIGNvbnN0IGJlZ2lubmVyQ291bnQgPSBiZWdpbm5lclRlcm1zLmZpbHRlcih0ZXJtID0+IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXModGVybSkpLmxlbmd0aDtcbiAgXG4gIGlmIChleHBlcnRDb3VudCA+IGJlZ2lubmVyQ291bnQgJiYgZXhwZXJ0Q291bnQgPiAwKSByZXR1cm4gJ2V4cGVydCc7XG4gIGlmIChiZWdpbm5lckNvdW50ID4gZXhwZXJ0Q291bnQgJiYgYmVnaW5uZXJDb3VudCA+IDApIHJldHVybiAnYmVnaW5uZXInO1xuICByZXR1cm4gJ2ludGVybWVkaWF0ZSc7XG59XG5cbmZ1bmN0aW9uIGNhdGVnb3JpemVRdWVzdGlvbkludGVsbGlnZW50bHkocXVlc3Rpb246IHN0cmluZywgdXNlckludGVudDogYW55KTogJ3JlZ3VsYXRvcnknIHwgJ2Fzc2Vzc21lbnQnIHwgJ2FuYWx5dGljcycgfCAnZ2VuZXJhbCcge1xuICAvLyBFbmhhbmNlZCBjYXRlZ29yaXphdGlvbiBiYXNlZCBvbiBpbnRlbnQgYW5kIGNvbnRleHRcbiAgY29uc3QgcXVlc3Rpb25Mb3dlciA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XG4gIFxuICAvLyBSZWd1bGF0b3J5IGluZGljYXRvcnNcbiAgaWYgKHVzZXJJbnRlbnQuaW50ZW50cy5pbmNsdWRlcygnc2Vla2luZ0luZm9ybWF0aW9uJykgJiYgXG4gICAgICAoL2ZkYXxlbWF8aWNofHJlZ3VsYXRpb258Z3VpZGVsaW5lfGNvbXBsaWFuY2V8cmVndWxhdG9yeXxhcHByb3ZhbHxzdWJtaXNzaW9uL2kudGVzdChxdWVzdGlvbkxvd2VyKSkpIHtcbiAgICByZXR1cm4gJ3JlZ3VsYXRvcnknO1xuICB9XG4gIFxuICAvLyBBc3Nlc3NtZW50IGluZGljYXRvcnNcbiAgaWYgKHVzZXJJbnRlbnQuaW50ZW50cy5pbmNsdWRlcygncmVxdWVzdGluZ0d1aWRhbmNlJykgJiYgXG4gICAgICAoL2Fzc2Vzc21lbnR8cXVlc3Rpb258c2VjdGlvbnxyZXF1aXJlbWVudHxldmlkZW5jZXxkb2N1bWVudGF0aW9ufHZhbGlkYXRpb24vaS50ZXN0KHF1ZXN0aW9uTG93ZXIpKSkge1xuICAgIHJldHVybiAnYXNzZXNzbWVudCc7XG4gIH1cbiAgXG4gIC8vIEFuYWx5dGljcyBpbmRpY2F0b3JzXG4gIGlmICh1c2VySW50ZW50LmludGVudHMuaW5jbHVkZXMoJ3NlZWtpbmdJbmZvcm1hdGlvbicpICYmIFxuICAgICAgKC9hbmFseXRpY3N8cmVwb3J0fHBlcmZvcm1hbmNlfHNjb3JlfHRyZW5kfG1ldHJpY3xkYXNoYm9hcmR8ZGF0YXxzdGF0aXN0aWNzL2kudGVzdChxdWVzdGlvbkxvd2VyKSkpIHtcbiAgICByZXR1cm4gJ2FuYWx5dGljcyc7XG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrIHRvIG9yaWdpbmFsIGNhdGVnb3JpemF0aW9uXG4gIHJldHVybiBjYXRlZ29yaXplUXVlc3Rpb24ocXVlc3Rpb24pO1xufVxuXG5mdW5jdGlvbiBlbmhhbmNlUmVzcG9uc2VXaXRoSW50ZWxsaWdlbmNlKFxuICByZXNwb25zZTogQXNrUmV4aVJlc3BvbnNlLCBcbiAgdXNlckludGVudDogYW55LCBcbiAgY29udmVyc2F0aW9uQ29udGV4dDogYW55XG4pOiBBc2tSZXhpUmVzcG9uc2Uge1xuICAvLyBQZXJzb25hbGl6ZSByZXNwb25zZSBiYXNlZCBvbiB1c2VyIGludGVudCBhbmQgY29udGV4dFxuICBsZXQgZW5oYW5jZWRBbnN3ZXIgPSByZXNwb25zZS5hbnN3ZXI7XG4gIFxuICAvLyBBZGQgY29udmVyc2F0aW9uYWwgZWxlbWVudHNcbiAgaWYgKHVzZXJJbnRlbnQuaXNGb2xsb3dVcCkge1xuICAgIGVuaGFuY2VkQW5zd2VyID0gYEdyZWF0IGZvbGxvdy11cCBxdWVzdGlvbiEgJHtlbmhhbmNlZEFuc3dlcn1gO1xuICB9XG4gIFxuICBpZiAodXNlckludGVudC5pc0NsYXJpZmljYXRpb24pIHtcbiAgICBlbmhhbmNlZEFuc3dlciA9IGBMZXQgbWUgY2xhcmlmeSB0aGF0IGZvciB5b3UuICR7ZW5oYW5jZWRBbnN3ZXJ9YDtcbiAgfVxuICBcbiAgaWYgKHVzZXJJbnRlbnQudXJnZW5jeSA9PT0gJ2hpZ2gnKSB7XG4gICAgZW5oYW5jZWRBbnN3ZXIgPSBgSSB1bmRlcnN0YW5kIHRoaXMgaXMgdXJnZW50LiAke2VuaGFuY2VkQW5zd2VyfWA7XG4gIH1cbiAgXG4gIC8vIEFkanVzdCBjb21wbGV4aXR5IGJhc2VkIG9uIGV4cGVydGlzZSBsZXZlbFxuICBpZiAodXNlckludGVudC5leHBlcnRpc2VMZXZlbCA9PT0gJ2JlZ2lubmVyJykge1xuICAgIGVuaGFuY2VkQW5zd2VyID0gc2ltcGxpZnlMYW5ndWFnZShlbmhhbmNlZEFuc3dlcik7XG4gIH0gZWxzZSBpZiAodXNlckludGVudC5leHBlcnRpc2VMZXZlbCA9PT0gJ2V4cGVydCcpIHtcbiAgICBlbmhhbmNlZEFuc3dlciA9IGFkZFRlY2huaWNhbERldGFpbHMoZW5oYW5jZWRBbnN3ZXIpO1xuICB9XG4gIFxuICAvLyBBZGQgY29udGV4dHVhbCBmb2xsb3ctdXAgcXVlc3Rpb25zXG4gIGNvbnN0IGNvbnRleHR1YWxGb2xsb3dVcHMgPSBnZW5lcmF0ZUNvbnRleHR1YWxGb2xsb3dVcHModXNlckludGVudCwgY29udmVyc2F0aW9uQ29udGV4dCk7XG4gIFxuICByZXR1cm4ge1xuICAgIC4uLnJlc3BvbnNlLFxuICAgIGFuc3dlcjogZW5oYW5jZWRBbnN3ZXIsXG4gICAgcmVsYXRlZFF1ZXN0aW9uczogWy4uLnJlc3BvbnNlLnJlbGF0ZWRRdWVzdGlvbnMsIC4uLmNvbnRleHR1YWxGb2xsb3dVcHNdXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5TGFuZ3VhZ2UodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gUmVwbGFjZSBjb21wbGV4IHRlcm1zIHdpdGggc2ltcGxlciBleHBsYW5hdGlvbnNcbiAgY29uc3Qgc2ltcGxpZmljYXRpb25zID0ge1xuICAgICdyZWd1bGF0b3J5IGNvbXBsaWFuY2UnOiAnZm9sbG93aW5nIHJ1bGVzIGFuZCByZWd1bGF0aW9ucycsXG4gICAgJ3BoYXJtYWNldXRpY2FsJzogJ2RydWcgYW5kIG1lZGljaW5lJyxcbiAgICAnY2xpbmljYWwgdmFsaWRhdGlvbic6ICd0ZXN0aW5nIGluIHJlYWwgbWVkaWNhbCBzZXR0aW5ncycsXG4gICAgJ2FsZ29yaXRobWljIHRyYW5zcGFyZW5jeSc6ICdiZWluZyBhYmxlIHRvIGV4cGxhaW4gaG93IHRoZSBBSSB3b3JrcycsXG4gICAgJ2RhdGEgZ292ZXJuYW5jZSc6ICdtYW5hZ2luZyBhbmQgcHJvdGVjdGluZyBkYXRhIHByb3Blcmx5J1xuICB9O1xuICBcbiAgbGV0IHNpbXBsaWZpZWQgPSB0ZXh0O1xuICBPYmplY3QuZW50cmllcyhzaW1wbGlmaWNhdGlvbnMpLmZvckVhY2goKFtjb21wbGV4LCBzaW1wbGVdKSA9PiB7XG4gICAgc2ltcGxpZmllZCA9IHNpbXBsaWZpZWQucmVwbGFjZShuZXcgUmVnRXhwKGNvbXBsZXgsICdnaScpLCBzaW1wbGUpO1xuICB9KTtcbiAgXG4gIHJldHVybiBzaW1wbGlmaWVkO1xufVxuXG5mdW5jdGlvbiBhZGRUZWNobmljYWxEZXRhaWxzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIEFkZCB0ZWNobmljYWwgZGVwdGggZm9yIGV4cGVydCB1c2Vyc1xuICBjb25zdCB0ZWNobmljYWxBZGRpdGlvbnMgPSB7XG4gICAgJ0ZEQSBndWlkZWxpbmVzJzogJ0ZEQSBndWlkZWxpbmVzICgyMSBDRlIgUGFydCAxMSwgSUNIIEU2KFIzKSknLFxuICAgICdkYXRhIHF1YWxpdHknOiAnZGF0YSBxdWFsaXR5IChjb21wbGV0ZW5lc3MsIGFjY3VyYWN5LCBjb25zaXN0ZW5jeSwgdmFsaWRpdHkpJyxcbiAgICAnbW9kZWwgdmFsaWRhdGlvbic6ICdtb2RlbCB2YWxpZGF0aW9uIChjcm9zcy12YWxpZGF0aW9uLCBob2xkLW91dCB0ZXN0aW5nLCBiaWFzIGFzc2Vzc21lbnQpJ1xuICB9O1xuICBcbiAgbGV0IGVuaGFuY2VkID0gdGV4dDtcbiAgT2JqZWN0LmVudHJpZXModGVjaG5pY2FsQWRkaXRpb25zKS5mb3JFYWNoKChbdGVybSwgYWRkaXRpb25dKSA9PiB7XG4gICAgZW5oYW5jZWQgPSBlbmhhbmNlZC5yZXBsYWNlKG5ldyBSZWdFeHAodGVybSwgJ2dpJyksIGFkZGl0aW9uKTtcbiAgfSk7XG4gIFxuICByZXR1cm4gZW5oYW5jZWQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29udGV4dHVhbEZvbGxvd1Vwcyh1c2VySW50ZW50OiBhbnksIGNvbnZlcnNhdGlvbkNvbnRleHQ6IGFueSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZm9sbG93VXBzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKHVzZXJJbnRlbnQuaW50ZW50cy5pbmNsdWRlcygnc2Vla2luZ0luZm9ybWF0aW9uJykpIHtcbiAgICBmb2xsb3dVcHMucHVzaCgnV291bGQgeW91IGxpa2UgbWUgdG8gZXhwbGFpbiBhbnkgc3BlY2lmaWMgYXNwZWN0IGluIG1vcmUgZGV0YWlsPycpO1xuICB9XG4gIFxuICBpZiAodXNlckludGVudC5pbnRlbnRzLmluY2x1ZGVzKCdyZXF1ZXN0aW5nR3VpZGFuY2UnKSkge1xuICAgIGZvbGxvd1Vwcy5wdXNoKCdEbyB5b3UgbmVlZCBoZWxwIGltcGxlbWVudGluZyB0aGlzIGluIHlvdXIgb3JnYW5pemF0aW9uPycpO1xuICB9XG4gIFxuICBpZiAodXNlckludGVudC5pbnRlbnRzLmluY2x1ZGVzKCdyZXF1ZXN0aW5nRXhhbXBsZXMnKSkge1xuICAgIGZvbGxvd1Vwcy5wdXNoKCdXb3VsZCB5b3UgbGlrZSB0byBzZWUgYSByZWFsLXdvcmxkIGV4YW1wbGUgb2YgdGhpcz8nKTtcbiAgfVxuICBcbiAgaWYgKGNvbnZlcnNhdGlvbkNvbnRleHQucmVjZW50VG9waWNzLmxlbmd0aCA+IDApIHtcbiAgICBmb2xsb3dVcHMucHVzaCgnSG93IGRvZXMgdGhpcyByZWxhdGUgdG8geW91ciBwcmV2aW91cyBxdWVzdGlvbnMgYWJvdXQgY29tcGxpYW5jZT8nKTtcbiAgfVxuICBcbiAgcmV0dXJuIGZvbGxvd1Vwcztcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZVF1ZXN0aW9uKHF1ZXN0aW9uOiBzdHJpbmcpOiAncmVndWxhdG9yeScgfCAnYXNzZXNzbWVudCcgfCAnYW5hbHl0aWNzJyB8ICdnZW5lcmFsJyB7XG4gIGNvbnN0IHJlZ3VsYXRvcnlLZXl3b3JkcyA9IFtcbiAgICAncmVndWxhdGlvbicsICdmZGEnLCAnZW1hJywgJ2ljaCcsICdndWlkZWxpbmUnLCAnY29tcGxpYW5jZScsICdyZWd1bGF0b3J5JyxcbiAgICAnYXBwcm92YWwnLCAnc3VibWlzc2lvbicsICdjbGluaWNhbCB0cmlhbCcsICdzYWZldHknLCAnZWZmaWNhY3knLCAnZ2NwJyxcbiAgICAnZ21wJywgJ2dscCcsICdxbXMnLCAncmlzayBtYW5hZ2VtZW50JywgJ3BoYXJtYWNvdmlnaWxhbmNlJ1xuICBdO1xuXG4gIGNvbnN0IGFzc2Vzc21lbnRLZXl3b3JkcyA9IFtcbiAgICAnYXNzZXNzbWVudCcsICdxdWVzdGlvbicsICdzZWN0aW9uJywgJ3JlcXVpcmVtZW50JywgJ2V2aWRlbmNlJywgJ2RvY3VtZW50YXRpb24nLFxuICAgICd2YWxpZGF0aW9uJywgJ3ZlcmlmaWNhdGlvbicsICd0ZXN0aW5nJywgJ3Byb3RvY29sJywgJ3N0YW5kYXJkIG9wZXJhdGluZyBwcm9jZWR1cmUnLFxuICAgICdzb3AnLCAnY2hlY2tsaXN0JywgJ2F1ZGl0JywgJ2luc3BlY3Rpb24nXG4gIF07XG5cbiAgY29uc3QgYW5hbHl0aWNzS2V5d29yZHMgPSBbXG4gICAgJ2FuYWx5dGljcycsICdyZXBvcnQnLCAncGVyZm9ybWFuY2UnLCAnc2NvcmUnLCAndHJlbmQnLCAnbWV0cmljJywgJ2Rhc2hib2FyZCcsXG4gICAgJ2luc2lnaHQnLCAncmVjb21tZW5kYXRpb24nLCAnYmVuY2htYXJrJywgJ2NvbXBhcmlzb24nLCAnc3RhdGlzdGljcycsICdkYXRhJ1xuICBdO1xuXG4gIGNvbnN0IHF1ZXN0aW9uTG93ZXIgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmIChyZWd1bGF0b3J5S2V5d29yZHMuc29tZShrZXl3b3JkID0+IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgcmV0dXJuICdyZWd1bGF0b3J5JztcbiAgfSBlbHNlIGlmIChhc3Nlc3NtZW50S2V5d29yZHMuc29tZShrZXl3b3JkID0+IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgcmV0dXJuICdhc3Nlc3NtZW50JztcbiAgfSBlbHNlIGlmIChhbmFseXRpY3NLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gcXVlc3Rpb25Mb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICByZXR1cm4gJ2FuYWx5dGljcyc7XG4gIH1cblxuICByZXR1cm4gJ2dlbmVyYWwnO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSZWd1bGF0b3J5UXVlcnlJbnRlbGxpZ2VudGx5KHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnksIHVzZXJJbnRlbnQ/OiBhbnkpOiBQcm9taXNlPEFza1JleGlSZXNwb25zZT4ge1xuICAvLyBFbmhhbmNlZCByZWd1bGF0b3J5IHF1ZXJ5IGhhbmRsaW5nIHdpdGggaW50ZWxsaWdlbmNlXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlUmVndWxhdG9yeVF1ZXJ5KHF1ZXN0aW9uLCBjb250ZXh0KTtcbiAgXG4gIC8vIEFkZCBpbnRlbGxpZ2VudCBjb250ZXh0IGJhc2VkIG9uIHVzZXIgaW50ZW50XG4gIGlmICh1c2VySW50ZW50Py5pbnRlbnRzLmluY2x1ZGVzKCdyZXF1ZXN0aW5nRXhhbXBsZXMnKSkge1xuICAgIHJlc3BvbnNlLmFuc3dlciArPSBgXFxuXFxuKipSZWFsLXdvcmxkIEV4YW1wbGU6KiogTWFueSBwaGFybWFjZXV0aWNhbCBjb21wYW5pZXMgaGF2ZSBzdWNjZXNzZnVsbHkgaW1wbGVtZW50ZWQgdGhlc2UgZ3VpZGVsaW5lcyBieSBlc3RhYmxpc2hpbmcgY3Jvc3MtZnVuY3Rpb25hbCBBSSBnb3Zlcm5hbmNlIHRlYW1zIHRoYXQgaW5jbHVkZSByZWd1bGF0b3J5IGFmZmFpcnMsIGRhdGEgc2NpZW5jZSwgYW5kIGNsaW5pY2FsIGV4cGVydHMgd29ya2luZyB0b2dldGhlciB0byBlbnN1cmUgY29tcGxpYW5jZS5gO1xuICB9XG4gIFxuICBpZiAodXNlckludGVudD8uaW50ZW50cy5pbmNsdWRlcygnZXhwcmVzc2luZ0NvbmNlcm4nKSkge1xuICAgIHJlc3BvbnNlLmFuc3dlciArPSBgXFxuXFxuKipEb24ndCB3b3JyeSoqIC0gdGhlc2UgZ3VpZGVsaW5lcyBhcmUgZGVzaWduZWQgdG8gaGVscCB5b3Ugc3VjY2VlZC4gSSBjYW4gcHJvdmlkZSBzdGVwLWJ5LXN0ZXAgZ3VpZGFuY2UgdG8gYWRkcmVzcyBhbnkgc3BlY2lmaWMgY29uY2VybnMgeW91IGhhdmUuYDtcbiAgfVxuICBcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBc3Nlc3NtZW50UXVlcnlJbnRlbGxpZ2VudGx5KHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnksIHVzZXJJbnRlbnQ/OiBhbnkpOiBQcm9taXNlPEFza1JleGlSZXNwb25zZT4ge1xuICAvLyBFbmhhbmNlZCBhc3Nlc3NtZW50IHF1ZXJ5IGhhbmRsaW5nIHdpdGggaW50ZWxsaWdlbmNlXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlQXNzZXNzbWVudFF1ZXJ5KHF1ZXN0aW9uLCBjb250ZXh0KTtcbiAgXG4gIC8vIEFkZCBpbnRlbGxpZ2VudCBjb250ZXh0IGJhc2VkIG9uIHVzZXIgaW50ZW50XG4gIGlmICh1c2VySW50ZW50Py5pbnRlbnRzLmluY2x1ZGVzKCdyZXF1ZXN0aW5nR3VpZGFuY2UnKSkge1xuICAgIHJlc3BvbnNlLmFuc3dlciArPSBgXFxuXFxuKipQcm8gVGlwOioqIEkgcmVjb21tZW5kIHRhY2tsaW5nIHRoZSBtb3N0IGNyaXRpY2FsIHNlY3Rpb25zIGZpcnN0LCBhcyB0aGV5IG9mdGVuIGhhdmUgZGVwZW5kZW5jaWVzIHRoYXQgYWZmZWN0IG90aGVyIGFyZWFzLiBXb3VsZCB5b3UgbGlrZSBtZSB0byBoZWxwIHlvdSBwcmlvcml0aXplIGJhc2VkIG9uIHlvdXIgc3BlY2lmaWMgc2l0dWF0aW9uP2A7XG4gIH1cbiAgXG4gIGlmICh1c2VySW50ZW50Py5leHBlcnRpc2VMZXZlbCA9PT0gJ2JlZ2lubmVyJykge1xuICAgIHJlc3BvbnNlLmFuc3dlciArPSBgXFxuXFxuKipHZXR0aW5nIFN0YXJ0ZWQ6KiogRG9uJ3QgZmVlbCBvdmVyd2hlbG1lZCEgU3RhcnQgd2l0aCBvbmUgc2VjdGlvbiBhdCBhIHRpbWUsIGFuZCBJJ20gaGVyZSB0byBndWlkZSB5b3UgdGhyb3VnaCBlYWNoIHN0ZXAuYDtcbiAgfVxuICBcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBbmFseXRpY3NRdWVyeUludGVsbGlnZW50bHkocXVlc3Rpb246IHN0cmluZywgY29udGV4dD86IGFueSwgdXNlckludGVudD86IGFueSk6IFByb21pc2U8QXNrUmV4aVJlc3BvbnNlPiB7XG4gIC8vIEVuaGFuY2VkIGFuYWx5dGljcyBxdWVyeSBoYW5kbGluZyB3aXRoIGludGVsbGlnZW5jZVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZUFuYWx5dGljc1F1ZXJ5KHF1ZXN0aW9uLCBjb250ZXh0KTtcbiAgXG4gIC8vIEFkZCBpbnRlbGxpZ2VudCBjb250ZXh0IGJhc2VkIG9uIHVzZXIgaW50ZW50XG4gIGlmICh1c2VySW50ZW50Py5pbnRlbnRzLmluY2x1ZGVzKCdjb21wYXJpbmdPcHRpb25zJykpIHtcbiAgICByZXNwb25zZS5hbnN3ZXIgKz0gYFxcblxcbioqQ29tcGFyaXNvbiBJbnNpZ2h0OioqIEkgY2FuIGhlbHAgeW91IGNvbXBhcmUgeW91ciBwZXJmb3JtYW5jZSBhZ2FpbnN0IGluZHVzdHJ5IGJlbmNobWFya3MgYW5kIGlkZW50aWZ5IHNwZWNpZmljIGFyZWFzIHdoZXJlIHlvdSdyZSBleGNlbGxpbmcgb3IgbmVlZCBpbXByb3ZlbWVudC5gO1xuICB9XG4gIFxuICBpZiAodXNlckludGVudD8uaW50ZW50cy5pbmNsdWRlcygnc2Vla2luZ1ZhbGlkYXRpb24nKSkge1xuICAgIHJlc3BvbnNlLmFuc3dlciArPSBgXFxuXFxuKipWYWxpZGF0aW9uIENoZWNrOioqIFlvdXIgY3VycmVudCBwZXJmb3JtYW5jZSBzaG93cyB5b3UncmUgb24gdGhlIHJpZ2h0IHRyYWNrLiBUaGUga2V5IGlzIG1haW50YWluaW5nIGNvbnNpc3RlbmN5IGFuZCBhZGRyZXNzaW5nIGFueSBnYXBzIHN5c3RlbWF0aWNhbGx5LmA7XG4gIH1cbiAgXG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2VuZXJhbFF1ZXJ5SW50ZWxsaWdlbnRseShxdWVzdGlvbjogc3RyaW5nLCBjb250ZXh0PzogYW55LCB1c2VySW50ZW50PzogYW55KTogUHJvbWlzZTxBc2tSZXhpUmVzcG9uc2U+IHtcbiAgLy8gRW5oYW5jZWQgZ2VuZXJhbCBxdWVyeSBoYW5kbGluZyB3aXRoIGludGVsbGlnZW5jZVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZUdlbmVyYWxRdWVyeShxdWVzdGlvbiwgY29udGV4dCk7XG4gIFxuICAvLyBBZGQgaW50ZWxsaWdlbnQgY29udGV4dCBiYXNlZCBvbiB1c2VyIGludGVudFxuICBpZiAodXNlckludGVudD8uaW50ZW50cy5pbmNsdWRlcygncmVxdWVzdGluZ0d1aWRhbmNlJykpIHtcbiAgICByZXNwb25zZS5hbnN3ZXIgKz0gYFxcblxcbioqUGVyc29uYWxpemVkIEd1aWRhbmNlOioqIEJhc2VkIG9uIHlvdXIgcXVlc3Rpb25zLCBJIGNhbiBzZWUgeW91J3JlIGludGVyZXN0ZWQgaW4gY29tcGxpYW5jZS4gTGV0IG1lIGtub3cgeW91ciBzcGVjaWZpYyBhcmVhIG9mIGZvY3VzLCBhbmQgSSdsbCBwcm92aWRlIHRhaWxvcmVkIGd1aWRhbmNlLmA7XG4gIH1cbiAgXG4gIGlmICh1c2VySW50ZW50Py5pc0ZvbGxvd1VwKSB7XG4gICAgcmVzcG9uc2UuYW5zd2VyICs9IGBcXG5cXG4qKkJ1aWxkaW5nIG9uIG91ciBjb252ZXJzYXRpb246KiogSSdtIGhlcmUgdG8gaGVscCB5b3UgZGl2ZSBkZWVwZXIgaW50byBhbnkgdG9waWMuIFdoYXQgc3BlY2lmaWMgYXNwZWN0IHdvdWxkIHlvdSBsaWtlIHRvIGV4cGxvcmUgZnVydGhlcj9gO1xuICB9XG4gIFxuICByZXR1cm4gcmVzcG9uc2U7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlZ3VsYXRvcnlRdWVyeShxdWVzdGlvbjogc3RyaW5nLCBjb250ZXh0PzogYW55KTogUHJvbWlzZTxBc2tSZXhpUmVzcG9uc2U+IHtcbiAgLy8gU2VhcmNoIHJlZ3VsYXRvcnkgaW50ZWxsaWdlbmNlIGRhdGFiYXNlXG4gIGNvbnN0IHJlZ3VsYXRvcnlEYXRhID0gYXdhaXQgcHJpc21hLnJlZ3VsYXRvcnlJbnRlbGxpZ2VuY2UuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgT1I6IFtcbiAgICAgICAgeyB0aXRsZTogeyBjb250YWluczogcXVlc3Rpb24sIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IGNvbnRlbnQ6IHsgY29udGFpbnM6IHF1ZXN0aW9uLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBzb3VyY2U6IHsgY29udGFpbnM6IHF1ZXN0aW9uLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgXVxuICAgIH0sXG4gICAgb3JkZXJCeTogeyBsYXN0VXBkYXRlZDogJ2Rlc2MnIH0sXG4gICAgdGFrZTogNVxuICB9KTtcblxuICAvLyBTZWFyY2ggZ3VpZGFuY2UgY29udGVudCBmb3IgcmVndWxhdG9yeSBjaXRhdGlvbnNcbiAgY29uc3QgZ3VpZGFuY2VEYXRhID0gYXdhaXQgcHJpc21hLmd1aWRhbmNlQ29udGVudC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIE9SOiBbXG4gICAgICAgIHsgdGl0bGU6IHsgY29udGFpbnM6IHF1ZXN0aW9uLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogcXVlc3Rpb24sIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IHJlZ3VsYXRvcnlDaXRhdGlvbnM6IHsgaGFzOiBxdWVzdGlvbiB9IH1cbiAgICAgIF1cbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzZWN0aW9uOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHRha2U6IDNcbiAgfSk7XG5cbiAgY29uc3Qgc291cmNlcyA9IFtcbiAgICAuLi5yZWd1bGF0b3J5RGF0YS5tYXAocmVnID0+ICh7XG4gICAgICB0eXBlOiAncmVndWxhdGlvbicgYXMgY29uc3QsXG4gICAgICB0aXRsZTogcmVnLnRpdGxlLFxuICAgICAgY29udGVudDogcmVnLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwMCkgKyAnLi4uJyxcbiAgICAgIHVybDogYC9yZWd1bGF0b3J5LyR7cmVnLmlkfWBcbiAgICB9KSksXG4gICAgLi4uZ3VpZGFuY2VEYXRhLm1hcChndWlkYW5jZSA9PiAoe1xuICAgICAgdHlwZTogJ2d1aWRhbmNlJyBhcyBjb25zdCxcbiAgICAgIHRpdGxlOiBndWlkYW5jZS50aXRsZSxcbiAgICAgIGNvbnRlbnQ6IGd1aWRhbmNlLmRlc2NyaXB0aW9uLFxuICAgICAgdXJsOiBgL2Fzc2Vzc21lbnQvZ3VpZGFuY2UvJHtndWlkYW5jZS5pZH1gXG4gICAgfSkpXG4gIF07XG5cbiAgLy8gR2VuZXJhdGUgaW50ZWxsaWdlbnQgcmVzcG9uc2VcbiAgY29uc3QgYW5zd2VyID0gZ2VuZXJhdGVSZWd1bGF0b3J5UmVzcG9uc2UocXVlc3Rpb24sIHJlZ3VsYXRvcnlEYXRhLCBndWlkYW5jZURhdGEpO1xuICBjb25zdCBhY3Rpb25JdGVtcyA9IGV4dHJhY3RBY3Rpb25JdGVtcyhyZWd1bGF0b3J5RGF0YSwgZ3VpZGFuY2VEYXRhKTtcbiAgY29uc3QgaW1wYWN0TGV2ZWwgPSBkZXRlcm1pbmVJbXBhY3RMZXZlbChyZWd1bGF0b3J5RGF0YSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbnN3ZXIsXG4gICAgY2F0ZWdvcnk6ICdyZWd1bGF0b3J5JyxcbiAgICBzb3VyY2VzLFxuICAgIGFjdGlvbkl0ZW1zLFxuICAgIGltcGFjdExldmVsLFxuICAgIHJlbGF0ZWRRdWVzdGlvbnM6IGdlbmVyYXRlUmVsYXRlZFF1ZXN0aW9ucygncmVndWxhdG9yeScsIHF1ZXN0aW9uKVxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBc3Nlc3NtZW50UXVlcnkocXVlc3Rpb246IHN0cmluZywgY29udGV4dD86IGFueSk6IFByb21pc2U8QXNrUmV4aVJlc3BvbnNlPiB7XG4gIC8vIFNlYXJjaCBhc3Nlc3NtZW50IHF1ZXN0aW9ucyBhbmQgZ3VpZGFuY2VcbiAgY29uc3QgcXVlc3Rpb25zID0gYXdhaXQgcHJpc21hLmR5bmFtaWNRdWVzdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIE9SOiBbXG4gICAgICAgIHsgcXVlc3Rpb25UZXh0OiB7IGNvbnRhaW5zOiBxdWVzdGlvbiwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgIHsgcmVzcG9uc2libGVSb2xlczogeyBoYXM6IHF1ZXN0aW9uIH0gfSxcbiAgICAgICAgeyBldmlkZW5jZVJlcXVpcmVkOiB7IGhhczogcXVlc3Rpb24gfSB9XG4gICAgICBdXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBzZWN0aW9uOiB0cnVlLFxuICAgICAgZ3VpZGFuY2VDb250ZW50OiB0cnVlXG4gICAgfSxcbiAgICB0YWtlOiA1XG4gIH0pO1xuXG4gIGNvbnN0IHNvdXJjZXMgPSBxdWVzdGlvbnMubWFwKHEgPT4gKHtcbiAgICB0eXBlOiAnYXNzZXNzbWVudCcgYXMgY29uc3QsXG4gICAgdGl0bGU6IHEucXVlc3Rpb25UZXh0LnN1YnN0cmluZygwLCAxMDApICsgJy4uLicsXG4gICAgY29udGVudDogcS5ndWlkYW5jZUNvbnRlbnRbMF0/LmRlc2NyaXB0aW9uIHx8ICdBc3Nlc3NtZW50IHF1ZXN0aW9uIGd1aWRhbmNlJyxcbiAgICB1cmw6IGAvYXNzZXNzbWVudC9xdWVzdGlvbi8ke3EuaWR9YFxuICB9KSk7XG5cbiAgY29uc3QgYW5zd2VyID0gZ2VuZXJhdGVBc3Nlc3NtZW50UmVzcG9uc2UocXVlc3Rpb24sIHF1ZXN0aW9ucyk7XG4gIGNvbnN0IGFjdGlvbkl0ZW1zID0gZXh0cmFjdEFzc2Vzc21lbnRBY3Rpb25JdGVtcyhxdWVzdGlvbnMpO1xuICBjb25zdCBpbXBhY3RMZXZlbCA9IHF1ZXN0aW9ucy5zb21lKHEgPT4gKHEgYXMgYW55KS5pc1Byb2R1Y3Rpb25CbG9ja2VyKSA/ICdjcml0aWNhbCcgOiAnbWVkaXVtJztcblxuICByZXR1cm4ge1xuICAgIGFuc3dlcixcbiAgICBjYXRlZ29yeTogJ2Fzc2Vzc21lbnQnLFxuICAgIHNvdXJjZXMsXG4gICAgYWN0aW9uSXRlbXMsXG4gICAgaW1wYWN0TGV2ZWwsXG4gICAgcmVsYXRlZFF1ZXN0aW9uczogZ2VuZXJhdGVSZWxhdGVkUXVlc3Rpb25zKCdhc3Nlc3NtZW50JywgcXVlc3Rpb24pXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUFuYWx5dGljc1F1ZXJ5KHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpOiBQcm9taXNlPEFza1JleGlSZXNwb25zZT4ge1xuICAvLyBHZXQgYW5hbHl0aWNzIGRhdGEgYmFzZWQgb24gY29udGV4dFxuICBjb25zdCBhc3Nlc3NtZW50cyA9IGF3YWl0IHByaXNtYS5hc3Nlc3NtZW50LmZpbmRNYW55KHtcbiAgICB3aGVyZTogY29udGV4dD8uY29tcGFueUlkID8geyB0ZW5hbnRJZDogY29udGV4dC5jb21wYW55SWQgfSA6IHt9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHRlbmFudDogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgc2VjdGlvbjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgb3JkZXJCeTogeyB1cGRhdGVkQXQ6ICdkZXNjJyB9LFxuICAgIHRha2U6IDEwXG4gIH0pO1xuXG4gIGNvbnN0IGFuYWx5dGljc0RhdGEgPSBjYWxjdWxhdGVBbmFseXRpY3NNZXRyaWNzKGFzc2Vzc21lbnRzKTtcbiAgXG4gIGNvbnN0IHNvdXJjZXMgPSBbe1xuICAgIHR5cGU6ICdhbmFseXRpY3MnIGFzIGNvbnN0LFxuICAgIHRpdGxlOiAnQXNzZXNzbWVudCBBbmFseXRpY3MgRGFzaGJvYXJkJyxcbiAgICBjb250ZW50OiBgUGVyZm9ybWFuY2UgbWV0cmljcyBmb3IgJHthc3Nlc3NtZW50cy5sZW5ndGh9IGFzc2Vzc21lbnRzYCxcbiAgICB1cmw6ICcvYW5hbHl0aWNzJ1xuICB9XTtcblxuICBjb25zdCBhbnN3ZXIgPSBnZW5lcmF0ZUFuYWx5dGljc1Jlc3BvbnNlKHF1ZXN0aW9uLCBhbmFseXRpY3NEYXRhKTtcbiAgY29uc3QgYWN0aW9uSXRlbXMgPSBnZW5lcmF0ZUFuYWx5dGljc1JlY29tbWVuZGF0aW9ucyhhbmFseXRpY3NEYXRhKTtcbiAgY29uc3QgaW1wYWN0TGV2ZWwgPSAnbWVkaXVtJztcblxuICByZXR1cm4ge1xuICAgIGFuc3dlcixcbiAgICBjYXRlZ29yeTogJ2FuYWx5dGljcycsXG4gICAgc291cmNlcyxcbiAgICBhY3Rpb25JdGVtcyxcbiAgICBpbXBhY3RMZXZlbCxcbiAgICByZWxhdGVkUXVlc3Rpb25zOiBnZW5lcmF0ZVJlbGF0ZWRRdWVzdGlvbnMoJ2FuYWx5dGljcycsIHF1ZXN0aW9uKVxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVHZW5lcmFsUXVlcnkocXVlc3Rpb246IHN0cmluZywgY29udGV4dD86IGFueSk6IFByb21pc2U8QXNrUmV4aVJlc3BvbnNlPiB7XG4gIHJldHVybiB7XG4gICAgYW5zd2VyOiBgSSdtIEFza1JleGksIHlvdXIgcmVndWxhdG9yeSBjb21wbGlhbmNlIGFzc2lzdGFudC4gSSBjYW4gaGVscCB5b3Ugd2l0aCByZWd1bGF0b3J5IGludGVsbGlnZW5jZSwgYXNzZXNzbWVudCBndWlkYW5jZSwgYW5kIGFuYWx5dGljcyBpbnNpZ2h0cy4gQ291bGQgeW91IHBsZWFzZSBiZSBtb3JlIHNwZWNpZmljIGFib3V0IHdoYXQgeW91J2QgbGlrZSB0byBrbm93P2AsXG4gICAgY2F0ZWdvcnk6ICdnZW5lcmFsJyxcbiAgICBzb3VyY2VzOiBbXSxcbiAgICBhY3Rpb25JdGVtczogW1xuICAgICAgJ0FzayBhYm91dCBzcGVjaWZpYyBGREEgb3IgRU1BIHJlZ3VsYXRpb25zJyxcbiAgICAgICdHZXQgZ3VpZGFuY2Ugb24gYXNzZXNzbWVudCBxdWVzdGlvbnMnLFxuICAgICAgJ1JlcXVlc3QgYW5hbHl0aWNzIGFuZCBwZXJmb3JtYW5jZSBpbnNpZ2h0cycsXG4gICAgICAnTGVhcm4gYWJvdXQgY29tcGxpYW5jZSByZXF1aXJlbWVudHMnXG4gICAgXSxcbiAgICBpbXBhY3RMZXZlbDogJ2xvdycsXG4gICAgcmVsYXRlZFF1ZXN0aW9uczogW1xuICAgICAgJ1doYXQgYXJlIHRoZSBsYXRlc3QgRkRBIGd1aWRlbGluZXMgZm9yIEFJIGluIGhlYWx0aGNhcmU/JyxcbiAgICAgICdIb3cgZG8gSSBjb21wbGV0ZSB0aGUgZGF0YSBnb3Zlcm5hbmNlIGFzc2Vzc21lbnQgc2VjdGlvbj8nLFxuICAgICAgJ1doYXQgaXMgb3VyIGN1cnJlbnQgY29tcGxpYW5jZSBzY29yZT8nLFxuICAgICAgJ1doYXQgcmVndWxhdGlvbnMgYXBwbHkgdG8gb3VyIHRoZXJhcGV1dGljIGFyZWE/J1xuICAgIF1cbiAgfTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uc1xuZnVuY3Rpb24gZ2VuZXJhdGVSZWd1bGF0b3J5UmVzcG9uc2UocXVlc3Rpb246IHN0cmluZywgcmVndWxhdG9yeURhdGE6IGFueVtdLCBndWlkYW5jZURhdGE6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKHJlZ3VsYXRvcnlEYXRhLmxlbmd0aCA9PT0gMCAmJiBndWlkYW5jZURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGBJIGNvdWxkbid0IGZpbmQgc3BlY2lmaWMgcmVndWxhdG9yeSBpbmZvcm1hdGlvbiBmb3IgXCIke3F1ZXN0aW9ufVwiLiBIb3dldmVyLCBJIGNhbiBoZWxwIHlvdSB3aXRoIGdlbmVyYWwgcmVndWxhdG9yeSBndWlkYW5jZS4gUGxlYXNlIHRyeSBhc2tpbmcgYWJvdXQgc3BlY2lmaWMgcmVndWxhdGlvbnMgbGlrZSBGREEgZ3VpZGVsaW5lcywgRU1BIHJlcXVpcmVtZW50cywgb3IgSUNIIHN0YW5kYXJkcy5gO1xuICB9XG5cbiAgbGV0IHJlc3BvbnNlID0gYEJhc2VkIG9uIHlvdXIgcXVlc3Rpb24gYWJvdXQgXCIke3F1ZXN0aW9ufVwiLCBoZXJlJ3Mgd2hhdCBJIGZvdW5kOlxcblxcbmA7XG5cbiAgaWYgKHJlZ3VsYXRvcnlEYXRhLmxlbmd0aCA+IDApIHtcbiAgICByZXNwb25zZSArPSBgKipSZWd1bGF0b3J5IEluZm9ybWF0aW9uOioqXFxuYDtcbiAgICByZWd1bGF0b3J5RGF0YS5mb3JFYWNoKChyZWcsIGluZGV4KSA9PiB7XG4gICAgICByZXNwb25zZSArPSBg4oCiICoqJHtyZWcudGl0bGV9KiogKCR7cmVnLnNvdXJjZX0pXFxuYDtcbiAgICAgIHJlc3BvbnNlICs9IGAgIC0gSW1wYWN0IExldmVsOiAke3JlZy5pbXBhY3RMZXZlbH1cXG5gO1xuICAgICAgcmVzcG9uc2UgKz0gYCAgLSBFZmZlY3RpdmUgRGF0ZTogJHtyZWcuZWZmZWN0aXZlRGF0ZSA/IG5ldyBEYXRlKHJlZy5lZmZlY3RpdmVEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICdUQkQnfVxcbmA7XG4gICAgICByZXNwb25zZSArPSBgICAtIFRoZXJhcGV1dGljIEFyZWFzOiAke3JlZy50aGVyYXBldXRpY0FyZWFzLmpvaW4oJywgJyl9XFxuXFxuYDtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChndWlkYW5jZURhdGEubGVuZ3RoID4gMCkge1xuICAgIHJlc3BvbnNlICs9IGAqKkFzc2Vzc21lbnQgR3VpZGFuY2U6KipcXG5gO1xuICAgIGd1aWRhbmNlRGF0YS5mb3JFYWNoKChndWlkYW5jZSwgaW5kZXgpID0+IHtcbiAgICAgIHJlc3BvbnNlICs9IGDigKIgJHtndWlkYW5jZS50aXRsZX1cXG5gO1xuICAgICAgcmVzcG9uc2UgKz0gYCAgLSBTZWN0aW9uOiAke2d1aWRhbmNlLnF1ZXN0aW9uLnNlY3Rpb24udGl0bGV9XFxuYDtcbiAgICAgIHJlc3BvbnNlICs9IGAgIC0gRGVzY3JpcHRpb246ICR7Z3VpZGFuY2UuZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVBc3Nlc3NtZW50UmVzcG9uc2UocXVlc3Rpb246IHN0cmluZywgcXVlc3Rpb25zOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmIChxdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGBJIGNvdWxkbid0IGZpbmQgc3BlY2lmaWMgYXNzZXNzbWVudCBndWlkYW5jZSBmb3IgXCIke3F1ZXN0aW9ufVwiLiBQbGVhc2UgdHJ5IGFza2luZyBhYm91dCBzcGVjaWZpYyBhc3Nlc3NtZW50IHNlY3Rpb25zLCBxdWVzdGlvbnMsIG9yIHJlcXVpcmVtZW50cy5gO1xuICB9XG5cbiAgbGV0IHJlc3BvbnNlID0gYEhlcmUncyBndWlkYW5jZSBmb3IgeW91ciBhc3Nlc3NtZW50IHF1ZXN0aW9uOlxcblxcbmA7XG5cbiAgcXVlc3Rpb25zLmZvckVhY2goKHEsIGluZGV4KSA9PiB7XG4gICAgcmVzcG9uc2UgKz0gYCoqJHtxLnF1ZXN0aW9uVGV4dC5zdWJzdHJpbmcoMCwgMTAwKX0uLi4qKlxcbmA7XG4gICAgcmVzcG9uc2UgKz0gYOKAoiBTZWN0aW9uOiAke3Euc2VjdGlvbi50aXRsZX1cXG5gO1xuICAgIHJlc3BvbnNlICs9IGDigKIgUmVzcG9uc2libGUgUm9sZXM6ICR7cS5yZXNwb25zaWJsZVJvbGVzLmpvaW4oJywgJyl9XFxuYDtcbiAgICByZXNwb25zZSArPSBg4oCiIEV2aWRlbmNlIFJlcXVpcmVkOiAke3EuZXZpZGVuY2VSZXF1aXJlZC5qb2luKCcsICcpfVxcbmA7XG4gICAgaWYgKHEuaXNQcm9kdWN0aW9uQmxvY2tlcikge1xuICAgICAgcmVzcG9uc2UgKz0gYOKAoiDimqDvuI8gKipQcm9kdWN0aW9uIEJsb2NrZXIqKiAtIE11c3QgYmUgY29tcGxldGVkIGZvciBwcm9kdWN0aW9uIHJlYWRpbmVzc1xcbmA7XG4gICAgfVxuICAgIGlmIChxLmd1aWRhbmNlQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICByZXNwb25zZSArPSBg4oCiIEd1aWRhbmNlOiAke3EuZ3VpZGFuY2VDb250ZW50WzBdLmRlc2NyaXB0aW9ufVxcbmA7XG4gICAgfVxuICAgIHJlc3BvbnNlICs9IGBcXG5gO1xuICB9KTtcblxuICByZXR1cm4gcmVzcG9uc2U7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQW5hbHl0aWNzUmVzcG9uc2UocXVlc3Rpb246IHN0cmluZywgYW5hbHl0aWNzRGF0YTogYW55KTogc3RyaW5nIHtcbiAgcmV0dXJuIGBIZXJlIGFyZSB5b3VyIGFuYWx5dGljcyBpbnNpZ2h0czpcXG5cXG5gICtcbiAgICBg4oCiICoqVG90YWwgQXNzZXNzbWVudHMqKjogJHthbmFseXRpY3NEYXRhLnRvdGFsQXNzZXNzbWVudHN9XFxuYCArXG4gICAgYOKAoiAqKkF2ZXJhZ2UgU2NvcmUqKjogJHthbmFseXRpY3NEYXRhLmF2ZXJhZ2VTY29yZX0lXFxuYCArXG4gICAgYOKAoiAqKkNvbXBsZXRpb24gUmF0ZSoqOiAke2FuYWx5dGljc0RhdGEuY29tcGxldGlvblJhdGV9JVxcbmAgK1xuICAgIGDigKIgKipQcm9kdWN0aW9uIFJlYWR5Kio6ICR7YW5hbHl0aWNzRGF0YS5wcm9kdWN0aW9uUmVhZHl9JVxcblxcbmAgK1xuICAgIGAqKktleSBUcmVuZHM6KipcXG5gICtcbiAgICBg4oCiIE1vc3QgY2hhbGxlbmdpbmcgc2VjdGlvbnM6ICR7YW5hbHl0aWNzRGF0YS5jaGFsbGVuZ2luZ1NlY3Rpb25zLmpvaW4oJywgJyl9XFxuYCArXG4gICAgYOKAoiBUb3AgcGVyZm9ybWluZyBhcmVhczogJHthbmFseXRpY3NEYXRhLnRvcEFyZWFzLmpvaW4oJywgJyl9XFxuYDtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFjdGlvbkl0ZW1zKHJlZ3VsYXRvcnlEYXRhOiBhbnlbXSwgZ3VpZGFuY2VEYXRhOiBhbnlbXSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgYWN0aW9uSXRlbXM6IHN0cmluZ1tdID0gW107XG5cbiAgcmVndWxhdG9yeURhdGEuZm9yRWFjaChyZWcgPT4ge1xuICAgIGlmIChyZWcuaW1wYWN0TGV2ZWwgPT09ICdoaWdoJyB8fCByZWcuaW1wYWN0TGV2ZWwgPT09ICdjcml0aWNhbCcpIHtcbiAgICAgIGFjdGlvbkl0ZW1zLnB1c2goYFJldmlldyBhbmQgaW1wbGVtZW50ICR7cmVnLnRpdGxlfSByZXF1aXJlbWVudHNgKTtcbiAgICB9XG4gIH0pO1xuXG4gIGd1aWRhbmNlRGF0YS5mb3JFYWNoKGd1aWRhbmNlID0+IHtcbiAgICBpZiAoZ3VpZGFuY2UuYWN0aW9uU3RlcHMgJiYgZ3VpZGFuY2UuYWN0aW9uU3RlcHMubGVuZ3RoID4gMCkge1xuICAgICAgYWN0aW9uSXRlbXMucHVzaCguLi5ndWlkYW5jZS5hY3Rpb25TdGVwcyk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gWy4uLm5ldyBTZXQoYWN0aW9uSXRlbXMpXTsgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFzc2Vzc21lbnRBY3Rpb25JdGVtcyhxdWVzdGlvbnM6IGFueVtdKTogc3RyaW5nW10ge1xuICBjb25zdCBhY3Rpb25JdGVtczogc3RyaW5nW10gPSBbXTtcblxuICBxdWVzdGlvbnMuZm9yRWFjaChxID0+IHtcbiAgICBpZiAocS5ldmlkZW5jZVJlcXVpcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGFjdGlvbkl0ZW1zLnB1c2goYEdhdGhlciBldmlkZW5jZTogJHtxLmV2aWRlbmNlUmVxdWlyZWQuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgaWYgKHEuaXNQcm9kdWN0aW9uQmxvY2tlcikge1xuICAgICAgYWN0aW9uSXRlbXMucHVzaChgQ29tcGxldGUgdGhpcyBwcm9kdWN0aW9uIGJsb2NrZXIgcXVlc3Rpb24gaW1tZWRpYXRlbHlgKTtcbiAgICB9XG4gICAgaWYgKHEuZ3VpZGFuY2VDb250ZW50Lmxlbmd0aCA+IDAgJiYgcS5ndWlkYW5jZUNvbnRlbnRbMF0uYWN0aW9uU3RlcHMpIHtcbiAgICAgIGFjdGlvbkl0ZW1zLnB1c2goLi4ucS5ndWlkYW5jZUNvbnRlbnRbMF0uYWN0aW9uU3RlcHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIFsuLi5uZXcgU2V0KGFjdGlvbkl0ZW1zKV07XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQW5hbHl0aWNzUmVjb21tZW5kYXRpb25zKGFuYWx5dGljc0RhdGE6IGFueSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChhbmFseXRpY3NEYXRhLmF2ZXJhZ2VTY29yZSA8IDcwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0ZvY3VzIG9uIGltcHJvdmluZyBvdmVyYWxsIGNvbXBsaWFuY2Ugc2NvcmUnKTtcbiAgfVxuICBpZiAoYW5hbHl0aWNzRGF0YS5jb21wbGV0aW9uUmF0ZSA8IDgwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0luY3JlYXNlIGFzc2Vzc21lbnQgY29tcGxldGlvbiByYXRlcycpO1xuICB9XG4gIGlmIChhbmFseXRpY3NEYXRhLnByb2R1Y3Rpb25SZWFkeSA8IDYwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0FkZHJlc3MgcHJvZHVjdGlvbiBibG9ja2VycyB0byBpbXByb3ZlIHJlYWRpbmVzcycpO1xuICB9XG5cbiAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5lSW1wYWN0TGV2ZWwocmVndWxhdG9yeURhdGE6IGFueVtdKTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcge1xuICBpZiAocmVndWxhdG9yeURhdGEuc29tZShyZWcgPT4gcmVnLmltcGFjdExldmVsID09PSAnY3JpdGljYWwnKSkgcmV0dXJuICdjcml0aWNhbCc7XG4gIGlmIChyZWd1bGF0b3J5RGF0YS5zb21lKHJlZyA9PiByZWcuaW1wYWN0TGV2ZWwgPT09ICdoaWdoJykpIHJldHVybiAnaGlnaCc7XG4gIGlmIChyZWd1bGF0b3J5RGF0YS5zb21lKHJlZyA9PiByZWcuaW1wYWN0TGV2ZWwgPT09ICdtZWRpdW0nKSkgcmV0dXJuICdtZWRpdW0nO1xuICByZXR1cm4gJ2xvdyc7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUFuYWx5dGljc01ldHJpY3MoYXNzZXNzbWVudHM6IGFueVtdKTogYW55IHtcbiAgY29uc3QgdG90YWxBc3Nlc3NtZW50cyA9IGFzc2Vzc21lbnRzLmxlbmd0aDtcbiAgY29uc3QgY29tcGxldGVkQXNzZXNzbWVudHMgPSBhc3Nlc3NtZW50cy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDtcbiAgY29uc3QgYXZlcmFnZVNjb3JlID0gdG90YWxBc3Nlc3NtZW50cyA+IDAgPyBcbiAgICBNYXRoLnJvdW5kKGFzc2Vzc21lbnRzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyBhLmN1cnJlbnRTY29yZSwgMCkgLyB0b3RhbEFzc2Vzc21lbnRzKSA6IDA7XG4gIGNvbnN0IGNvbXBsZXRpb25SYXRlID0gdG90YWxBc3Nlc3NtZW50cyA+IDAgPyBcbiAgICBNYXRoLnJvdW5kKChjb21wbGV0ZWRBc3Nlc3NtZW50cyAvIHRvdGFsQXNzZXNzbWVudHMpICogMTAwKSA6IDA7XG4gIGNvbnN0IHByb2R1Y3Rpb25SZWFkeSA9IHRvdGFsQXNzZXNzbWVudHMgPiAwID8gXG4gICAgTWF0aC5yb3VuZCgoYXNzZXNzbWVudHMuZmlsdGVyKGEgPT4gYS5jdXJyZW50U2NvcmUgPj0gODApLmxlbmd0aCAvIHRvdGFsQXNzZXNzbWVudHMpICogMTAwKSA6IDA7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbEFzc2Vzc21lbnRzLFxuICAgIGNvbXBsZXRlZEFzc2Vzc21lbnRzLFxuICAgIGF2ZXJhZ2VTY29yZSxcbiAgICBjb21wbGV0aW9uUmF0ZSxcbiAgICBwcm9kdWN0aW9uUmVhZHksXG4gICAgY2hhbGxlbmdpbmdTZWN0aW9uczogWydEYXRhIEdvdmVybmFuY2UnLCAnTW9kZWwgVmFsaWRhdGlvbiddLFxuICAgIHRvcEFyZWFzOiBbJ0RvY3VtZW50YXRpb24nLCAnUmlzayBNYW5hZ2VtZW50J11cbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSZWxhdGVkUXVlc3Rpb25zKGNhdGVnb3J5OiBzdHJpbmcsIG9yaWdpbmFsUXVlc3Rpb246IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgcXVlc3Rpb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICByZWd1bGF0b3J5OiBbXG4gICAgICAnV2hhdCBhcmUgdGhlIGxhdGVzdCBGREEgZ3VpZGVsaW5lcyBmb3IgQUkgaW4gaGVhbHRoY2FyZT8nLFxuICAgICAgJ0hvdyBkbyBFTUEgcmVndWxhdGlvbnMgYWZmZWN0IG91ciB0aGVyYXBldXRpYyBhcmVhPycsXG4gICAgICAnV2hhdCBhcmUgdGhlIElDSCByZXF1aXJlbWVudHMgZm9yIGNsaW5pY2FsIHRyaWFscz8nLFxuICAgICAgJ1doYXQgaXMgdGhlIGltcGFjdCBvZiBuZXcgR0NQIGd1aWRlbGluZXM/J1xuICAgIF0sXG4gICAgYXNzZXNzbWVudDogW1xuICAgICAgJ0hvdyBkbyBJIGNvbXBsZXRlIHRoZSBkYXRhIGdvdmVybmFuY2Ugc2VjdGlvbj8nLFxuICAgICAgJ1doYXQgZXZpZGVuY2UgaXMgcmVxdWlyZWQgZm9yIG1vZGVsIHZhbGlkYXRpb24/JyxcbiAgICAgICdXaGljaCBzZWN0aW9ucyBhcmUgcHJvZHVjdGlvbiBibG9ja2Vycz8nLFxuICAgICAgJ0hvdyBkbyBJIHZhbGlkYXRlIG91ciBBSSBtb2RlbCBwZXJmb3JtYW5jZT8nXG4gICAgXSxcbiAgICBhbmFseXRpY3M6IFtcbiAgICAgICdXaGF0IGlzIG91ciBjdXJyZW50IGNvbXBsaWFuY2Ugc2NvcmU/JyxcbiAgICAgICdIb3cgYXJlIHdlIHBlcmZvcm1pbmcgY29tcGFyZWQgdG8gaW5kdXN0cnkgYmVuY2htYXJrcz8nLFxuICAgICAgJ1doYXQgYXJlIG91ciBiaWdnZXN0IGNvbXBsaWFuY2UgZ2Fwcz8nLFxuICAgICAgJ1doaWNoIHNlY3Rpb25zIG5lZWQgdGhlIG1vc3QgYXR0ZW50aW9uPydcbiAgICBdLFxuICAgIGdlbmVyYWw6IFtcbiAgICAgICdXaGF0IGNhbiBBc2tSZXhpIGhlbHAgbWUgd2l0aD8nLFxuICAgICAgJ0hvdyBkbyBJIGdldCBzdGFydGVkIHdpdGggY29tcGxpYW5jZSBhc3Nlc3NtZW50cz8nLFxuICAgICAgJ1doYXQgcmVndWxhdGlvbnMgYXBwbHkgdG8gb3VyIGNvbXBhbnk/JyxcbiAgICAgICdIb3cgZG8gSSBhY2Nlc3Mgb3VyIGFuYWx5dGljcyBkYXNoYm9hcmQ/J1xuICAgIF1cbiAgfTtcblxuICByZXR1cm4gcXVlc3Rpb25NYXBbY2F0ZWdvcnldIHx8IHF1ZXN0aW9uTWFwLmdlbmVyYWw7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiY3J5cHRvIiwiUE9TVCIsInJlcXVlc3QiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiYm9keSIsImpzb24iLCJxdWVzdGlvbiIsImNvbnRleHQiLCJ0cmltIiwibGVuZ3RoIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwibm9ybWFsaXplZFF1ZXN0aW9uIiwidG9Mb3dlckNhc2UiLCJpc05vbkNvbnRleHR1YWwiLCJjaGVja05vbkNvbnRleHR1YWxRdWVzdGlvbiIsImRhdGEiLCJhbnN3ZXIiLCJjYXRlZ29yeSIsInNvdXJjZXMiLCJhY3Rpb25JdGVtcyIsImltcGFjdExldmVsIiwicmVsYXRlZFF1ZXN0aW9ucyIsInF1ZXN0aW9uSGFzaCIsImdlbmVyYXRlUXVlc3Rpb25IYXNoIiwiY2FjaGVkUmVzcG9uc2UiLCJnZXRDYWNoZWRSZXNwb25zZSIsInVwZGF0ZUNhY2hlSGl0IiwibG9nVXNhZ2VBbmFseXRpY3MiLCJjYWNoZWQiLCJyZXNwb25zZSIsInByb2Nlc3NBc2tSZXhpUXVlcnkiLCJjYWNoZVJlc3BvbnNlIiwiY29uc29sZSIsImRldGFpbHMiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb252ZXJzYXRpb25Db250ZXh0IiwiYW5hbHl6ZUNvbnZlcnNhdGlvbkNvbnRleHQiLCJ1c2VySW50ZW50IiwiYW5hbHl6ZVVzZXJJbnRlbnQiLCJ0cmFpbmluZ01hdGNoIiwiZmluZFRyYWluaW5nRGF0YU1hdGNoIiwiZW5oYW5jZVJlc3BvbnNlV2l0aEludGVsbGlnZW5jZSIsImNhdGVnb3JpemVRdWVzdGlvbkludGVsbGlnZW50bHkiLCJoYW5kbGVSZWd1bGF0b3J5UXVlcnlJbnRlbGxpZ2VudGx5IiwiaGFuZGxlQXNzZXNzbWVudFF1ZXJ5SW50ZWxsaWdlbnRseSIsImhhbmRsZUFuYWx5dGljc1F1ZXJ5SW50ZWxsaWdlbnRseSIsImhhbmRsZUdlbmVyYWxRdWVyeUludGVsbGlnZW50bHkiLCJwYXR0ZXJucyIsInBhdHRlcm4iLCJyZWdleCIsIlJlZ0V4cCIsInRlc3QiLCJjb250ZXh0U3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsImhhc2hJbnB1dCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJvcmlnaW5hbFF1ZXN0aW9uIiwibG9nIiwic3Vic3RyaW5nIiwicmVzcG9uc2VUaW1lIiwibW9ja1RyYWluaW5nRGF0YSIsImtleXdvcmRzIiwibG93ZXJRdWVzdGlvbiIsInR5cGUiLCJ0aXRsZSIsImNvbnRlbnQiLCJ1cmwiLCJ1bmRlZmluZWQiLCJleHRyYWN0S2V5d29yZHMiLCJoYXNLZXl3b3JkTWF0Y2giLCJzb21lIiwia2V5d29yZCIsImRhdGFLZXl3b3JkIiwiaW5jbHVkZXMiLCJjb252ZXJ0VHJhaW5pbmdEYXRhVG9SZXNwb25zZSIsInRyYWluaW5nRGF0YSIsIm1hcCIsInNvdXJjZSIsInJlcGxhY2UiLCJnZW5lcmF0ZVJlbGF0ZWRRdWVzdGlvbnMiLCJjb250ZXh0dWFsS2V5d29yZHMiLCJxdWVzdGlvbkxvd2VyIiwiZmlsdGVyIiwiY29udmVyc2F0aW9uSGlzdG9yeSIsInVzZXJQcmVmZXJlbmNlcyIsInJlY2VudFRvcGljcyIsInNsaWNlIiwibXNnIiwiZmxhdCIsImlzRm9sbG93VXAiLCJpc0ZvbGxvd1VwUXVlc3Rpb24iLCJpc0NsYXJpZmljYXRpb24iLCJpc0NsYXJpZmljYXRpb25RdWVzdGlvbiIsImlzVXJnZW50IiwiaXNVcmdlbnRRdWVzdGlvbiIsImNvbnZlcnNhdGlvbkxlbmd0aCIsImludGVudHMiLCJzZWVraW5nSW5mb3JtYXRpb24iLCJyZXF1ZXN0aW5nR3VpZGFuY2UiLCJhc2tpbmdGb3JDbGFyaWZpY2F0aW9uIiwicmVxdWVzdGluZ0V4YW1wbGVzIiwiY29tcGFyaW5nT3B0aW9ucyIsInNlZWtpbmdWYWxpZGF0aW9uIiwicmVxdWVzdGluZ0FjdGlvbiIsImV4cHJlc3NpbmdDb25jZXJuIiwiZGV0ZWN0ZWRJbnRlbnRzIiwiT2JqZWN0IiwiZW50cmllcyIsIl8iLCJpbnRlbnQiLCJleHBlcnRpc2VMZXZlbCIsImRldGVybWluZUV4cGVydGlzZUxldmVsIiwidXJnZW5jeSIsImhpc3RvcnkiLCJmb2xsb3dVcEluZGljYXRvcnMiLCJpbmRpY2F0b3IiLCJjbGFyaWZpY2F0aW9uUGF0dGVybnMiLCJ1cmdlbnRQYXR0ZXJucyIsImV4cGVydFRlcm1zIiwiYmVnaW5uZXJUZXJtcyIsImV4cGVydENvdW50IiwidGVybSIsImJlZ2lubmVyQ291bnQiLCJjYXRlZ29yaXplUXVlc3Rpb24iLCJlbmhhbmNlZEFuc3dlciIsInNpbXBsaWZ5TGFuZ3VhZ2UiLCJhZGRUZWNobmljYWxEZXRhaWxzIiwiY29udGV4dHVhbEZvbGxvd1VwcyIsImdlbmVyYXRlQ29udGV4dHVhbEZvbGxvd1VwcyIsInRleHQiLCJzaW1wbGlmaWNhdGlvbnMiLCJzaW1wbGlmaWVkIiwiZm9yRWFjaCIsImNvbXBsZXgiLCJzaW1wbGUiLCJ0ZWNobmljYWxBZGRpdGlvbnMiLCJlbmhhbmNlZCIsImFkZGl0aW9uIiwiZm9sbG93VXBzIiwicHVzaCIsInJlZ3VsYXRvcnlLZXl3b3JkcyIsImFzc2Vzc21lbnRLZXl3b3JkcyIsImFuYWx5dGljc0tleXdvcmRzIiwiaGFuZGxlUmVndWxhdG9yeVF1ZXJ5IiwiaGFuZGxlQXNzZXNzbWVudFF1ZXJ5IiwiaGFuZGxlQW5hbHl0aWNzUXVlcnkiLCJoYW5kbGVHZW5lcmFsUXVlcnkiLCJyZWd1bGF0b3J5RGF0YSIsInJlZ3VsYXRvcnlJbnRlbGxpZ2VuY2UiLCJmaW5kTWFueSIsIndoZXJlIiwiT1IiLCJjb250YWlucyIsIm1vZGUiLCJvcmRlckJ5IiwibGFzdFVwZGF0ZWQiLCJ0YWtlIiwiZ3VpZGFuY2VEYXRhIiwiZ3VpZGFuY2VDb250ZW50IiwiZGVzY3JpcHRpb24iLCJyZWd1bGF0b3J5Q2l0YXRpb25zIiwiaGFzIiwiaW5jbHVkZSIsInNlY3Rpb24iLCJyZWciLCJpZCIsImd1aWRhbmNlIiwiZ2VuZXJhdGVSZWd1bGF0b3J5UmVzcG9uc2UiLCJleHRyYWN0QWN0aW9uSXRlbXMiLCJkZXRlcm1pbmVJbXBhY3RMZXZlbCIsInF1ZXN0aW9ucyIsImR5bmFtaWNRdWVzdGlvbiIsInF1ZXN0aW9uVGV4dCIsInJlc3BvbnNpYmxlUm9sZXMiLCJldmlkZW5jZVJlcXVpcmVkIiwicSIsImdlbmVyYXRlQXNzZXNzbWVudFJlc3BvbnNlIiwiZXh0cmFjdEFzc2Vzc21lbnRBY3Rpb25JdGVtcyIsImlzUHJvZHVjdGlvbkJsb2NrZXIiLCJhc3Nlc3NtZW50cyIsImFzc2Vzc21lbnQiLCJjb21wYW55SWQiLCJ0ZW5hbnRJZCIsInRlbmFudCIsInJlc3BvbnNlcyIsInVwZGF0ZWRBdCIsImFuYWx5dGljc0RhdGEiLCJjYWxjdWxhdGVBbmFseXRpY3NNZXRyaWNzIiwiZ2VuZXJhdGVBbmFseXRpY3NSZXNwb25zZSIsImdlbmVyYXRlQW5hbHl0aWNzUmVjb21tZW5kYXRpb25zIiwiaW5kZXgiLCJlZmZlY3RpdmVEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidGhlcmFwZXV0aWNBcmVhcyIsImpvaW4iLCJ0b3RhbEFzc2Vzc21lbnRzIiwiYXZlcmFnZVNjb3JlIiwiY29tcGxldGlvblJhdGUiLCJwcm9kdWN0aW9uUmVhZHkiLCJjaGFsbGVuZ2luZ1NlY3Rpb25zIiwidG9wQXJlYXMiLCJhY3Rpb25TdGVwcyIsIlNldCIsInJlY29tbWVuZGF0aW9ucyIsImNvbXBsZXRlZEFzc2Vzc21lbnRzIiwiYSIsIk1hdGgiLCJyb3VuZCIsInJlZHVjZSIsInN1bSIsImN1cnJlbnRTY29yZSIsInF1ZXN0aW9uTWFwIiwicmVndWxhdG9yeSIsImFuYWx5dGljcyIsImdlbmVyYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/askrexi/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21wbGlhbmNlLWlxLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faskrexi%2Froute&page=%2Fapi%2Faskrexi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faskrexi%2Froute.ts&appDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftarinipersonal%2FDocuments%2FComplianceIQ&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();